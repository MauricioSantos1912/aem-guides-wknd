(function(g,e){Granite.UI=Granite.UI||{};var d=function(a,b){this.el=g(a);b=g.extend({keepHost:!1,stripProtocol:!0},this.el.data(),b);this.stripProtocol=b.stripProtocol;this.keepHost=b.keepHost;this.text=this.el.text().replace(/\s/gm,"")};d.prototype.applyCss=function(){this.el.css({"word-wrap":"break-word",display:"inline-block",overflow:"hidden",width:"100%"})};d.prototype.removeCss=function(){this.el.css({"word-wrap":"",display:"",overflow:"",width:""})};d.prototype.shortenText=function(a){a=a.replace(/^\//,
"");var b=a.match(/^[^\/]+(\/.*)/);return a=b?b[1]:a.slice(1).replace(/^\//,"")};d.prototype.setText=function(a,b,c){b&&(b.length&&"/"===c&&(c=""),c=b+"/"+c);this.el.text(a+c)};d.prototype.shorten=function(){var a;if(0!==this.el.height()){this.el.attr("title",this.text);if(a=this.text.match(/^(([^:]*:\/\/)([^\/]+))(.*)$/)){var b=a[2];var c=a[3];var f=a[4];c.length&&!this.keepHost&&(f=c+f,c="");this.stripProtocol&&(b="")}else c=b="",f=this.text;this.applyCss();this.el.text("-");a=this.el.height();
for(this.setText(b,c,f);this.el.height()>a&&f.length;)f=this.shortenText(f),this.setText(b,c,"\u2026"+f);this.removeCss()}};e.Shortener=d;Granite.UI.Shortener=d})(jQuery,Granite.References);
(function(g,e){var d=[];e.shortenedLinks={registerType:function(a){-1===g.inArray(a,d)&&d.push(a)}};e.ready(function(){e.$root.on(e.EVENT_RESIZE,function(){-1!==g.inArray(e.$root.data("type"),d)&&e.$detailList.find(".shortenpath").each(function(){var a=g(this);a.data("shortened")||((new e.Shortener(a)).shorten(),a.data("shortened",!0))})})})})(jQuery,Granite.References);