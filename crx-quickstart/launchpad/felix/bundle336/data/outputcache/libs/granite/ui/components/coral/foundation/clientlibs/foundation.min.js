(function(n,h){if(navigator.userAgent.match(/.*?(Trident|Edge)/))h(n).on("click","button[type\x3dsubmit]",function(a){var f=this.getAttribute("form");f&&(a.preventDefault(),a=n.getElementById(f))&&(f=n.createEvent("Event"),f.initEvent("submit",!0,!0),a.dispatchEvent(f))});h(n).on("click","button[type\x3dreset]",function(a){var f=this.getAttribute("form");f&&(a.preventDefault(),(a=n.getElementById(f))&&a.reset())});Array.prototype.find||(Array.prototype.find=function(a,f){var c;Array.prototype.some.call(this,
function(b){return a.apply(f,arguments)?(c=b,!0):!1});return c});String.prototype.startsWith||(String.prototype.startsWith=function(a,f){return this.substr(f||0,a.length)===a});String.prototype.endsWith||(String.prototype.endsWith=function(a,f){f=f<this.length?f|0:this.length;return this.substr(f-a.length,a.length)===a});n.contains||(h=function(a){if(1>arguments.length)throw new TypeError("1 argument is required");do{if(this===a)return!0;a&&(a=a.parentNode)}while(a);return!1},n.contains=h,Element.prototype.contains=
h)})(document,Granite.$);Granite=window.Granite||{};Granite.UI=Granite.UI||{};Granite.UI.Foundation=Granite.UI.Foundation||{};(function(n,h,a){a.options.transformHash=!1})(document,Granite.$,History);
(function(n,h,a,f){function c(d,e){d=Array.from(d);var g=Array.from(e);d.forEach(function(m,p){(p=g[p])&&m.isEqualNode(p)?(m.remove(),p.remove()):p&&c(m.children,p.children)})}function b(d){!d||"object"!==typeof d||Array.isArray(d);return{SANITIZE_DOM:!1,CUSTOM_ELEMENT_HANDLING:{tagNameCheck:function(){return!0},attributeNameCheck:function(){return!0},allowCustomizedBuiltInElements:!0},ADD_ATTR:"coral-close tracking trackingelement trackingfeature variant is form fieldtrackingidentifier trackingWidget coral-wizardview-next coral-wizardview-previous".split(" ")}}
a.UI.Foundation.XSS=a.UI.Foundation.XSS||function(){return{validUrlWithPrefix:function(d,e){return this.validUrlWithPrefixes(d,[e])},validUrlWithPrefixes:function(d,e){var g=!1;if(this.isSameOrigin(d)){d=new URL(d,n.location.href);Array.isArray(e)||(e=[e]);for(var m=0;m<e.length;m++){var p=e[m];if(d.pathname.startsWith(p)||d.pathname.startsWith(a.HTTP.getContextPath()+p)){g=!0;break}}}return g},sanitizeHtml:function(d,e){e=DOMPurify.sanitize(d,b(e));d=(new DOMParser).parseFromString(d,"text/html");
var g=(new DOMParser).parseFromString(e,"text/html");d.isEqualNode(g)||(c(d.children,g.children),d.isEqualNode(g)||console.warn("Below tags are being removed while sanitization.\n",d));return e},isSameOrigin:function(d){try{return(new URL(h.baseURI)).origin===(new URL(d,h.baseURI)).origin}catch(e){return!1}},isNullOrigin:function(d){try{return null===(new URL(d,h.baseURI)).origin}catch(e){return!0}}}}()})(window,document,Granite,Granite.$);
(function(n,h,a,f){a.UI.Foundation.Utils=a.UI.Foundation.Utils||function(){var b=[],d=function(m,p,l,r){r=r||f(p);var k=[];m.find(p).each(function(){var q=this;r.is(function(){return l(this,q)})?f(q).remove():k.push(f(q).detach()[0])});return f(k)},e=function(m,p){if(0===m.length)return Array.prototype.push.apply(m,p),m;f.each(p,function(){var l=this;m.some(function(r){return r.src===l.src})||m.push(l)});return m},g=function(m,p){var l=[];f.each(m,function(){var r=h.createElement("script"),k=f.Deferred();
l.push(k);f(r).one("load error",function(){k.resolve()});r.async=!1;r.src=this.src;p.appendChild(r)});return f.when.apply(null,l)};return{everyReverse:function(m,p,l){for(var r=m.length-1;0<=r;r--)if(!p.call(l,m[r],r,m))return!1;return!0},debounce:function(m,p,l){var r;return function(){var k=this,q=arguments,t=l&&!r;clearTimeout(r);r=setTimeout(function(){r=null;l||m.apply(k,q)},p);t&&m.apply(k,q)}},processHtml:function(m,p,l,r){if(m.jquery)var k=m;else k=h.createElement("div"),k.innerHTML=m,k=f(k);
var q=d(k,"script[src]",function(w,A){return w.src===A.src},f(e(b,f("script[src]")))),t=d(k,"link[rel\x3dstylesheet]",function(w,A){return w.href===A.href}),y=f("head");r||(y.append(f("link[rel\x3dstylesheet]",h.body)),f("script[src]",h.body).remove());var u=g(q,y[0]);y.append(t);l&&setTimeout(function(){u.done(l)},0);r=k.find(p);return m.jquery?p?r.length?r:k:k:p?r.length?r[0].outerHTML:k[0].innerHTML:k[0].innerHTML},sanitizeHtml:function(m,p){console.warn("`Granite.UI.Foundation.Utils.sanitizeHtml` is deprecated, use `Granite.UI.Foundation.XSS.sanitizeHtml` instead");
return a.UI.Foundation.XSS.sanitizeHtml(m,p)}}}();n=a.UI.Foundation.Utils;var c;(c=a.UI.Foundation.Utils.XSS)||(console.warn("`Granite.UI.Foundation.Utils.XSS` APIs are deprecated, use `Granite.UI.Foundation.XSS` instead"),c=a.UI.Foundation.XSS);n.XSS=c})(window,document,Granite,Granite.$);
(function(n,h){Granite.UI.Foundation.Registry=Granite.UI.Foundation.Registry||function(){var a=new Map;return{register:function(f,c){a.has(f)?a.get(f).push(c):a.set(f,[c])},get:function(f){return a.has(f)?a.get(f):[]}}}();Granite.UI.Foundation.Registry.register("foundation.adapters",{type:"foundation-registry",selector:h(n),adapter:function(){return Granite.UI.Foundation.Registry}})})(window,Granite.$);
(function(n,h){n.UI.Foundation.Adapters=n.UI.Foundation.Adapters||function(){var a=n.UI.Foundation.Registry,f=function(){return a.get("foundation.adapters")};return{register:function(c,b,d){a.register("foundation.adapters",{type:c,selector:b,adapter:d})},has:function(c){return f().some(function(b){return b.type===c})},get:function(c){var b=[];f().forEach(function(d){d.type===c&&b.push(d)});return b},adapt:function(c,b){if(c&&b){var d=h(c),e;n.UI.Foundation.Utils.everyReverse(f(),function(p){return p.type===
b&&d.is(p.selector)?(e=p,!1):!0});if(e){var g="foundation.adapters.internal.adapters."+e.type,m=d.data(g);if(m&&m.config===e)return m.instance;c=e.adapter(c);d.data(g,{config:e,instance:c});return c}}}}}();h.fn.adaptTo=h.fn.adaptTo||function(a){return n.UI.Foundation.Adapters.adapt(this[0],a)}})(Granite,Granite.$);
(function(n,h){var a=!1;h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-tracker",selector:h(n),adapter:function(){return{setDebugMode:function(f){a=!!f},trackPage:function(f){a&&console.dir({type:"page",data:f});try{n.Granite.Tracking.Tracker.trackPage(f)}catch(c){}},trackEvent:function(f){a&&console.dir({type:"event",data:f});try{n.Granite.Tracking.Tracker.trackEvent(f)}catch(c){}}}}})})(window,Granite.$);
(function(n,h,a){a(function(){var f=a("meta[name\x3d'foundation.tracking.page']",h.head).attr("content");f&&(f=JSON.parse(f),a(n).adaptTo("foundation-tracker").trackPage(f))})})(window,document,Granite.$);
(function(n,h,a){a(h).on("click","[data-foundation-tracking-event]",function(f){a(this).adaptTo("foundation-tracking-event").track(f)});a(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-tracking-event",selector:"[data-foundation-tracking-event]",adapter:function(f){var c=a(f);return{track:function(b){var d=f.getAttribute("data-foundation-tracking-event"),e=f.getAttribute("tracking");b=c.adaptTo("foundation-tracking-event-data-provider");!d||e&&"ON"!==e||(d=JSON.parse(d),
b=b&&b.getTrackingAttributes&&b.getTrackingAttributes(c),b={element:d.element||"No element defined",feature:d.feature||"No feature defined",type:d.type,action:"click",widget:d.widget||{},attributes:b||{}},b.widget.name=b.widget&&b.widget.name?b.widget.name:"No widget defined",a(n).adaptTo("foundation-tracker").trackEvent(b))}}}})})(window,document,Granite.$);
(function(n,h){function a(f){if("string"!==typeof f)return"";if("en"!==Granite.I18n.getLocale()){var c=Granite.I18n.getLocale(),b=Granite.I18n.getDictionary(c);return Object.values(b).includes(f)?Object.keys(b).find(function(d){return b[d]===f}):f.match("^[a-zA-Z0-9\\s-_]+")?f:""}return f.toLowerCase()}"undefined"!==typeof Coral&&Coral.tracking&&Coral.tracking.addListener(function(f,c,b,d){c=b.getAttribute("tracking");c&&"ON"!==c||(b=h(b),b=(c=b.adaptTo("foundation-tracking-event-data-provider"))&&
c.getTrackingAttributes&&c.getTrackingAttributes(b),f={element:a(f.targetElement)||"No element defined",type:a(f.targetType),action:a(f.eventType),widget:{name:a(f.rootElement)||"No widget defined",type:a(f.rootType)},feature:a(f.rootFeature)||"No feature defined",attributes:b||{}},h(n).adaptTo("foundation-tracker").trackEvent(f))})})(window,Granite.$);
(function(n,h,a){a(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-form-handle-tracking",selector:"form",adapter:function(f){return{trackFormSubmit:function(){if(f||f.matches("form")){var c=a(f),b=c.adaptTo("foundation-tracking-event-data-provider"),d=c.serializeArray?c.serializeArray():[],e=f.getAttribute("fieldTrackingIdentifier"),g=f.getAttribute("trackingElement"),m=f.getAttribute("trackingFeature"),p=f.getAttribute("trackingWidget");c=b&&b.getTrackingAttributes?
b.getTrackingAttributes(c):{};b={};var l;if(l=p)b:{try{JSON.parse(p)}catch(k){l=!1;break b}l=!0}p=l?JSON.parse(p):{};p.name=p.name?p.name:"No widget defined";p.type=p.type?p.type:"form";if(e&&d&&0<d.length)try{var r=JSON.parse("["+e+"]");e={};for(l=0;l<d.length;l++)e[d[l].name]=d[l].value;for(d=0;d<r.length;d++)e[r[d].name]&&(b[r[d].tag]=e[r[d].name])}catch(k){}c=Object.assign(c,b);g={element:g||"No element defined",type:"button",action:"click",widget:p,feature:m||"No feature defined",attributes:a.isEmptyObject(c)?
{}:c};a(n).adaptTo("foundation-tracker").trackEvent(g)}}}}})})(window,document,Granite.$);
(function(n,h,a,f){function c(){e||(e=(new f.Dialog).set({closable:"on"}).on("coral-overlay:close",function(l){l.target.remove()}));return e}function b(){g||(g=(new f.Dialog).set({backdrop:f.Dialog.backdrop.STATIC,interaction:"off"}).on("coral-overlay:close",function(l){l.target.remove()}));return g}function d(){if(!m){m=h(n.createElement("div")).addClass("foundation-ui-mask");m.attr("role","alert");var l=n.createElement("span");l.setAttribute("class","u-coral-screenReaderOnly");l.innerHTML=a.I18n.get("Loading");
var r=(new f.Wait).set({centered:!0,size:"L"});r.append(l);m.append(r)}return m}var e,g,m,p=h(window).adaptTo("foundation-registry");p.register("foundation.adapters",{type:"foundation-ui",selector:h(window),adapter:function(){return{alert:function(l,r,k){var q=c();q.variant=k||"default";q.header.textContent=l||"";q.content.innerHTML=r||"";n.body.appendChild(q);q.show()},notify:function(l,r,k,q){q=q&&"number"===typeof q&&0<q?q:5E3;l=l||function(){switch(k){case "error":return a.I18n.get("Error");case "notice":return a.I18n.get("Notice");
case "success":return a.I18n.get("Success");case "help":return a.I18n.get("Help");default:return a.I18n.get("Info")}}();if(f.Toast){var t=(new f.Toast).on("coral-overlay:close",function(y){y.target.remove()});t.set({autoDismiss:q});"warning"===String(k).toLowerCase()?k="error":"help"!==String(k).toLowerCase()&&k||(k="info");t.variant=k;t.content.innerHTML=a.UI.Foundation.XSS.sanitizeHtml(r||l);n.body.appendChild(t);t.show()}else t=new f.Alert,t.classList.add("foundation-ui-notification"),t.variant=
k||"info",t.header.textContent=l,t.content.innerHTML=a.UI.Foundation.XSS.sanitizeHtml(r||""),a.UI.Foundation.Utils.everyReverse(p.get("foundation.ui.notify.positionhandler"),function(y){return!1===y.call(t,t)})&&n.body.appendChild(t);setTimeout(function(){t.remove()},q);return{clear:function(){t.remove()}}},waitTicker:function(l,r){var k=new f.Dialog;k.backdrop=f.Dialog.backdrop.STATIC;k.header.textContent=l;k.header.insertBefore(new f.Wait,k.header.firstChild);k.content.innerHTML=r||"";n.body.appendChild(k);
k.show();return{updateMessage:function(q){k.content.innerHTML=q},clear:function(){k.hide();requestAnimationFrame(function(){k.remove()})}}},prompt:function(l,r,k,q,t){var y=b();y.variant=k||"default";y.header.textContent=l||"";y.content.innerHTML=a.UI.Foundation.XSS.sanitizeHtml(r||"");y.footer.innerHTML="";q.forEach(function(u){var w=new f.Button;w.label.textContent=u.text;u.id&&(w.id=u.id);u.primary?(y.focusOnShow=w,w.variant="primary"):u.warning&&(w.variant="warning");w.on("click",function(A){y.hide();
u.handler&&u.handler(u);t&&t(u.id,u)});y.footer.appendChild(w)});n.body.appendChild(y);y.show()},wait:function(l){d().appendTo(l||n.body)},clearWait:function(){d().detach()}}}})})(document,Granite.$,Granite,Coral);
(function(n,h,a){var f=[],c=function(g,m,p,l){l=l||a(m);var r=[];Array.prototype.forEach.call(g.querySelectorAll(m),function(k){l.is(function(){return p(this,k)})?a(k).remove():r.push(a(k).detach()[0])});return r},b=function(g,m){if(0===g.length)return Array.prototype.push.apply(g,m),g;a.each(m,function(){var p=this;g.some(function(l){return l.src===p.src})||g.push(p)});return g},d=function(g,m){g=g.map(function(p){var l=a.Deferred(),r=h.createElement("script");a(r).one("load error",function(){l.resolve()});
r.async=!1;r.src=p.src;m.appendChild(r);return l});return a.when.apply(null,g)},e=function(g,m){var p=c(g,"script[src]",function(r,k){return r.src===k.src},a(b(f,a("script[src]"))));g=c(g,"link[rel\x3dstylesheet]",function(r,k){return r.href===k.href});var l=a("head");m||(l.append(a("link[rel\x3dstylesheet]",h.body)),a("script[src]",h.body).remove());m=d(p,l[0]);l.append(g);return m};a(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-util-htmlparser",selector:a(n),
adapter:function(){return{parse:function(g,m){var p=g instanceof Element||g instanceof DocumentFragment?g:this.createFragment(g);return e(p,m).then(function(){return p})},createFragment:function(g){var m=h.createElement("template");return"content"in m?(m.innerHTML=g,h.importNode(m.content,!0)):h.createRange().createContextualFragment(g)}}}})})(window,document,Granite.$);
(function(n,h,a){var f=0<=h.platform.toUpperCase().indexOf("MAC");a(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-util-keyboard",selector:a(n),adapter:function(){return{normalize:function(c){c=c.replace(/meta|command|cmd|control/,"ctrl");return f?c.replace(/control|ctrl/,"\u2318"):c}}}})})(window,navigator,Granite.$);
(function(n,h,a){a(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-util-messenger",selector:a(n),adapter:function(){return{put:function(f,c,b){try{var d=JSON.parse(n.sessionStorage.getItem("foundation-util-messenger.internal.messages"))||[];d.push({title:f,message:c,type:b});n.sessionStorage.setItem("foundation-util-messenger.internal.messages",JSON.stringify(d))}catch(e){n.console&&console.warn("Error occur saving message",e)}},promptAll:function(){var f=a(n).adaptTo("foundation-ui"),
c=JSON.parse(n.sessionStorage.getItem("foundation-util-messenger.internal.messages"));c&&(c.forEach(function(b){f.notify(b.title,b.message,b.type)}),n.sessionStorage.removeItem("foundation-util-messenger.internal.messages"))}}}});a(function(){a(n).adaptTo("foundation-util-messenger").promptAll()})})(window,document,Granite.$);
(function(n,h,a){function f(b){var d="GET",e=b,g=void 0;if(2E3<b.length){var m=b.lastIndexOf("?");0<=m&&(d="POST",e=b.substring(0,m),g=b.substring(m+1))}return{method:d,url:e,data:g}}function c(b){this.el=b.el;this.isLoading=!1;this.hasNext=!0;this.offset=0;this.limit=b.limit||20;this.size=b.size;this._resolveURL=b.resolveURL;this._processResponse=b.processResponse;this._onNewPage=b.onNewPage||a.noop;this._wait=b.wait||function(){return{clear:a.noop}};this._tolerance=20;this._started=this._destroyed=
!1;this._scrollHandler=this._performTimeoutId=null}c.prototype.start=function(b,d,e,g){if(this._destroyed)throw Error("Illegal state: paginator is already destroyed");if(this._started)throw Error("Illegal state: paginator is already started");var m=this,p=this.el;this._started=!0;this.offset=0<=b?b:0;this.hasNext="boolean"===typeof d?d:!0;var l=function(){m._scrollHandler=h.UI.Foundation.Utils.debounce(function(){m._destroyed||p.clientHeight+p.scrollTop+m._tolerance>=p.scrollHeight&&m._loadNextPage()},
100);p.addEventListener("scroll",m._scrollHandler);m.restart(m.offset,m.hasNext,e)};g?this._performTimeoutId=setTimeout(function(){l()},g):l()};c.prototype.restart=function(b,d,e){if(this._destroyed)throw Error("Illegal state: paginator is already destroyed");if(!this._started)throw Error("Illegal state: paginator is not yet started");this.offset=0<=b?b:0;this.hasNext="boolean"===typeof d?d:!0;e&&this.isLoading&&this._lastRequest.abort();this._doFirstLoad(e)};c.prototype.destroy=function(){this._scrollHandler&&
(this.el.removeEventListener("scroll",this._scrollHandler),this._scrollHandler=null);clearTimeout(this._performTimeoutId);this.isLoading&&this._lastRequest.abort();this._destroyed=!0};c.prototype._doFirstLoad=function(b){var d=this;if(!b){b=this.el.clientHeight;var e=this.el.scrollHeight;b=0<b&&e-b<=this._tolerance}b&&this._loadNextPage().then(function(){d._doFirstLoad()});return b};c.prototype._loadNextPage=function(){var b=this;if(this.isLoading||!this.hasNext)return a.Deferred().reject().promise();
this.isLoading=!0;var d=this._wait(this),e=this._resolveURL(this);e=f(e);this._lastRequest=a.ajax({method:e.method,url:e.url,data:e.data,cache:!1});return this._lastRequest.then(function(g){d.clear();return b._processResponse(b,g)},function(g,m){b.isLoading=!1;d.clear();"abort"!==m&&(g=h.I18n.get("Error"),m=h.I18n.get("Fail to load next page."),a(n).adaptTo("foundation-ui").alert(g,m,"error"))}).then(function(g){b.offset+=g.length;b.hasNext=g.hasNext;b.isLoading=!1;b._onNewPage(b)})};a(n).adaptTo("foundation-registry").register("foundation.adapters",
{type:"foundation-util-paginator",selector:a(n),adapter:function(){return c}})})(window,Granite,Granite.$);
(function(n,h){function a(f){this._descriptor=f;this._mixins=[]}a.prototype.mix=function(f){this._mixins.push(f);return this};a.prototype.build=function(){var f=this._descriptor,c=this._mixins.reduce(function(d,e){return e(d)},f),b=this._mixins.reduceRight(function(d,e){return e(d)},f);return{configurable:f.configurable,enumerable:f.enumerable,get:c.get,set:b.set}};a.createAttrBasedProperty=function(f,c){return{get:function(){var b=this.getAttribute(f);return void 0===c?b:null===b?c:b},set:function(b){this.setAttribute(f,
b)}}};a.createBooleanAttrBasedProperty=function(f,c){return{get:function(){return this.hasAttribute(f)?!0:void 0===c?!1:c},set:function(b){b?this.setAttribute(f,""):this.removeAttribute(f)}}};a.integerType=function(f){return function(c){return{get:function(){var b=parseInt(c.get.call(this),10);return isNaN(b)?f:b},set:function(b){b=parseInt(b,10);isNaN(b)&&(b=0);c.set.call(this,b)}}}};a.positiveNumber=function(f){return function(c){return{get:function(){var b=c.get.call(this);return 0>b?f:b},set:function(b){if(0>
b)throw new RangeError("Value is negative number");c.set.call(this,b)}}}};h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-util-propertybuilder",selector:h(n),adapter:function(){return a}})})(window,Granite.$);
(function(n,h,a){function f(d){this.el=d.el;this._$el=a(this.el);this._selector=d.selector;this._validate=d.validate||function(){return!0};this._perform=d.perform||a.noop;b++;this._ns=".foundation-util-gesture-longpress-pointer-"+b;this._destroyed=!1}var c=a(h),b=0;f.prototype.start=function(){if(this._destroyed)throw Error("Illegal state: this class is already destroyed");if(navigator.pointerEnabled)this._$el.on("pointerdown"+this._ns,this._selector,this._handlePointerEvent.bind(this));else this._$el.on("touchstart"+
this._ns,this._selector,this._handleTouchEvent.bind(this))};f.prototype._handlePointerEvent=function(d){if(0===d.originalEvent.button&&d.originalEvent.isPrimary&&this._validate()){var e=d.originalEvent.clientX,g=d.originalEvent.clientY,m=d.currentTarget,p=this,l=setTimeout(function(){c.off(p._ns);p._perform(m)},500),r=function(){clearTimeout(l);c.off(p._ns)};c.on("pointermove"+this._ns,function(k){(10<Math.abs(k.originalEvent.clientX-e)||10<Math.abs(k.originalEvent.clientY-g))&&r()}).on("pointerup"+
this._ns,r).on("pointercancel"+this._ns,r)}};f.prototype._handleTouchEvent=function(d){if(!(1<d.originalEvent.touches.length)&&this._validate()){var e=d.originalEvent.touches[0];e={x:e.clientX,y:e.clientY};var g=d.currentTarget,m=this,p=setTimeout(function(){c.off(m._ns);m._perform(g)},500),l=function(){clearTimeout(p);c.off(m._ns)};c.on("touchmove"+this._ns,function(r){r=r.originalEvent.touches[0];(10<Math.abs(r.clientX-e.x)||10<Math.abs(r.clientY-e.y))&&l()}).on("touchend"+this._ns,l).on("touchcancel"+
this._ns,l)}};f.prototype.destroy=function(){this._destroyed=!0;this._$el.off(this._ns)};a(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-util-gesture-longpress",selector:a(n),adapter:function(){return f}})})(window,document,Granite.$);
(function(n,h){function a(f,c,b){if(!b)throw Error("Error saving user preferences: action param is missing");c.forEach(function(d){f[d+"@Delete"]=""});h.post({url:b,data:f}).fail(function(d,e,g){console.error("Error saving user preferences:",e,g)})}h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-preference",selector:h(n),adapter:function(){var f=h("meta[name\x3d'user.preferences']",document.head),c=f.attr("data-foundation-preference-action"),b={};try{b=JSON.parse(f.prop("content"))}catch(d){}return{_setAction:function(d){c=
d},names:function(){return Object.keys(b)},get:function(d){return b[d]},getBoolean:function(d,e){d=this.get(d);return void 0!==e&&void 0===d?e:"boolean"===typeof d?d:"true"===d?!0:"false"===d?!1:!!d},getNumber:function(d,e){d=this.get(d);if("number"===typeof d)return d;e=void 0===e?0:e;d=Number(d).valueOf();return isNaN(d)?e:d},set:function(d,e){var g=new Map;g.set(d,e);this.setAll(g)},setAll:function(d){var e={},g=[];d.forEach(function(m,p){void 0===m?(delete b[p],g.push(p)):(b[p]=m,e[p]=m)});h(document).trigger("foundation-preference-change");
a(e,g,c)}}}})})(window,Granite.$);(function(n,h){var a=Granite.UI.Foundation.Utils.everyReverse,f=h(n).adaptTo("foundation-registry");f.register("foundation.adapters",{type:"foundation-response-parser",selector:h(n),adapter:function(){return{parse:function(c){var b,d=c.getResponseHeader("content-type");if(!d)return c.responseText;a(f.get("foundation.response.parser"),function(e){if(!d.match(e.contentType))return!0;e=e.handler(c);if(!1===e)return!0;b=e;return!1});return b}}}})})(window,Granite.$);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.response.parser",{name:"foundation.json",contentType:/application\/json/,handler:function(a){return JSON.parse(a.responseText)}})})(window,Granite.$);(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.response.parser",{name:"foundation.html",contentType:/text\/html/,handler:function(a){return h(n).adaptTo("foundation-util-htmlparser").createFragment(a.responseText)}})})(window,Granite.$);
(function(n,h,a,f){function c(k,q){for(var t=k.length-1;0<=t;t--){var y=k[t];if(y.submittable&&q.is(y.submittable))return y}}function b(k,q){this.el=k;this.selectorConfig=q;this.$el=a(k);this.customMessage=this.message=null;this.isValidated=!1;this.state=function(t){return{getCustomError:function(){return!!t.customMessage},isValid:function(){return!t.customMessage&&!t.message},isValidated:function(){return t.isValidated}}}(this)}function d(k){return k.reduceRight(function(q,t){t.submittable&&q.push(t.submittable);
return q},[]).join(",")}function e(k,q){return k.some(function(t){return t.exclusion?q.is(t.exclusion):!1})}function g(k){return a(k.adaptTo("foundation-validation-helper").getSubmittables()).map(function(){var q=a(this).adaptTo("foundation-validation");if(!q.checkValidity({suppressEvent:!0}))return{el:this,api:q}}).map(function(){var q=a.Event("foundation-validation-invalid");a(this.el).trigger(q);if(!q.isDefaultPrevented())return this})}function m(k){k=g(k);return 0<k.length?(k.each(function(){this.api.updateUI()}),
k[0].el.focus(),!1):!0}var p=f.UI.Foundation.Utils.everyReverse,l=a(n).adaptTo("foundation-registry");b.prototype={willValidate:function(){if(!this.selectorConfig){var k=l.get("foundation.validation.selector");this.selectorConfig=c(k,this.$el)}return(k=this.selectorConfig.candidate)&&this.$el.is(k)},setCustomValidity:function(k){this.customMessage=k},getValidity:function(){return this.state},checkValidity:function(k){k=k||{};if(!this.willValidate())return this.customMessage=this.message=null,this.isValidated=
!0,k.suppressEvent||this.$el.trigger("foundation-validation-valid"),!0;this.isValidated=!0;if(this.customMessage)return k.suppressEvent||this.$el.trigger("foundation-validation-invalid"),!1;this.message=null;p(l.get("foundation.validation.validator"),function(q){return q.validate&&this.$el.is(q.selector)?(q=q.validate(this.el))?(this.message=q,!1):!0:!0},this);if(this.message)return k.suppressEvent||this.$el.trigger("foundation-validation-invalid"),!1;k.suppressEvent||this.$el.trigger("foundation-validation-valid");
return!0},getValidationMessage:function(){return this.willValidate()?this.customMessage||this.message||"":""},updateUI:function(){if("none"!==this.el.dataset.foundationValidationUi){var k=this.getValidity().isValid()?function(q){if(!q.clear||!this.$el.is(q.selector))return!0;var t=!1;q.clear(this.el,{next:function(){t=!0}});return t}:function(q){if(!q.show||!this.$el.is(q.selector))return!0;var t=!1;q.show(this.el,this.getValidationMessage(),{next:function(){t=!0}});return t};p(l.get("foundation.validation.validator"),
k,this)}}};var r=new WeakMap;a.extend(a.expr[":"],{"-foundation-submittable":function(k){if(r.has(k))return r.get(k).isSubmittable;var q=a(k),t=l.get("foundation.validation.selector"),y=c(t,q),u=!1;y&&(u=!e(t,q));r.set(k,{isSubmittable:u,selectorConfig:y});return u}});l.register("foundation.adapters",{type:"foundation-validation",selector:":-foundation-submittable",adapter:function(k){return new b(k,r.get(k).selectorConfig)}});l.register("foundation.adapters",{type:"foundation-validation-helper",
selector:"*",adapter:function(k){return{getSubmittables:function(){var q=l.get("foundation.validation.selector");return a(k).find(d(q)).filter(function(){var t=!e(q,a(this));r.set(this,{isSubmittable:t});return t}).toArray()},isValid:function(){return this.getSubmittables().every(function(q){q=a(q).adaptTo("foundation-validation");var t=q.getValidity();return t.isValidated()?t.isValid():q.checkValidity({suppressEvent:!0})})}}}});h.addEventListener("submit",function(k){var q=a(k.target);if(q.is("form")&&
!0!==q.prop("noValidate")&&(void 0!==q.prop("noValidate")||void 0===q.attr("novalidate"))){var t=q.data("foundation-validation-bind.internal.valid");(void 0!==t?t:m(q))||(k.stopPropagation(),k.preventDefault())}},!0)})(window,document,Granite.$,Granite);
(function(n,h,a,f){function c(g){n.console&&1>d&&(d++,console.warn("@deprecated ",g,"; use foundation-validation"))}function b(g){var m=g.validate;m&&(g.validate=function(r){return m(a(r))});var p=g.show;p&&(g.show=function(r,k,q){p(a(r),k)===a.validator.CONTINUE&&q.next()});var l=g.clear;l&&(g.clear=function(r,k){l(a(r))===a.validator.CONTINUE&&k.next()});return g}var d=0;a.extend(a.expr[":"],{submittable:function(g){c(":submittable");return a(g).is(":-foundation-submittable")}});a.fn.willValidate=
function(){c("$.fn.willValidate");var g=this.adaptTo("foundation-validation");return g?g.willValidate():!1};a.fn.validationMessage=function(){c("$.fn.validationMessage");var g=this.adaptTo("foundation-validation");return g?g.getValidationMessage():""};a.fn.checkValidity=function(){c("$.fn.checkValidity");var g=this.adaptTo("foundation-validation");return g?g.checkValidity():!0};a.fn.setCustomValidity=function(g){c("$.fn.setCustomValidity");return this.each(function(){var m=a(this).adaptTo("foundation-validation");
m&&m.setCustomValidity(g)})};a.fn.updateErrorUI=function(){c("$.fn.updateErrorUI");return this.each(function(){var g=a(this).adaptTo("foundation-validation");g&&g.updateUI()})};var e=a(n).adaptTo("foundation-registry");a.validator={CONTINUE:1,STOP:2,register:function(){c("$.validator");a.each(arguments,function(){e.register("foundation.validation.validator",b(this))})},isValid:function(g,m){c("$.validator");return g.adaptTo("foundation-validation-helper").getSubmittables().every(function(p){p=a(p).adaptTo("foundation-validation");
var l=p.getValidity();return l.isValidated()?l.isValid():p.checkValidity({suppressEvent:m})})}};a(h).on("foundation-validation-valid",function(g){a(g.target).trigger("valid")});a(h).on("foundation-validation-invalid",function(g){var m=a.Event("invalid",{isJqueryValidator:!0});a(g.target).trigger(m);m.isDefaultPrevented()&&g.preventDefault()})})(window,document,Granite.$,Granite);
(function(n,h){function a(c){var b=c.find(".foundation-validation-bind"),d=c.prop("id");d&&(b=b.add(h(".foundation-validation-bind[form]").filter(function(){return h(this).attr("form")===d})));return b}function f(c){var b=a(c);if(b.length){var d=c.adaptTo("foundation-validation-helper").isValid();c.data("foundation-validation-bind.internal.valid",d);b.prop("disabled",!d)}}h(n).on("foundation-validation-invalid","form",function(c){var b=h(this);a(b).prop("disabled",!0);c=c.target;var d=b.data("foundation-validation-bind.internal.invalids");
void 0===d&&(d=[],b.data("foundation-validation-bind.internal.invalids",d));0>d.indexOf(c)&&d.push(c)});h(n).on("foundation-validation-valid","form",function(c){var b=h(this),d=b.data("foundation-validation-bind.internal.invalids");if(d)if(c=d.indexOf(c.target),0<=c&&d.splice(c,1),0===d.length)f(b);else{c=!1;for(var e=d.length;e--;){if(b.has(d[e]).length){c=!0;break}d.splice(e,1)}c||f(b)}else f(b)})})(document,Granite.$);
(function(n,h,a,f){function c(d,e){return d?d.match(new RegExp("(^|\\s+)"+e+"(\\s+|$)"),"g")?d:d+" "+e:e}function b(d){if(d&&d.getLabelledBy)return d.getLabelledBy()}n=a(n).adaptTo("foundation-registry");n.register("foundation.validation.validator",{selector:"*",show:function(d,e){var g=a(d),m=g.adaptTo("foundation-field");m&&m.setInvalid&&m.setInvalid(!0);var p=g.data("foundation-validation.internal.error");p?(p.content.innerHTML=e,p.parentNode||(g.after(p),p.show(),d=c(b(m),p.id),m&&m.setLabelledBy&&
m.setLabelledBy(d))):(p=new f.Tooltip,p.variant="error",p.interaction="off",p.placement="top",p.target=d,p.content.innerHTML=e,p.open=!0,p.id=f.commons.getUID(),g.data("foundation-validation.internal.error",p),g.after(p),d=c(b(m),p.id),m&&m.setLabelledBy&&m.setLabelledBy(d))},clear:function(d){var e=a(d);(d=e.adaptTo("foundation-field"))&&d.setInvalid&&d.setInvalid(!1);var g=e.data("foundation-validation.internal.error");g&&(g.hide(),g.remove(),(e=b(d))&&-1!==e.indexOf(g.id)&&(e=e.split(" ").filter(function(m){return m!==
g.id}).join(" "),d&&d.setLabelledBy&&d.setLabelledBy(e)))}});n.register("foundation.validation.selector",{exclusion:".foundation-field-mixed"});n.register("foundation.validation.selector",{exclusion:".foundation-field-related"})})(window,document,Granite.$,Coral);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.validation.validator",{selector:"[data-foundation-validation~\x3d'foundation.jcr.name'],[data-validation~\x3d'foundation.jcr.name']",validate:function(f){f=f.value;for(var c=0,b=f.length;c<b;c++)if(0<='%/\\:*?"[]|\n\t\r. '.indexOf(f[c])||127<f.charCodeAt(c))return a.I18n.get("Invalid character '{0}'. The input must use characters matching the following regular expression {1}.",[f[c],"/^[a-zA-Z0-9_-,]+$/"])}})})(window,Granite.$,
Granite);(function(n,h,a){var f=Granite.UI.Foundation.Time;f?(f.relative=a(n).adaptTo("foundation-preference").get("relativeDateCutoff"),f.locale=h.documentElement.lang||n.navigator.userLanguage||n.navigator.language):console.warn("Granite.UI.Foundation.Time is not available; no setting is set")})(window,document,Granite.$);
(function(n,h,a,f,c,b){function d(){var l=Reflect.construct(HTMLElement,[],this.constructor);l._construct();return l}function e(l){return l?"#"===l[0]?a.when(h.querySelector(l)):a.ajax({url:l,cache:!1}).then(function(r){return a(n).adaptTo("foundation-util-htmlparser").parse(r)}).then(function(r){return a(r).children()[0]}):a.Deferred().reject().promise()}function g(l){return{setName:function(r){l.setAttribute("name",r)},setDisabled:function(r){l.disabled=r},setReadOnly:function(r){l.readOnly=r},
getValues:function(){return l.items.getAll().map(function(r){return{value:r.value,text:r.label.textContent,isUserDefined:r.hasAttribute("data-foundation-autocomplete-value-userdefined")}})},setValues:function(r){l.items.clear();this.appendValues(r)},appendValues:function(r){r.forEach(function(k){var q=(new f.Tag).set({closable:!0,value:k.value,label:{textContent:k.text}});k.isUserDefined&&q.setAttribute("data-foundation-autocomplete-value-userdefined","");if(k.data)for(var t in k.data)if(k.data.hasOwnProperty(t)){var y=
t,u=t.charAt(0);u!==u.toUpperCase()&&(y=u.toUpperCase(),1<t.length&&(y+=t.substr(1)));q.dataset["foundationAutocompleteCustom"+y]=k.data[t]}l.items.add(q)})}}}var m=0<=n.navigator.userAgent.indexOf("Trident/7.0"),p=a(n).adaptTo("foundation-util-propertybuilder");d.prototype=Object.create(HTMLElement.prototype);d.prototype.constructor=d;Object.defineProperties(d.prototype,{field:{get:function(){return this._input}},delay:(new p(p.createAttrBasedProperty("delay"))).mix(p.integerType(500)).mix(p.positiveNumber(500)).build(),
pickerSrc:p.createAttrBasedProperty("pickersrc"),valueDisplayMode:p.createAttrBasedProperty("valuedisplaymode","inline"),variant:p.createAttrBasedProperty("variant"),name:p.createAttrBasedProperty("name",""),placeholder:p.createAttrBasedProperty("placeholder",""),labelledBy:p.createAttrBasedProperty("labelledby",""),labelled:p.createAttrBasedProperty("labelled",c.I18n.get("Open Selection Dialog")),disabled:p.createBooleanAttrBasedProperty("disabled"),readOnly:p.createBooleanAttrBasedProperty("readonly"),
invalid:p.createBooleanAttrBasedProperty("invalid"),required:p.createBooleanAttrBasedProperty("required"),multiple:p.createBooleanAttrBasedProperty("multiple"),forceSelection:p.createBooleanAttrBasedProperty("forceselection"),droppable:p.createBooleanAttrBasedProperty("droppable"),value:{get:function(){return this.multiple?this.values[0]:this.values[0]||""},set:function(l){this.values=[l]}},values:{get:function(){return this._getValueAPI(function(l){return l.getValues().map(function(r){return r.value})})},
set:function(l){var r=this;this._getValueAPI(function(k){var q=l.map(function(t){return{value:t,text:t}});r.multiple?k.setValues(q):k.setValues(0<q.length?[q[0]]:[]);r._validate()})}}});d.prototype._construct=function(){var l=this,r=a(this);this._render();var k;m?this._input.addEventListener("keydown",function(t){clearTimeout(k);k=setTimeout(l._onUserInput.bind(l),l.delay)}):this._input.addEventListener("input",function(t){clearTimeout(k);k=setTimeout(l._onUserInput.bind(l),l.delay)});this._input.addEventListener("keydown",
function(t){switch(t.keyCode){case 38:case 40:t.preventDefault();clearTimeout(k);l._suggestion.open?l._focus(l._suggestion,38===t.keyCode):l._onUserInput();break;case 27:t.preventDefault();l._suggestion.open&&t.stopPropagation();clearTimeout(k);l._cancelSuggestion();break;case 9:clearTimeout(k);l._cancelSuggestion();break;case 13:(l._suggestion.open||"inline"!==l.valueDisplayMode&&""!==l._input.value)&&t.preventDefault(),clearTimeout(k),t=l._input.value.trim(),t.length&&l._appendValue(t).then(function(){l._cancelSuggestion();
l._input.value=""})}});this._input.addEventListener("blur",function(t){l.multiple||(t=l._input.value,""!==t&&t.trim()!==t&&l._appendValue(l._input.value.trim(),!0).then(function(){l._cancelSuggestion()}));!l.multiple&&l.forceSelection&&l._getValueAPI(function(y){y=y.getValues();l._input.value=y.length?y[0].text:""})});r.on("foundation-assetdropped",".foundation-autocomplete-droppable",function(t){t.preventDefault();t.stopPropagation();l._appendValue(t.path,!0)});r.on("change","coral-taglist[foundation-autocomplete-value]",
function(t){l._onValueChangeByUser()});r.on("coral-collection:remove","coral-taglist[foundation-autocomplete-value]",function(t){l.classList.contains("foundation-field-mixed")&&(t=t.originalEvent.detail.item,t.value.startsWith("+")||l._removedValuesWhenMixed.push(t.value))});r.on("change foundation-field-change",function(t){t.target!==l&&t.stopImmediatePropagation()});this._button.addEventListener("click",function(t){t.preventDefault();l._togglePicker()});this._suggestion={el:null,open:!1,api:null};
this._value={el:null,api:null};this._picker={el:null,open:!1,loading:!1,api:null};this._removedValuesWhenMixed=[];this._setupValueObserver();r=this.attributes;for(var q=0;q<r.length;q++)this.attributeChangedCallback(r[q].name,void 0,r[q].value)};d.prototype._render=function(){for(var l=0;l<this.children.length;l++){var r=this.children[l];r.classList.contains("foundation-autocomplete-inputgroupwrapper")&&this.removeChild(r)}this._inputGroup=h.createElement("div");this._inputGroup.classList.add("coral-InputGroup");
this._inputGroup.setAttribute("role","presentation");this._input=new f.Textfield;this._input.classList.add("coral-InputGroup-input");this._input.autocomplete="off";this._input.placeholder=this.placeholder;this._input.labelledBy=this.labelledBy;this._input.setAttribute("role","combobox");this._input.setAttribute("aria-expanded",!1);this.droppable&&this._input.classList.add("foundation-autocomplete-droppable");l=h.createElement("span");l.classList.add("coral-InputGroup-button");this._button=(new f.Button).set({icon:"FolderOpenOutline",
title:this.labelled,type:"button"});this._button.setAttribute("aria-label",this.labelled);l.appendChild(this._button);this._inputGroup.appendChild(this._input);this._inputGroup.appendChild(l);this._inputGroupWrapper=h.createElement("div");this._inputGroupWrapper.classList.add("foundation-autocomplete-inputgroupwrapper");this._inputGroupWrapper.appendChild(this._inputGroup);this.insertBefore(this._inputGroupWrapper,this.firstChild);this._onVariantChange()};d.prototype.attributeChangedCallback=function(l,
r,k){if("pickersrc"===l)this._picker.el=null;else if("variant"===l)this._onVariantChange();else if("name"===l)this._getValueAPI(function(y){y.setName(k)});else if("placeholder"===l)this._input.setAttribute("placeholder",k),this._input.setAttribute("aria-label",k);else if("labelledby"===l)this._input.setAttribute("labelledby",k);else if("labelled"===l)this._button.setAttribute("aria-label",k);else if("disabled"===l){var q=null!==k;this._input.disabled=q;this._button.disabled=q;this._getValueAPI(function(y){y.setDisabled(q)})}else if("readonly"===
l){var t=null!==k;this._input.readOnly=t;this._button.disabled=t;this._getValueAPI(function(y){y.setReadOnly(t)})}else"invalid"===l?this._input.invalid=null!==k:"required"===l&&this._input.setAttribute("aria-required",null!==k)};d.prototype.focus=function(){requestAnimationFrame(function(){this._input.focus()}.bind(this))};d.prototype.clear=function(){this.values=[];this._input&&requestAnimationFrame(function(){this._input.value=""}.bind(this))};d.prototype._setupValueObserver=function(){var l=this,
r=[this._handleInputSize(),this._handleSingleSelectionMode()],k=function(){l._getValueAPI(function(){r.forEach(function(q){q.perform.call(l)})})};k();(new MutationObserver(function(q){q.forEach(function(t){a(t.addedNodes).filter("[foundation-autocomplete-value]").each(function(){k()})})})).observe(this,{childList:!0})};d.prototype._handleInputSize=function(){var l=function(k){var q=a(this._input);this.multiple&&"inline"===this.valueDisplayMode?k?(k=a(k).outerWidth(!0),q.css("padding-left",k)):q.css("padding-left",
""):q.css("padding-left","")}.bind(this),r=function(k){l(this)};return{perform:function(){f.commons.addResizeListener(this._value.el,r)},destroy:function(){l();f.commons.removeResizeListener(this._value.el,r)}}};d.prototype._handleSingleSelectionMode=function(){var l=function(){var k=this._value.el.items.getAll()[0];k&&(this._input.value=k.value)}.bind(this),r;return{perform:function(){this.multiple||requestAnimationFrame(function(){l()});r=new MutationObserver(function(k){this.multiple||k.forEach(function(q){a(q.addedNodes).filter("coral-tag").length&&
l()})}.bind(this));r.observe(this._value.el,{childList:!0})},destroy:function(){r.disconnect()}}};d.prototype._onVariantChange=function(){"omnisearch"===this.variant?(this._input.variant="quiet",this._button.variant="quiet",this._inputGroup.classList.add("coral-InputGroup--quiet")):(this._input.variant=f.Textfield.variant.DEFAULT,this._button.variant=f.Button.variant.DEFAULT,this._inputGroup.classList.remove("coral-InputGroup--quiet"))};d.prototype._onUserInput=function(){var l=this;this.multiple||
this._appendValue(this._input.value,!0);var r=function(k){l._input.value=k};this._getSuggestionAPI(function(k){var q=this._getValueAPI(function(t){return t.getValues()},function(){return[]});k.pick(l,q,l._input.value,r).then(function(t){l._suggestion.open=!1;l._input.value="";l._input.focus();l._setSelections(t)},function(){l._suggestion.open=!1});l._suggestion.open=!0})};d.prototype._onValueChangeByUser=function(l){var r=this;l?this._deferChangeEvent||(this._deferChangeEvent=!0,a(this._input).on("focusout",
function t(q){a(r._input).off("focusout",t);r._deferChangeEvent=null;q.relatedTarget&&r.contains(q.relatedTarget)&&q.relatedTarget.hasAttribute("coral-list-item")||(r._validate(),r._triggerChangeEvent())})):(this._triggerChangeEvent(),this._validate())};d.prototype._triggerChangeEvent=function(){var l=h.createEvent("HTMLEvents");l.initEvent("change",!0,!1);this.dispatchEvent(l);a(this).trigger("foundation-field-change")};d.prototype._getSuggestionAPI=function(l,r){if(!this._suggestion.api){var k=
a(this).children("[foundation-autocomplete-suggestion]").first();if(!k.length){if(r)return r.call(this);return}this._suggestion.el=k[0];this._suggestion.api=k.adaptTo("foundation-picker")}return l.call(this,this._suggestion.api)};d.prototype._getValueAPI=function(l,r){if(!this._value.api){var k=a(this).children("[foundation-autocomplete-value]").first();if(!k.length){if(r)return r.call(this);return}this._value.el=k[0];this._value.api=g(k[0])}return l.call(this,this._value.api)};d.prototype._focus=
function(l,r){"focus"in l.api?l.api.focus(r):l.el.focus()};d.prototype._validate=function(){var l=a(this).adaptTo("foundation-validation");l&&(l.checkValidity(),l.updateUI())};d.prototype._setSelections=function(l,r){var k=this;k._getValueAPI(function(q){k.multiple?k.classList.contains("foundation-field-mixed")?q.appendValues(l.map(function(t){var y=k._removedValuesWhenMixed.indexOf(t.value);0<=y?k._removedValuesWhenMixed.splice(y,1):t.value="+"+t.value;return t})):q.appendValues(l):l.length?q.setValues([l[0]]):
q.setValues([]);k._onValueChangeByUser(r)})};d.prototype._cancelSuggestion=function(){var l=this;l._suggestion.open&&this._getSuggestionAPI(function(r){r.cancel();l._suggestion.open=!1})};d.prototype._appendValue=function(l,r){var k=this;if(!this.multiple&&0===l.length)return this._setSelections([],r),a.when();var q=a.Deferred();this._getSuggestionAPI(function(t){t.resolve([l]).then(function(y){null!==y[0]?(k._setSelections(y,r),q.resolve()):k.forceSelection||(k._setSelections([{value:l,text:l,isUserDefined:!0}],
r),q.resolve())})},function(){if(k.forceSelection)return q.reject();k._setSelections([{value:l,text:l,isUserDefined:!0}],r);q.resolve()});return q.promise()};d.prototype._resolvePickerSrc=function(){var l=this._getValueAPI(function(k){return k.getValues()},function(){return[]}),r={value:""};0<l.length&&(r.value=l[l.length-1].value);this._resolvedPickerSrc=b.expand(this.pickerSrc,r)};d.prototype._loadAndShowPicker=function(){var l=this;this._picker.loading=!0;this._resolvePickerSrc();e(this._resolvedPickerSrc).then(function(r){l._picker.loading=
!1;l._picker.el=r;l._picker.api=a(r).adaptTo("foundation-picker");l._showPicker()},function(){l._picker.loading=!1})};d.prototype._togglePicker=function(){this._picker.loading||(this._picker.el?this._picker.open?(this._picker.api.cancel(),this._onCancelPicker()):this._loadAndShowPicker():this._loadAndShowPicker())};d.prototype._showPicker=function(){var l=this,r=this._picker.api;r.attach(this);var k=this._getValueAPI(function(q){return q.getValues()},function(){return[]});r.pick(this,k,this._input.value).then(function(q){l._picker.api.detach();
l._picker.open=!1;l._input.setAttribute("aria-expanded",!1);l._input.focus();l._setSelections(q)},function(){l._onCancelPicker()});this._focus(this._picker);this._picker.open=!0;this._input.setAttribute("aria-expanded",!0)};d.prototype._onCancelPicker=function(){this._picker.api.detach();this._picker.open=!1;this._input.setAttribute("aria-expanded",!1);this._input.focus()};d.observedAttributes="pickersrc variant name placeholder labelledby labelled disabled readonly invalid required".split(" ");n.customElements.define("foundation-autocomplete",
d);p=a(n).adaptTo("foundation-registry");p.register("foundation.adapters",{type:"foundation-overlay-anchor",selector:"foundation-autocomplete",adapter:function(l){return{getElement:function(){return l._inputGroupWrapper}}}});p.register("foundation.validation.selector",{submittable:"foundation-autocomplete",candidate:"foundation-autocomplete:not([readonly]):not([disabled])",exclusion:"foundation-autocomplete *"});p.register("foundation.validation.validator",{selector:"foundation-autocomplete",validate:function(l){if(l.required&&
(l.multiple&&0===l.values.length||!l.multiple&&0===l.value.length))return c.I18n.get("Please fill out this field.")}});p.register("foundation.adapters",{type:"foundation-field",selector:"foundation-autocomplete",adapter:function(l){var r=a(l);return{getName:function(){return l.name},setName:function(k){r.children(".foundation-field-related").each(function(){this.name.startsWith(l.name+"@")&&(this.name=k+this.name.substring(l.name.length))});l.name=k},isDisabled:function(){return l.disabled},setDisabled:function(k){l.disabled=
k;r.children(".foundation-field-related:not(.foundation-field-mixed-patchcontrol)").prop("disabled",k)},isInvalid:function(){return l.invalid},setInvalid:function(k){l.invalid=k},isRequired:function(){return l.required},setRequired:function(k){l.required=k},getValue:function(){return l.value},setValue:function(k){l.value=k},getLabelledBy:function(){return l.labelledBy},setLabelledBy:function(k){l.labelledBy=k},getLabelled:function(){return l.labelled},setLabelled:function(k){l.labelled=k},getValues:function(){return l.values},
setValues:function(k){l.values=k},clear:function(){l.clear()}}}});p.register("foundation.form.submit",{selector:"*",handler:function(l){var r=[];a(l).find("foundation-autocomplete.foundation-field-mixed").each(function(){var k=this;k._removedValuesWhenMixed.forEach(function(q){var t=h.createElement("input");t.type="hidden";t.name=k.name;t.value="-"+q;k.appendChild(t);r.push(function(){k.removeChild(t)})});r.push(function(){k._removedValuesWhenMixed=[]})});return{post:function(){r.forEach(function(k){k()});
return a.when()}}}})})(window,document,Granite.$,Coral,Granite,Granite.URITemplate);(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.form.submit",{selector:"*",handler:function(a){var f=h(a).find("coral-datepicker \x3e input[type\x3d'hidden']");a={post:function(){f.each(function(){this.name.endsWith("@Delete")&&(this.name=this.name.substr(0,this.name.lastIndexOf("@Delete")))})}};a.post();f.each(function(){""===this.value&&(this.name+="@Delete")});return a}})})(window,Granite.$);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-collection",selector:".foundation-collection",adapter:function(a){var f=h(a);return{append:function(c){f.append(c);f.trigger("foundation-contentloaded")},clear:function(){f.find(".foundation-collection-item").remove()}}}})})(window,Granite.$);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-selections",selector:".foundation-collection",adapter:function(a){var f=h(a);return{count:function(){return f.find(".foundation-selections-item").length},selectAll:function(c){var b=f.find(".foundation-collection-item:not(.foundation-selections-item)").addClass("foundation-selections-item").length;!c&&b&&f.trigger("foundation-selections-change")},clear:function(c){var b=f.find(".foundation-selections-item").removeClass("foundation-selections-item").length;
!c&&b&&f.trigger("foundation-selections-change")},select:function(c){c=h(c);c.is(".foundation-collection-item")&&(c.toggleClass("foundation-selections-item",!0),f.trigger("foundation-selections-change"))},deselect:function(c){c=h(c);c.is(".foundation-collection-item")&&(c.toggleClass("foundation-selections-item",!1),f.trigger("foundation-selections-change"))},isAllSelected:function(){var c=f.find(".foundation-collection-item").length;return 0<c?c===this.count():!1}}}})})(window,Granite.$);
(function(n,h,a){a(h).on("foundation-selections-change",".foundation-collection[role\x3dlistbox]",function(f){var c=a(this);c.find(".foundation-collection-item").each(function(){var b=a(this),d=b.is(".foundation-selections-item");b.attr("aria-selected",d);c.hasClass("aria-skiphandling")||(b=b.find("input.aria-value[type\x3dhidden]"),b.prop("disabled",!d),(d=c.data("aria-name"))&&!b.prop("name")&&b.prop("name",d),b.length&&n.console&&console.log("@deprecated .aria-value, [data-aria-name]; please use .foundation-advancedselect instead."))});
if(f=c.adaptTo("foundation-validation"))f.checkValidity(),f.updateUI()})})(window,document,Granite.$);
(function(n,h,a){function f(k,q){q?k.removeClass("foundation-collection-action-hidden"):k.addClass("foundation-collection-action-hidden")}function c(k,q){return 0===q&&0===k||0<q&&"\x3e0"===k?!0:!1}function b(k,q){return 0===q&&"none"===k||1===q&&"single"===k||1<=q&&("multiple"===k||"bulk"===k)?!0:!1}function d(k,q,t,y){if("none"===y)return!0;if("item"===y)return q=t.toArray().map(function(u){u=h(u).find(".foundation-collection-quickactions").data("foundationCollectionQuickactionsRel")||"";u=u.trim();
return u.length?u.split(/\s+/):[]}),q.every(function(u){return 0===u.length})?!0:q.every(function(u){return!u.every(function(w){return!k.hasClass(w)})});q=q.adaptTo("foundation-collection-meta");if(!q)return!0;q=q.getRelationship()||"";q=q.trim();q=q.length?q.split(/\s+/):[];return 0===q.length?!0:q.some(function(u){return k.hasClass(u)})}function e(k,q,t,y,u){var w=!0;"activeCount"in q&&(w=c(q.activeCount,y.length));w&&"activeSelectionCount"in q&&(w=b(q.activeSelectionCount,u.length));w&&"activeCondition"in
q&&a.UI.Foundation.Utils.everyReverse(r.get("foundation.collection.action.activecondition"),function(A){if(A.name!==q.activeCondition)return!0;A=A.handler.call(k[0],A.name,k[0],q,t[0],u.toArray());return!1===A||!0===A?(w=A,!1):!0});w&&(w=d(k,t,u,q.ignoreRel?"none":q.relScope||"item"));return w}function g(k,q){q=q.target;q||(k=k.closest(".foundation-collection-actionbar"),k.length&&(q=k[0].dataset.foundationCollectionActionbarTarget));return q}function m(k){k=h(k);var q=k.adaptTo("foundation-collection");
return q.isAllLoaded?q.isAllLoaded():(q=q.getPagination())?0<k.find(".foundation-collection-item").find(".is-lazyloaded, .is-pending").length?!1:!1===q.hasNext:!0}function p(k){var q=h(k),t=q.adaptTo("foundation-collection").getPagination(),y=q.adaptTo("foundation-selections").count();if(!t||-1===t.guessTotal||m(k))return y;if(-1!==t.guessTotal)return(t=h("granite-pagingstatus").get().find(function(u){if(k.matches(u.dataset.graniteCollectionPagingstatusTarget))return!0}))?parseInt(t.getAttribute("current")||
y,10):q.find(".foundation-selections-item:not(.is-lazyLoaded):not(.is-pending)").length}var l=new WeakMap,r=h(window).adaptTo("foundation-registry");n.addEventListener("click",function(k){var q=h(k.target).closest(".foundation-collection-action:not(.foundation-collection-item .foundation-collection-action)");if(0!==q.length){var t=q.data("foundationCollectionAction")||{},y=g(q,t);y&&(y=a.UI.Foundation.XSS.sanitizeHtml(y),y=h(y)[0],l.has(q[0])&&l.get(q[0])||"true"!==y.dataset.foundationSelectionsSelectallMode||
"bulk"===t.activeSelectionCount||m(y)||(k.stopImmediatePropagation(),k=h(window).adaptTo("foundation-ui"),t=a.I18n.get("Bulk Action Not Supported"),y=a.I18n.get("The selected action \x3cb\x3e{0}\x3c/b\x3e will only have effect on the \x3cb\x3e{1}\x3c/b\x3e selected items currently loaded.\x3cbr/\x3eIf you wish to apply it to non-loaded items, please make sure they are explicitly selected.",[q.text(),p(y)]),k.prompt(t,y,"warning",[{id:"cancel",text:a.I18n.get("Cancel")},{id:"continue",text:a.I18n.get("Continue"),
primary:!0,handler:function(){l.set(q[0],!0);q[0].click()}}])))}},!0);h(n).on("foundation-contentloaded",function(k){var q=new Map;h(".foundation-collection-action:not(.foundation-collection-item .foundation-collection-action)",k.target).each(function(){var t=h(this),y=t.data("foundationCollectionAction")||{},u=g(t,y);if(u){if(q.has(u)){u=q.get(u);var w=u.collection;var A=u.items;var x=u.selections}else w=a.UI.Foundation.XSS.sanitizeHtml(u),w=h(w),A=w.find(".foundation-collection-item"),x=A.filter(".foundation-selections-item"),
q.set(u,{collection:w,items:A,selections:x});w.length&&f(t,e(t,y,w,A,x))}})});h(n).on("foundation-selections-change",".foundation-collection",function(k){var q=h(this),t,y;h(".foundation-collection-action:not(.foundation-collection-item .foundation-collection-action)").each(function(){var u=h(this),w=u.data("foundationCollectionAction")||{},A=g(u,w);A&&q.is(A)&&(t||(t=q.find(".foundation-collection-item"),y=t.filter(".foundation-selections-item")),f(u,e(u,w,q,t,y)))})});h(n).on("click",".foundation-collection-action",
function(k){l.delete(this);var q=h(this),t=q.data("foundationCollectionAction");if(t&&t.action){var y=h(),u=[],w=q.data("foundationCollectionItem");w?(y=h(w).closest(".foundation-collection"),u=[w]):t.target?(w=a.UI.Foundation.XSS.sanitizeHtml(t.target),y=h(w),u=y.find(".foundation-selections-item").toArray()):(w=q.closest(".foundation-collection-item, .foundation-collection-actionbar"),w.hasClass("foundation-collection-actionbar")?(y=h(w[0].dataset.foundationCollectionActionbarTarget),u=y.find(".foundation-selections-item").toArray()):
w.hasClass("foundation-collection-item")&&(y=w.closest(".foundation-collection"),u=w.toArray()));a.UI.Foundation.Utils.everyReverse(r.get("foundation.collection.action.action"),function(A){if(A.name!==t.action)return!0;(A=!1===A.handler.call(q[0],A.name,q[0],t,y[0],u))||k.preventDefault();return A})}})})(document,Granite.$,Granite);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.collection.action.action",{name:"foundation.link",handler:function(f,c,b,d,e){f=a.expand(b.data.href,{id:d.dataset.foundationCollectionId,item:e.map(function(g){return g.dataset.foundationCollectionItemId})});"null"!==(new URL(f,document.baseURI)).origin&&(b.data.target?n.open(f,b.data.target):n.location=f)}})})(window,Granite.$,Granite.URITemplate);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.collection.action.action",{name:"foundation.pushstate",handler:function(f,c,b,d,e){if(f=h(".foundation-content").adaptTo("foundation-content"))e=e.map(function(g){return h(g).data("foundation-collection-item-id")}),e=a.expand(b.data.href,{item:e}),Granite.Toggles.isEnabled("FT_GRANITE-46844")?f.pushState(b.data.data,b.data.title,e,!0):f.pushState(b.data.data,b.data.title,e)}})})(window,Granite.$,Granite.URITemplate);
(function(n,h,a,f){function c(e,g,m){if(g)return(b.has(g)?a.Deferred().resolve(b.get(g)).promise():a.ajax({url:g,cache:!1})).then(function(p){var l=a(p).on("foundation-toggleable-hide",function(r){var k=a(r.target);requestAnimationFrame(function(){k.detach()})}).appendTo(h.body).trigger("foundation-contentloaded");b.set(g,p);return l});e=m?a(m):e.closest(".foundation-toggleable");return a.Deferred().resolve(e).promise()}var b=new Map,d="."+Date.now();a(n).adaptTo("foundation-registry").register("foundation.collection.action.action",
{name:"foundation.dialog",handler:function(e,g,m,p,l){var r=a(g);e=m.data.target;var k=m.data.nesting,q;m.data.src&&(q=f.expand(m.data.src,{id:p.dataset.foundationCollectionId,item:l.map(function(t){return t.dataset.foundationCollectionItemId})}));c(r,q,e).then(function(t){var y=t.adaptTo("foundation-toggleable");t.off(d).one("foundation-form-submitted"+d,function(u,w,A){w&&(y.hide(),u=a(p).adaptTo("foundation-collection"),"reload"in u&&u.reload())});requestAnimationFrame(function(){if("hide"===k){var u=
r.closest(".foundation-toggleable").adaptTo("foundation-toggleable");u&&u.hide()}y.show(g)})})}})})(window,document,Granite.$,Granite.URITemplate);(function(n,h){h(n).on("click",".foundation-collection-item-activator",function(a){a=h(this).closest(".foundation-collection-item");a.closest(".foundation-collection").adaptTo("foundation-selections").select(a[0])})})(document,Granite.$);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-collection-item-action",selector:".foundation-collection",adapter:function(a){var f=h(a);return{execute:function(c){var b;if(b=c.classList.contains("foundation-collection-navigator")?c:c.querySelector(".foundation-collection-navigator")){var d=b.dataset.foundationCollectionNavigatorHref,e=b.dataset.foundationCollectionNavigatorTarget||"_self";d?(b.dataset.foundationTrackingPage&&(c=JSON.parse(b.dataset.foundationTrackingPage),
h(n).adaptTo("foundation-tracker").trackPage(c)),setTimeout(function(){n.open(d,e)},0)):f.adaptTo("foundation-collection").load(c.dataset.foundationCollectionItemId)}}}}})})(window,Granite.$);
(function(n,h){h(n).on("foundation-selections-change",".foundation-collection-masterdetail",function(a){var f=h(this);a=h(Granite.UI.Foundation.XSS.sanitizeHtml(this.dataset.foundationCollectionMasterdetailTarget));a.length&&(f=f.find(".foundation-selections-item").first(),f.length&&a.adaptTo("foundation-collection").load(f[0].dataset.foundationCollectionItemId))})})(document,Granite.$);
(function(n,h,a,f){h(n).on("foundation-selections-change",".foundation-collection-previewsupport",function(c){var b=this.dataset.foundationCollectionPreviewsupportTarget,d=this.dataset.foundationCollectionPreviewsupportSrc;c="child"===this.dataset.foundationCollectionPreviewsupportCollection?h(this).children(".foundation-collection"):h(c.target);var e=h(b);if(e.length){var g=c.find(".foundation-selections-item");b=a.expand(d,{item:g.toArray().map(function(p){return p.dataset.foundationCollectionItemId})});
var m=h(window).adaptTo("foundation-ui");m.wait(e[0]);h.ajax({url:b,cache:!1}).then(function(p){return h(window).adaptTo("foundation-util-htmlparser").parse(p).then(function(l){m.clearWait();e.empty().append(l).trigger("foundation-contentloaded")})},function(p,l,r){m.clearWait();if(g.length||"error"!==l||"Not Found"!==r)p=f.I18n.get("Error"),l=f.I18n.get("Fail to load data."),m.alert(p,l,"error")})}})})(document,Granite.$,Granite.URITemplate,Granite);
(function(n,h){h(n).on("click",".foundation-collection-selectall",function(a){if(a=this.dataset.foundationCollectionSelectallTarget)if(a=n.querySelector(a)){var f=h(a).adaptTo("foundation-selections");a.matches("coral-masonry.foundation-collection")&&a.setAttribute("selectionmode","multiple");a.dataset.foundationSelectionsSelectallMode=!0;f.selectAll()}});h(n).on("foundation-selections-change",".foundation-collection",function(a){var f=this,c=h(f),b="single"===f.dataset.foundationSelectionsMode;Array.from(n.querySelectorAll(".foundation-collection-selectall")).forEach(function(d){if(f.matches(d.dataset.foundationCollectionSelectallTarget)){var e=
f.tagName;b?d.hidden=!0:f.querySelector(".foundation-collection-item")?"CORAL-MASONRY"!==e&&"TABLE"!==e||f.querySelector(".foundation-collection-item [coral-table-rowselect],.foundation-collection-item .foundation-collection-item-activator")?(e=c.adaptTo("foundation-selections"),d.hidden=e.isAllSelected(),0===e.count()&&delete f.dataset.foundationSelectionsSelectallMode):d.hidden=!0:d.hidden=!0}})})})(document,Granite.$);
(function(n,h,a,f,c){function b(l,r,k,q,t,y,u){for(var w=k,A=null,x=null;0<=k&&k<r.length;k+=q){var L=r[k],H=l,T=L,D=y;if(!H._isItemAbove(H,T,t)&&!H._isItemBelow(H,T,D))w=k;else if(Math.abs(k-w)>u)break;L.classList.contains("is-lazyLoaded")&&(x=k,A=A||k)}return{first:A,last:x}}function d(l,r){var k=p(r).filter(".is-lazyLoaded,.is-pending").each(function(){this.classList.contains("is-lazyLoaded")&&(this.classList.add("is-pending"),this.classList.remove("is-lazyLoaded"))}).toArray(),q=Infinity,t=-1,
y=[];k.forEach(function(u){u=parseInt(u.dataset.datasourceIndex,10);-1!==t&&60<u-q&&(y.push(e(l,k,q,t)),q=Infinity,t=-1);t=t>u?t:u;q=q<u?q:u});-1!==t&&y.push(e(l,k,q,t));return p.when.apply(null,y).then(function(){var u=[];Array.prototype.forEach.call(arguments,function(w){w.forEach(function(A){u.push(A)})});return p.uniqueSort(u)})}function e(l,r,k,q){return l._load(l,{offset:k,limit:q-k+1,size:q-k+1}).then(function(t){var y=[];t.forEach(function(u){if(!u.classList.contains("is-lazyLoaded")){var w=
u.dataset.graniteCollectionItemId,A=r.find(function(x){return x.dataset.graniteCollectionItemId===w});A&&(A.showRemoveTransition=!1,A.classList.remove("is-pending"),A.replaceWith(u),y.push(u))}});return y})}function g(l,r,k,q){for(var t=Infinity,y=-1,u=[];k<=q;k++){var w=r[k];w.classList.contains("is-lazyLoaded")&&(w.classList.add("is-pending"),w.classList.remove("is-lazyLoaded"),u.push(w),w=parseInt(w.dataset.datasourceIndex,10),y=y>w?y:w,t=t<w?t:w)}e(l,u,t,y).then(function(){l._onReplace(l)})}function m(l){this.scrollSrc=
l.scrollSrc;this._getItems=l.getItems;this._load=l.load;this._onReplace=l.onReplace||p.noop;this._isItemAbove=l.isItemAbove||function(r,k,q){return k.offsetTop+k.offsetHeight<q};this._isItemBelow=l.isItemBelow||function(r,k,q){return k.offsetTop>q};this._setupListeners=l.setupListeners||p.noop;this._stack=[]}var p=f;m.prototype.start=function(){if(this._destroyed)throw Error("Illegal state: this class is already destroyed");var l=this,r=a.UI.Foundation.Utils.debounce(function(){if(h.body.contains(l.scrollSrc)){var k=
l._getItems(l);if(0!==p(k).filter(".is-lazyLoaded").length){var q=l.scrollSrc.scrollTop,t=q+l.scrollSrc.clientHeight;b:{var y=0;var u=k.length-1;for(var w=Math.floor((y+u)/2);y<u;w=Math.floor((y+u)/2)){var A=k[w],x=l,L=A,H=t;if(!x._isItemAbove(x,L,q)&&!x._isItemBelow(x,L,H)){u=w;break b}l._isItemAbove(l,A,q)?y=w:u=w}}y=b(l,k,u,-1,q,t,10);t=b(l,k,u,1,q,t,10);q=null!==y.last?y.last:t.first;t=null!==t.last?t.last:y.first;null!==q&&null!==t&&g(l,k,q,t)}}},200);this.scrollSrc.addEventListener("scroll",
r);this._stack.push(function(){l.scrollSrc.removeEventListener("scroll",r)});n.addEventListener("resize",r);this._stack.push(function(){n.removeEventListener("resize",r)});this._stack.push(this._setupListeners(this,r));r()};m.prototype.destroy=function(){this._destroyed=!0;a.UI.Foundation.Utils.everyReverse(this._stack,function(l){l();return!0})};m.prototype.loadItems=function(l){return d(this,l)};p(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-collection-lazyloader",
selector:p(n),adapter:function(){return m}})})(window,document,Granite,Granite.$,Granite.URITemplate);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-toggleable",selector:".foundation-toggleable",adapter:function(a){var f=h(a);return{isOpen:function(){return void 0===f.attr("hidden")},show:function(c){f.removeAttr("hidden");f.trigger("foundation-toggleable-show")},hide:function(){f.attr("hidden","");f.trigger("foundation-toggleable-hide")}}}})})(window,Granite.$);
(function(n,h){function a(c){var b=c.data("foundationToggleableControlSrc"),d=c.data("foundationToggleableControlTarget"),e="false"!==c.attr("data-foundation-toggleable-control-cache");if(b)return e&&f.has(b)?(c=f.get(b),c.appendTo(n.body),h.Deferred().resolve(c).promise()):h.ajax({url:b,cache:!1}).then(function(g){g=Granite.UI.Foundation.XSS.sanitizeHtml(g);g=h(g).on("foundation-toggleable-hide",function(m){var p=h(m.target);requestAnimationFrame(function(){p.detach()})}).appendTo(n.body).trigger("foundation-contentloaded");
f.set(b,g);return g});c=d?h(d):c.closest(".foundation-toggleable");return h.Deferred().resolve(c).promise()}var f=new Map;h(n).on("click",".foundation-toggleable-control",function(c){c.preventDefault();var b=h(this);b.hasClass("is-selected")?b.attr("aria-expanded",!1):b.attr("aria-expanded",!0);a(b).then(function(d){var e=d.adaptTo("foundation-toggleable"),g=b.data("foundationToggleableControlAction");requestAnimationFrame(function(){void 0===g&&(g=e.isOpen()?"hide":"show");var m=g,p=b[0].getAttribute("data-foundation-tracking-event");
p&&(p=JSON.parse(p),m={element:p.element||"No element defined",feature:p.feature||"No feature defined",type:"toggleable",action:m,widget:{name:p.element||"No widget defined",type:"toggleable"},attributes:{}},h(window).adaptTo("foundation-tracker").trackEvent(m));"show"===g?("hide"===b.data("foundationToggleableControlNesting")&&(p=b.closest(".foundation-toggleable"),m=p.adaptTo("foundation-toggleable"))&&((p=p[0].elementToFocusWhenHidden||p[0].returnFocusToElement)&&d[0].returnFocusTo(p),m.hide()),
e.show(b[0])):"hide"===g&&e.hide()})})});h(window).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-tracking-event",selector:".foundation-toggleable-control[data-foundation-tracking-event]",adapter:function(c){return{track:function(b){}}}})})(document,Granite.$);
(function(n,h){h(n).on("click",".foundation-mode-change",function(a){a.preventDefault();a=h(this);var f=a.data("foundationModeValue"),c=a.data("foundationModeGroup");a.trigger("foundation-mode-change",[f,c])})})(document,Granite.$);
(function(n,h,a){var f=null;h(n).on("foundation-mode-change",function(c,b,d){h(".foundation-mode-switcher").each(function(){var e=h(this);e.data("foundationModeSwitcherGroup")===d&&(f&&(clearTimeout(f),f=null),e.children(".foundation-mode-switcher-item").each(function(){var g=h(this),m=g.data("foundationModeSwitcherItemMode");g.toggleClass("foundation-mode-switcher-item-active",m===b);var p=g.find(".foundation-mode-switcher-item-liveregion").attr("role","status");p.length||(p=h("\x3cdiv\x3e\x3c/div\x3e").addClass("foundation-mode-switcher-item-liveregion u-coral-screenReaderOnly").attr("role",
"status"),g.append(p));g.find(".foundation-admin-selectionstatus").attr("aria-live","polite");m===b?(p.removeAttr("aria-hidden"),f=setTimeout(function(){p.html(g.find("coral-actionbar[aria-label]").attr("aria-label")+" "+a.I18n.get("expanded"))},200)):p.attr("aria-hidden","true").empty()}))})})})(document,Granite.$,Granite);
(function(n,h,a){function f(m){m=d.normalize(m.toLowerCase());var p=g.get(m);if(p){var l;p=p.reduce(function(r,k){(l=a(k).adaptTo("foundation-command"))&&l.isActive()&&r.push(l);return r},[]);1===p.length?p[0].execute():1<p.length&&console.warn("Multiple shortcuts detected and ignored: "+m)}}function c(m){(m.matchedTarget.offsetParent||m.target===h.body)&&f(m.keys)}function b(m){a("[data-foundation-command]",m).each(function(p,l){if(p=a(l).adaptTo("foundation-command")){var r=d.normalize(p.getShortcut());
if(r)if(-1!==e.indexOf(r))console.warn("Shortcut is a reserved and ignored: "+p.getShortcut());else{var k=g.get(r),q=!0;"undefined"===typeof k?(g.set(r,[l]),Coral.keys.on(r,c)):-1===k.indexOf(l)?k.push(l):q=!1;q&&p.enhanceUI()}}})}n=a(n);var d=n.adaptTo("foundation-util-keyboard");n=n.adaptTo("foundation-preference");var e=["/","esc"],g=new Map;if(n.getBoolean("shortcutsEnabled",!0))a(h).on("foundation-contentloaded",function(m){g.forEach(function(p,l){for(var r=p.length-1;-1<r;r--)h.contains(p[r])||
p.splice(r,1);0===p.length&&(g.delete(l),Coral.keys.off(l,c))});b(m.target)})})(window,document,Granite.$);
(function(n,h,a){function f(b){c.prompt(Granite.I18n.get("Unsaved changes"),Granite.I18n.get("You have unsaved changes! Are you are sure you want to close the page?"),"warning",[{text:Granite.I18n.get("Cancel")},{text:Granite.I18n.get("Yes"),primary:!0,handler:function(){n.location=b.getAttribute("href")}}])}var c=a(n).adaptTo("foundation-ui");a(h).on("click",".foundation-anchor",function(b){b.preventDefault();b=this.dataset.foundationAnchorHref;var d=this.dataset.foundationAnchorTarget;"null"!==
(new URL(b,h.baseURI)).origin&&(d?n.open(b,d):n.location=b)});a(h).on("click",".foundation-backanchor",function(b){var d=this,e=d.dataset.foundationBackanchorForm;e?(e=a("#"+e).adaptTo("foundation-form"))&&e.isDirty()&&(b.preventDefault(),f(d)):a("form.foundation-form").each(function(){if(a(this).adaptTo("foundation-form").isDirty())return b.preventDefault(),f(d),!1})})})(window,document,Granite.$);
(function(n,h,a){function f(){if(!b&&(b=new Map,n===n.parent))try{for(var e=[],g=0,m=sessionStorage.length;g<m;g++){var p=sessionStorage.key(g);if(p&&p.startsWith("foundation-fixedanchor::")){var l=JSON.parse(sessionStorage.getItem(p));l.url===c&&b.set(l.id,l);e.push(p)}}e.forEach(function(r){sessionStorage.removeItem(r)})}catch(r){n.console&&console.warn("Error occur restoring foundation-fixedanchor state",r)}}var c=n.location.href,b,d=new WeakMap;a(h).on("foundation-contentloaded",function(e){f();
a(".foundation-fixedanchor",e.target).each(function(){var g=a(this);if(!d.has(this)){d.set(this,!0);var m=g.prop("id");if(m){var p=g[0].dataset.foundationFixedanchorAttr||"href";if(b.has(m)){var l=b.get(m);g.attr(p,l.href)}try{sessionStorage.setItem("foundation-fixedanchor::"+m,JSON.stringify({url:c,id:m,href:g.attr(p)}))}catch(r){n.console&&console.warn("Error occur saving foundation-fixedanchor state",r)}}}})})})(window,document,Granite.$);
(function(n,h){var a=h(n).adaptTo("foundation-registry");a.register("foundation.adapters",{type:"foundation-editable",selector:".foundation-editable",adapter:function(f){var c=h(f);return{edit:function(){var b;Granite.UI.Foundation.Utils.everyReverse(a.get("foundation.editable.editor"),function(g){if(!c.is(g.selector))return!0;b=g.handler.call(c[0],c[0]);return!1});if(b){var d=c.position(),e=h(document.createElement("div")).css({position:"absolute",top:d.top,left:d.left,width:c.css("width")});e.append(b.el);
e.insertAfter(c);b.renderCallback();c.on("foundation-editable-commit foundation-editable-cancel",function(g){e.remove()})}}}}})})(window,Granite.$);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.editable.editor",{selector:".foundation-editable[data-foundation-editable-editor\x3d'foundation.text']",handler:function(f){var c=h(f),b=h(new a.Textfield).css({display:"block",width:"100%"}),d=function(){c.text(b.val());c.trigger("foundation-editable-commit")};b.on("blur",function(e){d()}).on("keydown",function(e){13===e.which?(e.preventDefault(),d()):27===e.which&&(e.preventDefault(),c.trigger("foundation-editable-cancel"))});
b.val(c.text());return{el:b[0],renderCallback:function(){b.focus()}}}})})(window,Granite.$,Coral);(function(n,h){function a(f){f.adaptTo("foundation-editable").edit()}h(n).on("click",".foundation-editable-control",function(f){f.preventDefault();a(h(this))});h(n).on("keydown",".foundation-editable-control",function(f){13===f.which&&(f.preventDefault(),a(h(this)))})})(document,Granite.$);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-wizard",selector:".foundation-wizard",adapter:function(a){var f=h(a);return{toggleNext:function(c){this.toggle("next",c)},togglePrev:function(c){this.toggle("prev",c)},toggleCancel:function(c){this.toggle("cancel",c)},toggle:function(c,b){var d=f.adaptTo("foundation-layout");d&&"function"===typeof d.toggle?d.toggle(c,b):f.children(".foundation-wizard-step.foundation-wizard-step-active").find(".foundation-wizard-control[data-foundation-wizard-control-action\x3d"+
c+"]").each(function(){h(this).is("button")?h(this).prop("disabled",!b):h(this).toggleClass("disabled",!b)})},next:function(){var c=f.adaptTo("foundation-layout");if(c&&"function"===typeof c.next)c.next();else{c=f.children(".foundation-wizard-step-active");var b=c.nextAll(".foundation-wizard-step").first();b.length&&(c.removeClass("foundation-wizard-step-active"),b.addClass("foundation-wizard-step-active"),f.trigger("foundation-wizard-stepchange",[b[0],c[0]]))}},prev:function(){var c=f.adaptTo("foundation-layout");
if(c&&"function"===typeof c.prev)c.prev();else{c=f.children(".foundation-wizard-step-active");var b=c.prevAll(".foundation-wizard-step").first();b.length&&(c.removeClass("foundation-wizard-step-active"),b.addClass("foundation-wizard-step-active"),f.trigger("foundation-wizard-stepchange",[b[0],c[0]]))}},append:function(c,b){var d=f.adaptTo("foundation-layout");d&&"function"===typeof d.append?d.append(c,b):void 0===b?f.append(c):(f.children(".foundation-wizard-step").eq(b).after(c),f.trigger("foundation-contentloaded"))},
appendAfter:function(c,b){var d=f.adaptTo("foundation-layout");d&&"function"===typeof d.appendAfter?d.appendAfter(c,b):(h(b).after(c),f.trigger("foundation-contentloaded"))},remove:function(c){var b=f.adaptTo("foundation-layout");b&&"function"===typeof b.remove?b.remove(c):h(c).remove()},getPrevSteps:function(c){var b=f.adaptTo("foundation-layout");return b&&"function"===typeof b.getPrevSteps?b.getPrevSteps(c):h(c).prevAll(".foundation-wizard-step").toArray()}}}})})(window,Granite.$);
(function(n,h){function a(c,b){c.closest(".foundation-wizard").adaptTo("foundation-wizard").toggleNext(b)}function f(c){var b=c.adaptTo("foundation-validation-helper").isValid();c.data("foundation-wizard-step.internal.valid",b);a(c,b)}h(n).on("foundation-validation-invalid",".foundation-wizard-step",function(c){var b=h(this);if(!1!==b.data("foundationWizardStepValidation")){a(b,!1);c=c.target;var d=b.data("foundation-wizard.internal.invalids");void 0===d&&(d=[],b.data("foundation-wizard.internal.invalids",
d));0>d.indexOf(c)&&d.push(c)}});h(n).on("foundation-validation-valid",".foundation-wizard-step",function(c){var b=h(this);if(!1!==b.data("foundationWizardStepValidation")){var d=b.data("foundation-wizard.internal.invalids");if(d)if(c=d.indexOf(c.target),0<=c&&d.splice(c,1),0===d.length)f(b);else{c=!1;for(var e=d.length;e--;){if(b.has(d[e]).length){c=!0;break}d.splice(e,1)}c||f(b)}else f(b)}})})(document,Granite.$);
(function(n,h,a){function f(c){var b={};c.find(":input").each(function(){var d=h(this);d.serializeArray().forEach(function(e){var g=e.name;e=e.value;if(b.hasOwnProperty(g)){var m=b[g];Array.isArray(m)||(m=[m]);m.push(e);e=m}b[g]=e;(e=d[0].dataset.foundationUritemplateParent)&&((b[e]=b[e]||{})[g]=b[g])})});return b}h(n).on("foundation-wizard-stepchange",function(c,b,d){var e=h(b);if(e.hasClass("foundation-wizard-lazycontainer")){var g=b.dataset.foundationWizardLazycontainerSrc;if(g&&(c=h(c.target).adaptTo("foundation-wizard"),
b=h(c.getPrevSteps(b)),!b.length||!d||b.is(d))&&(d=f(b),g=a.expand(g,d),e.data("foundation-wizard-lazycontainer.internal.lastURL")!==g)){e.data("foundation-wizard-lazycontainer.internal.lastURL",g);var m=h(window).adaptTo("foundation-ui");m.wait();h.ajax({url:g,cache:!1}).done(function(p){h(window).adaptTo("foundation-util-htmlparser").parse(p).then(function(l){m.clearWait();e.html("").append(l);e.trigger("foundation-contentloaded");e.adaptTo("foundation-validation-helper").getSubmittables().forEach(function(r){r=
h(r).adaptTo("foundation-validation");r.getValidity().isValidated()||r.checkValidity()})})}).fail(function(){m.clearWait();var p=Granite.I18n.get("Error"),l=Granite.I18n.get("Something went wrong.");m.alert(p,l,"error")})}}})})(document,Granite.$,Granite.URITemplate);
(function(n,h,a,f){function c(x,L){return L.done(function(){u.delete(x[0])}).done(d(x)).fail(e(x)).done(function(){x.trigger("foundation-form-submitted",[!0,L])}).fail(function(){x.trigger("foundation-form-submitted",[!1,L])})}function b(x,L){a.when.apply(null,L).done(function(){u.delete(x[0])}).done(function(){var H=x.data("foundationFormResponseUiSuccess")||x.children(".foundation-form-response-ui-success").data("foundationFormResponseUiSuccess");if(!H){var T=x.data("foundationFormOutputReplace"),
D=!1;T?D=!0:T=x.data("foundationFormOutputPush");if(!T)return;H={name:"foundation.content",redirect:x.data("foundationFormRedirect"),history:x.data("foundationFormHistory"),target:T,replace:D}}q(t.get("foundation.form.response.ui.success"),function(F){return F.name!==H.name?!0:!1===F.handler.call(x[0],x[0],H)})}).fail(e(x)).done(function(){}).fail(function(){})}function d(x){return function(L,H,T){var D=x.data("foundationFormResponseUiSuccess")||x.children(".foundation-form-response-ui-success").data("foundationFormResponseUiSuccess");
if(!D){var F=x.data("foundationFormOutputReplace"),J=!1;F?J=!0:F=x.data("foundationFormOutputPush");if(!F)return;D={name:"foundation.content",redirect:x.data("foundationFormRedirect"),history:x.data("foundationFormHistory"),target:F,replace:J}}var O=a(h).adaptTo("foundation-response-parser").parse(T),S=g(x,T,O)||L;a(x).adaptTo("foundation-form-handle-tracking").trackFormSubmit(x);q(t.get("foundation.form.response.ui.success"),function(P){return P.name!==D.name?!0:!1===P.handler.call(x[0],x[0],D,S,
H,T,O)})}}function e(x){return function(L,H,T){if("none"!==x.data("foundationFormUi")){var D=a(h).adaptTo("foundation-response-parser").parse(L),F=g(x,L,D);q(t.get("foundation.form.response.ui.error"),function(J){return!1===J.handler.call(x[0],x[0],F,L,H,T)})}}}function g(x,L,H){var T=L.getResponseHeader("content-type");if(!T)return L.responseText;var D;q(t.get("foundation.form.response.parser"),function(F){if(!x.is(F.selector)||!T.match(F.contentType))return!0;F=F.handler.call(x[0],x[0],L,H);if(!1===
F)return!0;D=F;return!1});return D}function m(x){if(!0===x.data("foundationFormLoadingmask")){var L=a(),H=x.data("foundationFormOutputReplace")||x.data("foundationFormOutputPush");H&&(L=a(H));H=w;H.show(x[0],L[0]);x.data("foundation-form.internal.currentLoadingMask",{target:L[0],impl:H})}}function p(x,L){x.each(function(){var H=a(this).adaptTo("foundation-field");H&&H.setDisabled(L)})}function l(x){return x.reduce(function(L,H){return H.post?L.concat(H.post()):L},[])}function r(x){if(x.data("foundationFormActions")){var L=
x.attr("action"),H=[];x.data("foundationFormActions").split(" ").forEach(function(D){x.prop("action",D);D=x.adaptTo("foundation-form").submitAsync();D.always(function(){x.attr("action",L)});H.push(D)});return function(){b(x,H)}}var T=x.adaptTo("foundation-form").submitAsync();return function(){return c(x,T)}}function k(x){m(x);var L=[];t.get("foundation.form.submit").forEach(function(T){x.is(T.selector)&&L.push(T.handler.call(x[0],x[0]))});var H=L.reduce(function(T,D){return D.preResult?T.concat(D.preResult):
T},[]);return a.when.apply(null,H).then(function(){var T=r(x);return a.when.apply(null,l(L)).then(T,T)}).always(function(){var T=x.data("foundation-form.internal.currentLoadingMask");T&&(T.impl.hide(x[0],T.target),x.removeData("foundation-form.internal.currentLoadingMask"))})}var q=f.UI.Foundation.Utils.everyReverse,t=a(h).adaptTo("foundation-registry"),y=a(h).adaptTo("foundation-ui"),u=new WeakMap,w={show:function(x,L){y.wait(L)},hide:function(x,L){y.clearWait()}};a(n).on("foundation-form-submit-callback",
"form.foundation-form",function(x,L){c(a(this),L)});a(n).on("reset","form.foundation-form",function(x){a(this).adaptTo("foundation-form").reset(!0)});a(n).on("foundation-field-change","form.foundation-form",function(x){u.set(this,!0)});var A=new WeakMap;a(n).on("submit","form.foundation-form",function(x){var L=a(this);if(L.data("foundationFormAjax")&&(x.preventDefault(),!L.data("foundationFormDisable"))){A.has(L[0])||A.set(L[0],[]);var H=A.get(L[0]);H.push(function(){k(L).always(function(){H.shift();
if(H.length)H[0]()})});if(1===H.length)H[0]()}});t.register("foundation.adapters",{type:"foundation-form",selector:"form.foundation-form",adapter:function(x){var L=a(x),H=function(T){(T=T.adaptTo("foundation-field"))&&T.reset&&T.reset()};return{submitAsync:function(){var T=L.attr("enctype"),D=L.attr("method")||"get",F=L.attr("action");if("post"===D.toLowerCase()&&"multipart/form-data"===T){var J=new FormData(L[0]);return a.ajax({method:D,url:F,contentType:!1,mimeType:T,processData:!1,data:J})}return a.ajax({method:D,
url:F,contentType:T,data:L.serialize(),cache:!1})},reset:function(T){T||x.reset();L.find(".foundation-field-editable").each(function(){var D=a(this);H(D.find(".foundation-field-readonly"));H(D.find(".foundation-field-edit"))})},isDirty:function(){return!0===u.get(x)}}}});t.register("foundation.form.submit",{selector:"*",handler:function(x){var L=a(x).find(".foundation-field-mixed");p(L,!0);return{post:function(){p(L,!1)}}}})})(document,window,Granite.$,Granite);
(function(n,h,a){a(h).adaptTo("foundation-registry").register("foundation.form.response.parser",{name:"foundation.sling",selector:"*",contentType:/text\/html/,handler:function(f,c,b){f=a(b);return f.find("#Status").length?Array.prototype.reduce.call(f.find("[id]"),function(d,e){d[e.id]=e.href?e.href:e.textContent;return d},{}):!1}})})(document,window,Granite.$);
(function(n,h,a){a(h).adaptTo("foundation-registry").register("foundation.form.response.parser",{name:"foundation.form",selector:"*",contentType:/text\/html/,handler:function(f,c,b){f=a(b);return(c=f.find(".foundation-form-response-status-code").next().text())?{statusCode:c,message:f.find(".foundation-form-response-status-message").next().text(),redirect:f.find(".foundation-form-response-redirect").attr("href"),path:f.find(".foundation-form-response-path").next().text(),title:f.find(".foundation-form-response-title").next().text(),
description:f.find(".foundation-form-response-description").next().html()}:!1}})})(document,window,Granite.$);(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.error",{name:"foundation.default",handler:function(a,f,c,b,d){a=b||Granite.I18n.get("Error");d=d||Granite.I18n.get("Fail to submit the form.");d=Granite.UI.Foundation.XSS.sanitizeHtml(d);h(n).adaptTo("foundation-ui").alert(a,d,"error")}})})(window,Granite.$);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.error",{name:"foundation.sling",handler:function(f,c,b,d,e){if(!c||!c.Status)return!1;f=a.I18n.get("Error");c=c.Message;h(n).adaptTo("foundation-ui").alert(f,c,"error")}})})(window,Granite.$,Granite);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.error",{name:"foundation.html",handler:function(a,f,c,b,d){if(!f||!f.statusCode)return!1;a=f.title||Granite.I18n.get("Error");f=f.description||f.message;h(n).adaptTo("foundation-ui").alert(a,f,"error")}})})(window,Granite.$);
(function(n,h){function a(f,c,b){var d=h(Granite.UI.Foundation.XSS.sanitizeHtml(c.target)),e=d.adaptTo("foundation-content");if(e){if(c.history){if(c.history.url||c.history.useFormUrl){d=f.attr("action");f=f.serialize();var g=0<=d.lastIndexOf("?")?"\x26":"?";f=d+g+f}else f=void 0;g={data:c.history.data,title:c.history.title,url:f}}c.replace?e.replace(b,g):e.push(b,g)}else d.html(Granite.UI.Foundation.XSS.sanitizeHtml(b))}h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.success",
{name:"foundation.content",handler:function(f,c,b,d,e){if(c.target){var g=h(f);c.redirect?h.ajax({url:c.redirect,cache:!1}).done(function(m){a(g,c,m)}):a(g,c,b)}}})})(window,Granite.$);
(function(n,h,a){function f(c,b){c&&"/"===c[0]&&(b?n.open(c):n.location=c)}h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.success",{name:"foundation.prompt.open",handler:function(c,b,d,e,g){h(n).adaptTo("foundation-ui").prompt(b.title,b.message,"success",[{text:Granite.I18n.get("Done"),handler:function(){f(a.expand(b.redirect,d))}},{text:Granite.I18n.get("Open"),primary:!0,handler:function(){f(a.expand(b.open,d),!0);f(a.expand(b.redirect,d))}}])}})})(window,Granite.$,Granite.URITemplate);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.success",{name:"foundation.redirect",handler:function(f,c,b,d,e){f=a.expand(c.href,b);Granite.UI.Foundation.XSS.isSameOrigin(f)&&(n.location=f)}})})(window,Granite.$,Granite.URITemplate);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.success",{name:"foundation.reload",handler:function(f,c,b,d,e){h(n).adaptTo("foundation-util-messenger").put(null,a.UI.Foundation.XSS.sanitizeHtml(c.message||a.I18n.get("The form has been submitted successfully")),"success");n.location.reload()}})})(window,Granite.$,Granite);
(function(n,h,a){h(n).adaptTo("foundation-registry").register("foundation.form.response.ui.success",{name:"foundation.collection.reload",handler:function(f,c,b,d,e){h(n).adaptTo("foundation-util-messenger").put(null,c.message||a.I18n.get("The form has been submitted successfully"),"success");h(a.UI.Foundation.XSS.sanitizeHtml(c.target)).adaptTo("foundation-collection").reload()}})})(window,Granite.$,Granite);
(function(n,h){h(n).on("foundation-field-change",".foundation-field-autosubmit",function(a){a=h(this).closest("form");if(a.length){var f=n.createEvent("Event");f.initEvent("submit",!0,!0);a[0].dispatchEvent(f)}})})(document,Granite.$);
(function(n,h,a,f,c){function b(g){var m=[g],p=0;return{current:function(){return this.peek(0)},peek:function(l){return m[p+l]},pointToToken:function(l){for(var r=0,k=m.length;r<k;r++){var q=m[r];if(q.token===l)return p=r,q}},forward:function(){if(p<m.length-1)return m[++p]},back:function(){if(0<p)return m[--p]},push:function(l){m.splice(++p,m.length-p,l)}}}function d(g){return(g=g.querySelector("title"))?g.textContent:null}var e=Date.now().toString();f(function(g){f(".foundation-content").length&&
(g=c.getState(),g.data.foundationContent={token:e},c.replaceState(g.data,h.title),f(n).on("statechange",function(m){if(m=c.getState().data.foundationContent){var p=f(".foundation-content");p.length&&p.adaptTo("foundation-content").goToToken(m.token)}}))});f(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-content",selector:".foundation-content",adapter:function(g){var m=f(g),p=b({token:e,el:m.children(".foundation-content-current")}),l=function(k){return k.children(".foundation-content-current").removeClass("foundation-content-current").detach()},
r;return{pushState:function(k,q,t,y){return this.go(t,!1,{data:k,title:q,url:t},y|0)},replaceState:function(k,q,t,y){return this.go(t,!0,{data:k,title:q,url:t},y|0)},go:function(k,q,t,y){var u=this;y|=0;r&&"pending"===r.state()&&r.abort();var w=f.ajax(k,{cache:!1});r=w;return w.then(function(A){A=y?a.UI.Foundation.XSS.sanitizeHtml(A):A;return q?u.replace(A,t):u.push(A,t)}).fail(function(){m.trigger("foundation-content-loaded",[!1,q,w])})},goToToken:function(k){(k=p.pointToToken(k))&&!k.el.is(".foundation-content-current")&&
(f(n).adaptTo("foundation-util-htmlparser").parse(k.el[0]),l(m),k.el.addClass("foundation-content-current").appendTo(m))},refresh:function(){return this.go(h.location.toString(),!0)},push:function(k,q){var t=Date.now().toString(),y=f(".foundation-content-path").attr("data-foundation-content-path"),u=f(n).adaptTo("foundation-util-htmlparser"),w=u.createFragment(k);k=u.parse(w);var A=f(w.querySelector(".foundation-content-current"));A.length||(A=f(h.createElement("div")).addClass("foundation-content-current").append(w));
p.push({token:t,el:A});k.then(function(){l(m);m.append(A);0===f(".foundation-content-path").length&&f(h.createElement("div")).prop("hidden",!0).attr("data-foundation-content-path",y).prependTo(A);A.trigger("foundation-contentloaded");if(q){var x=q.data||{};x.foundationContent={token:t};c.pushState(x,q.title||d(w),q.url)}m.trigger("foundation-content-loaded",[!0,!1])});return t},replace:function(k,q){var t=p.current(),y=f(n).adaptTo("foundation-util-htmlparser");k=y.createFragment(k);y.parse(k).then(function(u){var w=
f(u.querySelector(".foundation-content-current"));w.length||(w=f(u).children());w.is(".foundation-content-current")?(m.children(".foundation-content-current").remove(),w.appendTo(m).trigger("foundation-contentloaded")):m.children(".foundation-content-current").empty().append(w).trigger("foundation-contentloaded");q&&(w=q.data||{},w.foundationContent={token:t.token},c.replaceState(w,q.title||d(u),q.url));m.trigger("foundation-content-loaded",[!0,!0])});return t.token},back:function(k){if(c.getState().data.foundationContent){if(k){var q=
this;f(n).one("statechange",function(){q.refresh()})}var t=p.peek(-1);c.back();return t?t.token:void 0}if(t=p.back())return f(n).adaptTo("foundation-util-htmlparser").parse(t.el[0]),l(m),t.el.addClass("foundation-content-current").appendTo(m),k&&this.refresh(),(k=f(".foundation-collection",m).data("cardView"))&&k.layout&&k.layout(),t.token},forward:function(k){if(c.getState().data.foundationContent){if(k){var q=this;f(n).one("statechange",function(){q.refresh()})}k=p.peek(1);c.forward();return k?
k.token:void 0}var t=p.forward();if(t)return f(n).adaptTo("foundation-util-htmlparser").parse(t.el[0]),l(m),t.el.addClass("foundation-content-current").appendTo(m),k&&this.refresh(),t.token}}}})})(window,document,Granite,Granite.$,History);
(function(n,h){h(n).on("click",".foundation-content-control",function(a){a.preventDefault();var f=h(this);a=f.data("foundationContentControlAction");var c=f.data("foundationContentControlRefresh");f=f.closest(".foundation-content").adaptTo("foundation-content");"back"===a?f.back(c):"forward"===a&&f.forward(c)})})(document,Granite.$);
(function(n,h){function a(f,c,b,d){var e;(e=f.data(c+"-"+b))||(e=(f=f.data(c))?d&&"object"!==typeof f?f:f[b]:void 0);return e}h(n).on("click","a[data-foundation-content-history]",function(f){f.preventDefault();var c=h(this);var b=h(".foundation-content");if(b.length){var d=a(c,"foundation-content-history","action",!0);f=a(c,"foundation-content-history","title");var e=c.prop("href");d=void 0!==d?"replace"===d:!!a(c,"foundation-content-history","replace");c=a(c,"foundation-content-history","data");
b=b.adaptTo("foundation-content");d?b.replaceState(c,f,e,!0):b.pushState(c,f,e,!0)}})})(document,Granite.$);(function(n,h,a){a(h).on("click",".foundation-history-control",function(f){f.preventDefault();f=a(this).data("foundationHistoryControlAction");"back"===f?n.history.back():"forward"===f&&n.history.forward()})})(window,document,Granite.$);
(function(n,h,a,f,c){function b(e){e.id||(e.id=c.commons.getUID());return e.id}function d(e,g){return e.substring(0,g.length)===g}a(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-picker",selector:"coral-overlay.foundation-picker-buttonlist",adapter:function(e){var g=a(e),m=null,p=null,l=null,r=null,k=!1,q=a(h.createElement("div")).addClass("foundation-picker-buttonlist-loader").attr("role","progressbar").append((new c.Wait).set({centered:!0})),t=new (a(n).adaptTo("foundation-util-paginator"))({el:e,
limit:e.dataset.foundationPickerButtonlistLimit||10,resolveURL:function(u){return f.expand(e.dataset.foundationPickerButtonlistSrc,{offset:u.offset,limit:u.limit,query:r})},wait:function(u){g.append(q);return{clear:function(){q.remove()}}},processResponse:function(u,w){var A=a.Deferred();a(n).adaptTo("foundation-util-htmlparser").parse(w).then(function(x){x=a(x).children();if(x.is("coral-buttonlist")){var L=x.children("button");L.attr("tabindex",-1);var H=g.children("coral-buttonlist");H.append(L);
if(0===u.offset&&(H=H.children("button").first(),H.length)){var T=H.val();0<r.length&&!k&&d(T,r)&&(a(p).is("foundation-autocomplete")&&(p.field.value=T,p.field.setSelectionRange(r.length,T.length)),H.siblings(".is-focused").removeClass("is-focused"),H.addClass("is-focused"))}var D=x[0].dataset.foundationPickerButtonlistHasnext;D="true"===D?!0:"false"===D?!1:L.length>=u.limit;requestAnimationFrame(function(){A.resolve({length:L.length,hasNext:D})})}});return A.promise()}}),y=function(u,w){var A={},
x;for(x in u.dataset)if(u.dataset.hasOwnProperty(x)&&!(x.length<=w.length)&&x.startsWith(w)){var L=x.charAt(w.length);L===L.toUpperCase()&&(L=x.substr(w.length),A[L.toLowerCase()]=u.dataset[x])}return A};t.start();e.tabIndex=-1;e.placement="bottom";e.collision="flip";g.on("coral-overlay:open",function(u){if(u.target===e&&p){e.scrollTop=0;"combobox"===p.field.getAttribute("role")&&p.field.setAttribute("aria-expanded","true");var w=p;u=e.getBoundingClientRect();w=w.getBoundingClientRect();u.top<w.top?
g.addClass("is-above"):g.removeClass("is-above")}});g.on("coral-overlay:close",function(u){u.target===e&&(g.find("\x3e coral-buttonlist \x3e button.is-focused").removeClass("is-focused"),"combobox"===p.field.getAttribute("role")&&(p.field.removeAttribute("aria-activedescendant"),p.field.setAttribute("aria-expanded","false")),l=p=m=null)});g.on("mouseover","coral-buttonlist \x3e button",function(u){u=a(this);u.siblings(".is-focused").removeClass("is-focused");u.addClass("is-focused")});g.on("click",
"coral-buttonlist \x3e button",function(u){u=[{value:this.value,text:this.getAttribute("foundation-picker-buttonlist-text")||this.content.textContent,data:y(this,"foundationPickerButtonlistCustom")}];m.resolve(u);e.open=!1});a(h).on("click",function(u){e.open&&p&&!p.contains(u.target)&&(l&&l(r),m.reject(),e.open=!1)});return{attach:function(u){g.appendTo(u);g.trigger("foundation-contentloaded")},detach:function(){g.detach()},pick:function(u,w,A,x){w=A===r;k=r&&A.length<r.length&&d(r,A);m=a.Deferred();
p=u;r=A;l=x;(A="combobox"===p.field.getAttribute("role"))&&p.field.setAttribute("aria-autocomplete","both");w||(x=g.children("coral-buttonlist"),x.length?x.children("button").remove():(x=(new c.ButtonList).set({interaction:"off"}),x.setAttribute("role","listbox"),g.append(x),A&&(A=u.field.getAttribute("aria-controls"),b(x),A=A?A+" "+x.id:x.id,p.field.setAttribute("aria-controls",A))),t.restart(void 0,void 0,!0));e.open||(u=(A=a(u).adaptTo("foundation-overlay-anchor"))?A.getElement():u,g.outerWidth(a(u).outerWidth()),
e.target=u,e.focusOnShow="off",e.open=!0);return m.promise()},cancel:function(){l&&l(r);e.open=!1},resolve:function(u){var w=a.Deferred();u=u.map(function(A){var x=g.find("\x3e coral-buttonlist \x3e button").filter(function(){return this.value===A}).first();return x.length?{value:x[0].value,text:x[0].getAttribute("foundation-picker-buttonlist-text")||x[0].content.textContent,data:y(x[0],"foundationPickerButtonlistCustom")}:null});w.resolve(u);return w.promise()},focus:function(u){if(l){var w=g.children("coral-buttonlist"),
A=w.children(".is-focused"),x=function(L){if(L){L.classList.add("is-focused");var H=L.getBoundingClientRect(),T=e.getBoundingClientRect();H.top<T.top?L.scrollIntoView():H.top+H.height>T.bottom&&L.scrollIntoView(!1);b(L);"combobox"===p.field.getAttribute("role")?p.field.setAttribute("aria-activedescendant",L.id):p.setAttribute("aria-activedescendant",L.id);l(L.value)}};u?A.length?(A.removeClass("is-focused"),u=A.prev("button"),u.length?x(u[0]):l&&l(r)):x(w.children("button:last-of-type")[0]):A.length?
(A.removeClass("is-focused"),u=A.next("button"),u.length?x(u[0]):l&&l(r)):x(w.children("button:first-of-type")[0])}}}}})})(window,document,Granite.$,Granite.URITemplate,Coral);
(function(n,h,a){function f(c,b){if(c&&c.field&&"combobox"===c.field.getAttribute("role")){var d=c.field.getAttribute("aria-controls")||"";-1!==d.indexOf(b)?(d=d.replace(b,""),d=d.replace(" ",""),c.field.setAttribute("aria-controls",d)):(c.field.setAttribute("aria-controls",d?d+" "+b:b),c.field.setAttribute("aria-autocomplete","none"))}}h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-picker",selector:"coral-popover.foundation-picker-collection, coral-dialog.foundation-picker-collection",
adapter:function(c){var b=h(c),d=null,e=null;c.id||(c.id=a.commons.getUID());b.on("coral-overlay:open",function(g){g.target===c&&(g.target.target=null)});b.on("coral-overlay:close",function(g){g.target===c&&d&&d.reject()});b.on("click",".granite-pickerdialog-submit",function(g){g.preventDefault();g=b.find(".foundation-collection .foundation-selections-item").toArray().map(function(p){return{value:p.dataset.foundationPickerCollectionItemValue||p.dataset.foundationCollectionItemId,text:p.dataset.foundationPickerCollectionItemText||
h(p).find(".foundation-collection-item-title").text()}});var m=d;d=null;c.open=!1;m.resolve(g)});b.on("foundation-selections-change",".foundation-collection",function(g){g=h(this).adaptTo("foundation-selections");b.find(".granite-pickerdialog-submit").prop("disabled",0===g.count())});return{attach:function(g){b.is("coral-dialog")?b.appendTo(document.body):b.appendTo(g);e=g;f(e,c.id);b.trigger("foundation-contentloaded")},detach:function(){f(e,c.id);b.detach()},pick:function(g){d=h.Deferred();requestAnimationFrame(function(){var m=
b.find(".foundation-collection").adaptTo("foundation-selections");m&&m.clear();c.target=g;c.open=!0});return d.promise()},cancel:function(){d=e=null;c.open=!1}}}})})(window,Granite.$,Coral);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-picker",selector:"coral-popover.foundation-picker-form, coral-dialog.foundation-picker-form",adapter:function(a){var f=h(a),c=f.adaptTo("foundation-picker-form"),b=null;f.on("coral-overlay:open",function(d){d.target===a&&(d.target.target=null)});f.on("coral-overlay:close",function(d){d.target===a&&b&&b.reject()});f.on("submit",a.dataset.foundationPickerFormTarget||"form",function(d){d.preventDefault();
d=b;b=null;a.open=!1;d.resolve(c.getSelections())});return{attach:function(d){f.is("coral-dialog")?f.appendTo(document.body):f.appendTo(d);f.trigger("foundation-contentloaded")},detach:function(){f.detach()},pick:function(d,e,g){b=h.Deferred();requestAnimationFrame(function(){c.setup(d,e,g).then(function(){a.target=d;a.open=!0})});return b.promise()},cancel:function(){b=null;a.open=!1}}}})})(window,Granite.$);
(function(n,h,a,f){function c(m,p,l){var r=m.data("foundationPickerControlAction");f.UI.Foundation.Utils.everyReverse(g.get("foundation.picker.control.action"),function(k){return k.name!==r.name?!0:!1===k.handler.call(m[0],k.name,m[0],r,l)})}function b(m,p){p.api.attach(this);p.api.pick(m[0],[]).then(function(l){p.api.detach();p.open=!1;c(m,p,l)},function(){d(m,p)});"focus"in p.api?p.api.focus():p.el.focus();p.open=!0}function d(m,p){p.api.detach();p.open=!1}function e(m){var p=m.data("foundation-picker-control.internal.state");
p||(p={el:null,open:!1,loading:!1},m.data("foundation-picker-control.internal.state",p));return p}var g=a(n).adaptTo("foundation-registry");a(h).on("click",".foundation-picker-control",function(m){m.preventDefault();var p=a(this),l=e(p);if(!l.loading)if(l.el)l.open?(l.api.cancel(),d(p,l)):b(p,l);else if(m=p[0].dataset.foundationPickerControlSrc)l.loading=!0,a.ajax({url:m,cache:!1}).then(function(r){r=f.Toggles.isEnabled("FT_GRANITE-45484")?f.UI.Foundation.XSS.sanitizeHtml(r):r;return a(n).adaptTo("foundation-util-htmlparser").parse(r)}).then(function(r){return a(r).children()[0]}).then(function(r){l.loading=
!1;l.el=r;l.api=a(r).adaptTo("foundation-picker");b(p,l)},function(){l.loading=!1})})})(window,document,Granite.$,Granite);
(function(n,h,a){h.UI.Foundation.Layouts=h.UI.Foundation.Layouts||function(){var f=a(window).adaptTo("foundation-registry"),c=function(b){return f.get("foundation.layouts").find(function(d){return d.name===b})};return{register:function(b,d,e){f.register("foundation.layouts",{name:b,doLayout:d,clean:e})},layout:function(b){var d=a(b),e=d.data("foundationLayout"),g=c(e.name);g&&(e.stateId&&a.cookie(e.stateId+".layoutId",e.layoutId,{expires:7,path:"/"}),g.doLayout(b,e),d.trigger("foundation-layout-perform"))},
switchLayout:function(b,d){var e=a(b),g=e.data("foundationLayout");g&&g.name===d.name||(g&&(c(g.name).clean||this.clean)(b,g),e.addClass(d.name),e.data("foundationLayout",d),this.layout(b))},clean:function(b){b=a(b);var d=b.data("foundationLayout");b.removeClass(d.name);b.data("foundationLayout",null);d.stateId&&a.removeCookie(d.stateId+".layoutId",{path:"/"})},cleanAll:function(b){var d=a(b).data("foundationLayout");d&&(c(d.name).clean||this.clean)(b,d)}}}();a(n).on("foundation-contentloaded",function(f){a(f.target).filter("[data-foundation-layout]").add(a("[data-foundation-layout]",
f.target)).each(function(){h.UI.Foundation.Layouts.layout(this)})})})(document,Granite,Granite.$);
(function(n,h,a){a(n).on("click",".foundation-layout-control",function(f){var c=a(this),b=c.data("foundationLayoutControl");if("switch"===b.action){var d=b.target?a(h.UI.Foundation.XSS.sanitizeHtml(b.target)):c.closest("[data-foundation-layout]");h.UI.Foundation.Layouts.switchLayout(d[0],b.config);a(".foundation-layout-control").each(function(){var e=a(this);if(!e.is(c)){var g=e.data("foundationLayoutControl");"switch"===g.action&&b.config.name===g.config.name&&(g.target?d.is(g.target):d.is(e.closest("[data-foundation-layout]")))&&
(e.parent(".coral-CycleButton").length?(e.addClass("is-active"),e.siblings(".foundation-layout-control").removeClass("is-active")):e.parent("coral-cyclebutton").length&&e.prop("selected",!0))}})}})})(document,Granite,Granite.$);
(function(n,h,a){function f(c){var b=c?n.localStorage:n.sessionStorage;return{get:function(d){return JSON.parse(b.getItem(d))},set:function(d,e){b.setItem(d,JSON.stringify(e))},remove:function(d){b.removeItem(d)}}}h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-clipboard",selector:h(n),adapter:function(c){var b=h(c),d=f();return{get:function(e){return d.get(e)},set:function(e,g){d.set(e,g);b.trigger("foundation-clipboard-change",{key:e,data:g,timestamp:(new Date).getTime()})},
remove:function(e){d.remove(e);b.trigger("foundation-clipboard-change",{key:e,data:null,timestamp:(new Date).getTime()})}}}})})(window,Granite.$);
(function(n,h,a,f){var c=function(){var b=[];return{register:function(d,e){b.push({varname:d,provider:e})},expandURITemplate:function(d){if(!d)return d;var e=b.reduce(function(g,m){g[m.varname]=m.provider(m.varname);return g},{});return f.expand(d,e)},resolveVar:function(d){var e=b.find(function(g){return g.varname===d});return e?e.provider(d):void 0}}}();c.register("window.location",function(){return n.location.href});a(h).on("click","a.foundation-setter",function(b){b.preventDefault();n.location=
c.expandURITemplate(this.href)});a(h).on("foundation-contentloaded",function(b){a("input.foundation-setter",b.target).each(function(){this.value=c.resolveVar(a(this).data("foundationSetterVar"))})})})(window,document,Granite.$,Granite.URITemplate);
(function(n,h,a){function f(g,m){return g.querySelector(".shell-collection-sortby").items.getAll().find(function(p){return p.getAttribute("value")===m})}function c(g,m){return g.querySelector(".shell-collection-sortorder").items.getAll().find(function(p){return p.getAttribute("value")===m})}function b(g){var m=g.querySelector(".shell-collection-sortby"),p=g.querySelector(".shell-collection-sortorder"),l=p.querySelector(".shell-collection-sortorder \x3e button");return{getValues:function(){return{sortBy:m.selectedItem.getAttribute("value")||
null,sortOrder:p.selectedItem.getAttribute("value")||null}},setValues:function(r,k,q){var t=f(g,r),y=c(g,k);if(r&&k)if(t&&y)l.disabled=!1;else{l.disabled=!1;return}else t=f(g,null),y=c(g,"asc"),l.disabled=!0;t.selected||t.set("selected",!0,q);y.selected||y.set("selected",!0,q)}}}function d(g){if(e.has(g))return e.get(g);var m=Array.from(n.querySelectorAll(".shell-collection-sortcontainer")).find(function(p){return g.matches(p.dataset.shellCollectionTarget)});return m?(e.set(g,m),m):null}var e=new WeakMap;
h(n).on("coral-cyclebutton:change",".shell-collection-sortby, .shell-collection-sortorder",function(g){var m=this,p=m.closest(".shell-collection-sortcontainer");g=p.dataset.shellCollectionTarget;var l=n.querySelector(g);if(g&&l){g=h(l);l=b(p).getValues();var r=l.sortBy,k=l.sortOrder,q=g.adaptTo("foundation-collection-sort");p.sortTimeoutId&&clearTimeout(p.sortTimeoutId);p.sortTimeoutId=setTimeout(function(){delete p.sortTimeoutId;if(q.doSort(r,k)){var t={sortBy:r,sortOrder:k},y=m.matches(".shell-collection-sortby")?
"sortBy":"sortOrder";t={element:y,feature:"No feature defined",type:"sort",action:"click",widget:{name:y,type:"shell-sort"},attributes:t||{}};h(window).adaptTo("foundation-tracker").trackEvent(t)}},50)}});h(n).on("foundation-collection-sort:changed",".foundation-collection",function(){var g=d(this);if(g){if(this&&g){var m=h(this).adaptTo("foundation-collection-sort"),p=b(g);m=m.getSortValues();p.setValues(m.sortBy,m.sortOrder)}if(this&&g){var l=g.dataset.shellConsoleId;p=h(this).adaptTo("foundation-collection-sort").getSortValues();
l&&(m=l+"-sortName",l+="-sortDir",p.sortBy&&p.sortOrder?(h.cookie(m,p.sortBy,{expires:7,path:"/"}),h.cookie(l,p.sortOrder,{expires:7,path:"/"})):(h.removeCookie(m,{path:"/"}),h.removeCookie(l,{path:"/"})))}g[this.matches(".foundation-layout-table.foundation-collection")?"setAttribute":"removeAttribute"]("hidden","")}});h(n).on("foundation-collection-sort:beforeChange",".foundation-collection",function(){var g=h(this).adaptTo("shell-collection-sort");g&&g.clearCookie()});h(n).on("foundation-contentloaded",
function(g){g.target.querySelectorAll(".shell-collection-sortcontainer").forEach(function(m){var p=n.querySelector(m.dataset.shellCollectionTarget);p&&(e.set(p,m),m[p.matches(".foundation-layout-table.foundation-collection")?"setAttribute":"removeAttribute"]("hidden",""))})});h(window).adaptTo("foundation-registry").register("foundation.adapters",{type:"shell-collection-sort",selector:".foundation-collection",adapter:function(g){var m=d(g);return m?{clearCookie:function(){if(g&&m){var p=m.dataset.shellConsoleId;
if(p){var l=p+"-sortDir";h.removeCookie(p+"-sortName",{path:"/"});h.removeCookie(l,{path:"/"})}}}}:null}})})(document,Granite.$,Coral);
(function(n,h,a){n=a(n);var f=n.adaptTo("foundation-util-keyboard");n.adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-command",selector:"button[data-foundation-command],a[data-foundation-command]",adapter:function(c){var b=a(c),d;return{enhanceUI:function(){if(!c.dataset.foundationCommandLabel){var e=c.textContent.trim();c.dataset.foundationCommandLabel=e}d||(e=f.normalize(this.getShortcut()),d=h.createElement("span"),d.classList.add("granite-command-inline"),d.textContent=
"("+e+")",c.label?c.label.appendChild(d):c.appendChild(d))},execute:function(){b.click()},getLabel:function(){return c.dataset.foundationCommandLabel||c.textContent.trim()},getShortcut:function(){return c.dataset.foundationCommand},isActive:function(){return b.is(":visible")}}}})})(window,document,Granite.$);
(function(n,h,a,f){function c(){b||(b=f.I18n.get("Error: Please fill out this field."));return b}var b;h.addEventListener("invalid",function(e){e.isJqueryValidator||(e.preventDefault(),e=a(e.target).closest(":-foundation-submittable").adaptTo("foundation-validation"),e.checkValidity(),e.updateUI())},!0);n=a(n).adaptTo("foundation-registry");n.register("foundation.validation.selector",{submittable:"input, textarea, select, button, object",candidate:"input:not([readonly]):not([disabled]):not([type\x3dhidden]):not([type\x3dreset]):not([type\x3dbutton]), select:not([disabled]), textarea:not([readonly]):not([disabled]), button:not([disabled]):not([type\x3dreset]):not([type\x3dbutton])"});
n.register("foundation.validation.selector",{submittable:"[role\x3dcheckbox], [role\x3dradio], [role\x3dcombobox], [role\x3dlistbox], [role\x3dradiogroup], [role\x3dtree], [role\x3dslider], [role\x3dspinbutton], [role\x3dtextbox]",candidate:"[role\x3dcheckbox]:not([aria-disabled\x3dtrue]), [role\x3dradio]:not([aria-disabled\x3dtrue]), [role\x3dcombobox]:not([aria-disabled\x3dtrue]), [role\x3dlistbox]:not([aria-disabled\x3dtrue]), [role\x3dradiogroup]:not([aria-disabled\x3dtrue]), [role\x3dtree]:not([aria-disabled\x3dtrue]), [role\x3dslider]:not([aria-disabled\x3dtrue]), [role\x3dspinbutton]:not([aria-disabled\x3dtrue]), [role\x3dtextbox]:not([aria-disabled\x3dtrue]):not([aria-readonly\x3dtrue])"});
n.register("foundation.validation.validator",{selector:"input, textarea, select",validate:function(e){var g=a(e);if((!0===e.required||void 0===e.required&&void 0!==g.attr("required")||"true"===g.attr("aria-required"))&&!(g.is("[type\x3dcheckbox], [type\x3dradio]")?e.checked:0<e.value.length))return c()}});var d=function(){var e=a(this).adaptTo("foundation-validation");e&&(e.checkValidity(),e.updateUI())};a(h).on("change","input, textarea",d);a(h).on("input","input, textarea",f.UI.Foundation.Utils.debounce(d,
500));n.register("foundation.validation.validator",{selector:"[role\x3dlistbox]",validate:function(e){e=a(e);if("true"===e.attr("aria-required")){var g=!1;e.find("[role\x3doption]").each(function(){if("true"===a(this).attr("aria-selected"))return g=!0,!1});if(!g)return c()}}})})(window,document,Granite.$,Granite);
(function(n,h){h(n).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-field",selector:"input, textarea, select",adapter:function(a){return{getName:function(){return a.name},setName:function(f){a.name=f},isDisabled:function(){return a.disabled},setDisabled:function(f){a.disabled=f},isInvalid:function(){return"true"===a.getAttribute("aria-invalid")},setInvalid:function(f){a.setAttribute("aria-invalid",f?"true":"false")},isRequired:function(){return"true"===a.getAttribute("aria-required")},
setRequired:function(f){a.setAttribute("aria-required",f?"true":"false")},getValue:function(){return"checkbox"===a.type||"radio"===a.type?a.checked?a.value:null:a.value},setValue:function(f){"checkbox"===a.type||"radio"===a.type?a.checked=a.value===f:a.value=f},getLabelledBy:function(){return a.getAttribute("aria-labelledby")},setLabelledBy:function(f){f?a.setAttribute("aria-labelledby",f):a.removeAttribute("aria-labelledby")},getValues:function(){return"SELECT"===a.tagName?Array.prototype.map.call(a.selectedOptions,
function(f){return f.value}):[this.getValue()]},setValues:function(f){"SELECT"===a.tagName?(Array.prototype.forEach.call(a.selectedOptions,function(c){c.selected=!1}),f.forEach(function(c){var b=Array.prototype.find.call(a.options,function(d){return d.value===c});b&&(b.selected=!0)})):"checkbox"===a.type||"radio"===a.type?a.checked=f.some(function(c){return a.value===c}):a.value=f[0]}}}});h(document).on("change","input, textarea, select",function(a){h(this).trigger("foundation-field-change")})})(window,
Granite.$);
(function(n,h,a){var f;h(window).adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-field-mixed",selector:"input, textarea",adapter:function(c){var b=h(c);return{setMixed:function(d){d?(b.addClass("foundation-field-mixed"),d=b.attr,f||(f=a.I18n.get("\x3cMixed entries\x3e")),d.call(b,"placeholder",f)):(b.removeClass("foundation-field-mixed"),b.removeAttr("placeholder"))}}}});h(n).on("change",".foundation-field-mixed",function(){var c=h(this).adaptTo("foundation-field-mixed");c&&
c.setMixed(!1)})})(document,Granite.$,Granite);
(function(n,h,a){h(n).on("foundation-contentloaded",function(f){h("[data-datepicker-format]",f.target).each(function(){var e=h(this),g=e.data("datepicker-format");if(g){var m=e.text();m&&(m=a(m,["YYYY-MM-DD[T]HH:mm:ss.SSSZ","YYYY-MM-DD[T]HH:mm:ssZ",g]))&&e.replaceWith(m.format(g))}});var c=a().locale(n.documentElement.lang),b=c.utcOffset(),d=c.format("Z");h(".granite-datepicker-timezone",f.target).each(function(){var e=h(this);parseInt(e.attr("data-granite-datepicker-timezone-server"),10)===b?e.attr("hidden",
""):e.find(".granite-datepicker-timezone-client").text(d)})})})(document,Granite.$,moment);
(function(n,h,a){h(n).on("cui-contentloaded",function(d,e){e&&e._foundationcontentloaded||h(d.target).trigger("foundation-contentloaded",{_cuicontentloaded:!0})});h(n).on("foundation-contentloaded",function(d,e){e&&e._cuicontentloaded||h(d.target).trigger("cui-contentloaded",{_foundationcontentloaded:!0})});for(var f=["folder","hierarchy","hierarchyNotFile","nosystem"],c=function(d){return{name:"granite.ui.pathBrowser.pages."+d,handler:function(e,g){h.get(e+".pages.json",{predicate:d},function(m){m=
m.pages;for(var p=[],l=0;l<m.length;l++)p.push(m[l].label);g&&g(p)},"json");return!1}}},b=0;b<f.length;b++)CUI.PathBrowser.register("optionLoader",c(f[b]));h(n).on("foundation-contentloaded",function(d){h(".granite-autocomplete.coral-Autocomplete",d.target).each(function(){void 0===h(this).data("autocomplete")&&new CUI.Autocomplete({element:this,selectlistConfig:{loadData:function(e,g){var m=this.$element.attr("data-granite-autocomplete-src");if(m){e=a.expand(m,h.extend({},this.options.dataadditional,
{start:e,end:g}));var p=this,l=h.get(e);e=l.then(function(r){r=h(r);var k=r.filter("li").length;p.$element.append(r);return k<p.options.datapagesize});e.abort=function(){l.abort()};return e}}}})})});f=h(window).adaptTo("foundation-registry");f.register("foundation.adapters",{type:"foundation-field",selector:".coral-PathBrowser",adapter:function(d){d=h(d);var e=d.find(".js-coral-pathbrowser-input").adaptTo("foundation-field"),g=d.data("pathBrowser");return{getName:e.getName,setName:e.setName,isDisabled:function(){return!!g.get("disabled")},
setDisabled:function(m){g.set("disabled",m)},isInvalid:e.isInvalid,setInvalid:e.setInvalid,isRequired:e.isRequired,setRequired:e.setRequired,getValue:e.getValue,setValue:e.setValue,getLabelledBy:e.getLabelledBy,setLabelledBy:e.setLabelledBy,getValues:e.getValues,setValues:e.setValues}}});h(n).on("change",".js-coral-pathbrowser-input",function(d){h(this).closest(".coral-PathBrowser").trigger("foundation-field-change")});f.register("foundation.adapters",{type:"foundation-field",selector:".coral-Autocomplete:not(coral-autocomplete)",
adapter:function(d){var e=h(d),g=e.find(".js-coral-Autocomplete-textfield").adaptTo("foundation-field"),m=e.data("autocomplete");return{getName:g.getName,setName:function(p){var l=g.getName();e.children(".foundation-field-related").each(function(){this.name.startsWith(l+"@")&&(this.name=p+this.name.substring(l.length))});g.setName(p)},isDisabled:function(){return!!m.get("disabled")},setDisabled:function(p){m.set("disabled",p);e.children(".foundation-field-related").prop("disabled",p)},isInvalid:g.isInvalid,
setInvalid:g.setInvalid,getLabelledBy:g.getLabelledBy,setLabelledBy:g.setLabelledBy,isRequired:function(){return"true"===d.getAttribute("aria-required")},setRequired:function(p){d.setAttribute("aria-required",p?"true":"false")},getValue:function(){return m.options.multiple?m.getValue()[0]:m.getValue()},setValue:function(p){m.options.multiple?(m.clear(),m._tagListWidget.addItem({value:p,display:p})):g.setValue(p)},getValues:function(){return m.options.multiple?m.getValue():[m.getValue()]},setValues:function(p){m.options.multiple?
(m.clear(),m._tagListWidget.addItem(p.map(function(l){return{value:l,display:l}}))):g.setValues(p)}}}});h(n).on("change:value",".coral-Autocomplete:not(coral-autocomplete)",function(d){h(this).trigger("foundation-field-change")});h(n).on("change",".js-coral-Autocomplete-textfield",function(d){h(this).closest(".coral-Autocomplete").trigger("foundation-field-change")})})(document,Granite.$,Granite.URITemplate);
(function(n,h,a){n=a(n);var f=n.adaptTo("foundation-util-keyboard");n.adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-command",selector:"coral-cyclebutton-item[data-foundation-command]",adapter:function(c){var b=a(c),d=b.closest("coral-cyclebutton"),e;return{enhanceUI:function(){if(!c.dataset.foundationCommandLabel){var g=c.textContent.trim();c.dataset.foundationCommandLabel=g}e||(g=f.normalize(this.getShortcut()),e=h.createElement("span"),e.classList.add("granite-command-alignRight"),
e.textContent=g,c.content?c.content.insertBefore(e,c.content.firstChild):c.insertBefore(e,c.firstChild))},execute:function(){c.hasAttribute("selected")?d[0].items.first().setAttribute("selected",!0):c.setAttribute("selected",!0)},getLabel:function(){return c.dataset.foundationCommandLabel||c.textContent.trim()},getShortcut:function(){return c.dataset.foundationCommand},isActive:function(){return d.is(":visible")&&!b.prop("hidden")&&!b.prop("disabled")}}}})})(window,document,Granite.$);
(function(n,h){n=h(n).adaptTo("foundation-registry");n.register("foundation.adapters",{type:"foundation-toggleable",selector:"coral-dialog.foundation-toggleable",adapter:function(a){var f=h(a);f.on("coral-overlay:beforeopen",function(c){c.target===a&&f.trigger("foundation-toggleable-beforeshow")});f.on("coral-overlay:open",function(c){c.target===a&&f.trigger("foundation-toggleable-show")});f.on("coral-overlay:close",function(c){c.target===a&&f.trigger("foundation-toggleable-hide")});return{isOpen:function(){return a.open},
show:function(c){a.show()},hide:function(){a.hide()}}}});n.register("foundation.adapters",{type:"foundation-toggleable",selector:"coral-popover.foundation-toggleable, coral-overlay.foundation-toggleable",adapter:function(a){var f=h(a),c="coral-popover"===a.tagName.toLowerCase(),b=function(e){var g=f.context._elementToFocusWhenHidden;27===(e.which||e.keyCode)&&a.open&&a._isTopOverlay()&&(e.preventDefault(),a.hide(),null!==g&&g.setAttribute("aria-expanded",!1))},d=function(e){var g=a._getTarget(),m=
f.context._elementToFocusWhenHidden;!g||g.contains(e.target)||a.contains(e.target)||(a.hide(),null!==m&&m.setAttribute("aria-expanded",!1))};f.on("coral-overlay:open",function(e){e.target===a&&f.trigger("foundation-toggleable-show")});f.on("coral-overlay:close",function(e){e.target===a&&(c&&(document.removeEventListener("click",d,!0),a.removeEventListener("keydown",b)),f.trigger("foundation-toggleable-hide"))});return{isOpen:function(){return a.open},show:function(e){e instanceof Element&&(a.target=
e,c&&(a.interaction="off",document.addEventListener("click",d,!0),a.addEventListener("keydown",b)),a.show())},hide:function(){a.hide()}}}});n.register("foundation.adapters",{type:"foundation-toggleable",selector:"coral-panel.foundation-toggleable",adapter:function(a){var f=h(a);return{isOpen:function(){return a.selected},show:function(c){a.selected=!0;f.trigger("foundation-toggleable-show")},hide:function(){a.selected=!1;f.trigger("foundation-toggleable-hide")}}}})})(window,Granite.$);
(function(n,h,a,f){function c(){l||(l=Granite.I18n.get("Error: Please fill out this field."));return l}function b(k){if(k=k.adaptTo("foundation-validation"))k.checkValidity(),k.updateUI()}function d(k){var q=h(k);k=q.closest(".coral-Form-field");(q=q.adaptTo("foundation-field"))&&q.setInvalid&&q.setInvalid(!1);var t=k.data("foundation-validation.internal.error");if(t){var y=h(t).data("foundation-validation.internal.error.tooltip"),u=h(t).data("foundation-validation.internal.error.label");y&&(y.hide(),
y.remove());u&&u.remove();t.remove();t=g(q);var w=y?y.id:u.id;t&&-1!==t.indexOf(w)&&(y=t.split(" ").filter(function(A){return A!==w}).join(" "),q&&q.setLabelledBy&&q.setLabelledBy(y))}e(k,!0)}function e(k,q){q?(k.nextAll(".coral-Form-fieldinfo").removeClass("u-coral-screenReaderOnly"),k.nextAll(".coral-Form-fieldinfo").map(function(t,y){y.setAttribute("tabindex",0)})):(k.nextAll(".coral-Form-fieldinfo").addClass("u-coral-screenReaderOnly"),k.nextAll(".coral-Form-fieldinfo").map(function(t,y){y.setAttribute("tabindex",
1)}))}function g(k){if(k&&k.getLabelledBy)return k.getLabelledBy()}function m(k,q){if(null!==k.valueAsDate&&null!==q.valueAsDate&&k.valueAsDate.getTime()>=q.valueAsDate.getTime())return Granite.I18n.get("The date is not before {0}.",f(q.valueAsDate).format(q.displayFormat))}function p(k,q){if(null!==q.valueAsDate&&null!==k.valueAsDate&&q.valueAsDate.getTime()>=k.valueAsDate.getTime())return Granite.I18n.get("The date is not after {0}.",f(q.valueAsDate).format(q.displayFormat))}var l,r=Granite.UI.Foundation.Utils.debounce;
n=h(n).adaptTo("foundation-registry");n.register("foundation.validation.validator",{selector:".coral-Form-fieldwrapper .coral-Form-field, .coral-Form-fieldwrapper .coral-Form-field.coral-InputGroup .coral-InputGroup-input, .coral-Form-fieldwrapper .coral-Form-field.coral-DecoratedTextfield .coral-DecoratedTextfield-input, .coral-Form-fieldwrapper .coral-Form-field.coral-PathBrowser .js-coral-pathbrowser-input, .coral-Form-fieldwrapper .coral-Form-field.coral-Checkbox .coral-Checkbox-input, .coral-Form-fieldwrapper .coral-Form-field.coral-Switch .coral-Switch-input, .coral-Form-fieldwrapper .coral-Form-field.coral-Select .coral-Select-select, .coral-Form-fieldwrapper .coral-Form-field.coral-FileUpload .coral-FileUpload-input",
show:function(k,q){var t=h(k);k=t.closest(".coral-Form-field");var y=k.closest(".foundation-form, .coral-Form").hasClass("coral-Form--vertical");(t=t.adaptTo("foundation-field"))&&t.setInvalid&&t.setInvalid(!0);e(k,!1);var u=k.data("foundation-validation.internal.error");if(!u){u=new a.Icon;u.icon="alert";u.classList.add("coral-Form-fielderror");var w=document.createElement("label");w.classList.add("coral-Form-errorlabel");w.id=a.commons.getUID();w.setAttribute("tabindex",0);h(u).data("foundation-validation.internal.error.label",
w);w=new a.Tooltip;w.variant="error";w.placement="bottom";w.target=u;w.id=a.commons.getUID();w.setAttribute("aria-hidden","true");h(u).data("foundation-validation.internal.error.tooltip",w);k.data("foundation-validation.internal.error",u)}if(y){if(y=h(u).data("foundation-validation.internal.error.label")){y.innerHTML=q;var A=y}}else if(y=h(u).data("foundation-validation.internal.error.tooltip"))y.content.innerHTML=q,A=y;!u.parentNode&&A&&(y=g(t),w=A.id,t&&t.setLabelledBy&&t.setLabelledBy(y?y+" "+
w:w),k.after(u,A),u.setAttribute("aria-describedby",A.id),u.setAttribute("tabindex",0),u.alt=q)},clear:function(k){d(k)}});n.register("foundation.validation.validator",{selector:"input[type\x3dpassword]",validate:function(k){var q=h(k);if(k.value){var t=k.getAttribute("data-granite-password-retype");if(t)q=q.closest("form").find("input[type\x3dpassword]").filter(function(){return this.name===t}),q.val()&&b(q);else{var y=!0;q.closest("form").find("input[type\x3dpassword][data-granite-password-retype]").each(function(){if((t=
this.getAttribute("data-granite-password-retype"))&&t===k.name&&this.value&&this.value!==k.value)return y=!1});if(!y)return Granite.I18n.get("Passwords do not match!")}}}});n.register("foundation.validation.selector",{submittable:"coral-checkbox, coral-radio, coral-switch",candidate:"coral-checkbox:not([readonly]):not([disabled]), coral-radio:not([readonly]):not([disabled]), coral-switch:not([readonly]):not([disabled])",exclusion:"coral-checkbox *, coral-radio *, coral-switch *"});n.register("foundation.validation.validator",
{selector:"coral-checkbox, coral-radio, coral-switch",validate:function(k){if(k.required&&!k.checked)return c()}});n.register("foundation.validation.selector",{submittable:"coral-datepicker, coral-numberinput, coral-slider, coral-colorinput",candidate:"coral-datepicker:not([readonly]):not([disabled]), coral-numberinput:not([readonly]):not([disabled]), coral-slider:not([readonly]):not([disabled]), coral-colorinput:not([readonly]):not([disabled])",exclusion:"coral-datepicker *, coral-numberinput *, coral-slider *, coral-colorinput *"});
n.register("foundation.validation.validator",{selector:"coral-slider, coral-colorinput",validate:function(k){if(k.required&&0===k.value.length)return c()}});n.register("foundation.validation.validator",{selector:"coral-numberinput",validate:function(k){if(k.required&&!k.value)return c();if(null!==k.max&&k.valueAsNumber>k.max)return Granite.I18n.get("Please enter a value that is no more than {0}.",[k.max],"{0}\x3dmax number");if(null!==k.min&&k.valueAsNumber<k.min)return Granite.I18n.get("Please enter a value that is no less than {0}.",
[k.min],"{0}\x3dmin number");var q;if(q=!isNaN(k.step)&&!isNaN(k.valueAsNumber)){q=k.valueAsNumber;var t=k.step;if(t){var y=q.toString().split("."),u=t.toString().split(".");y=y[1]&&y[1].length||0;u=u[1]&&u[1].length||0;0===y&&0===u?q=0===q%t:(u=y>u?y+1:u+1,q=0===Math.round(q*Math.pow(10,u+1))%Math.round(t*Math.pow(10,u+1)))}else q=!0;q=!q}if(q)return Granite.I18n.get("Please enter a value that is a multiple of {0}.",[k.step],"{0}\x3dstep")}});n.register("foundation.validation.validator",{selector:"coral-datepicker",
validate:function(k){if(k.required&&0===k.value.length)return c();var q=h(k),t,y=k.getAttribute("data-granite-datepicker-before");if(y&&(h(y).each(function(){if(t=p(k,this))return!1}),t))return t;if(y=k.getAttribute("data-granite-datepicker-after"))if(h(y).each(function(){if(t=m(k,this))return!1}),t)return t;h("coral-datepicker[data-granite-datepicker-before]").each(function(){q.is(this.getAttribute("data-granite-datepicker-before"))&&(t=m(k,this))&&b(h(this))});h("coral-datepicker[data-granite-datepicker-after]").each(function(){q.is(this.getAttribute("data-granite-datepicker-after"))&&
(t=p(k,this))&&b(h(this))})}});n.register("foundation.validation.selector",{submittable:"coral-autocomplete, coral-select, coral-taglist, coral-fileupload, coral-buttongroup",candidate:"coral-autocomplete:not([readonly]):not([disabled]), coral-select:not([readonly]):not([disabled]), coral-taglist:not([readonly]):not([disabled]), coral-fileupload:not([readonly]):not([disabled]), coral-buttongroup:not([readonly]):not([disabled])",exclusion:"coral-autocomplete *, coral-select *, coral-taglist *, coral-fileupload *, coral-buttongroup *"});
n.register("foundation.validation.validator",{selector:"coral-autocomplete, coral-select, coral-taglist, coral-fileupload, coral-buttongroup",validate:function(k){if(k.required&&(0===k.values.length||1===k.values.length&&""===k.value))return c()}});n.register("foundation.validation.selector",{submittable:"coral-multifield",candidate:"coral-multifield",exclusion:"[coral-multifield-template], [coral-multifield-template] *"});n.register("foundation.validation.validator",{selector:"coral-multifield",
validate:function(k){if("true"===k.getAttribute("aria-required")&&0===k.items.getAll().length)return c()}});h(document).on("change","coral-autocomplete, coral-checkbox, coral-switch, coral-datepicker, coral-numberinput, coral-colorinput, coral-radio, coral-select, coral-slider, coral-taglist, coral-multifield, coral-fileupload, coral-buttongroup",function(k){b(h(this))});h(document).on("input","coral-datepicker input[handle], coral-numberinput input[handle], coral-colorinput input[handle]",r(function(k){b(h(this).closest("coral-datepicker, coral-numberinput, coral-colorinput"))},
500));n.register("foundation.validation.selector",{submittable:".coral-RadioGroup",candidate:".coral-RadioGroup",exclusion:".coral-RadioGroup *"});n.register("foundation.validation.validator",{selector:".coral-RadioGroup",validate:function(k){k=h(k);if("true"===k.attr("aria-required")){var q=k.find("coral-radio");if(q.length){if(0===q.filter("[checked]").length)return c()}else if(0===k.find("\x3e * \x3e :checked").length)return c()}}});h(document).on("change",".coral-RadioGroup",function(k){b(h(this))});
n.register("foundation.validation.selector",{submittable:".coral-Autocomplete:not(coral-autocomplete)",candidate:".coral-Autocomplete:not(coral-autocomplete)",exclusion:".coral-Autocomplete:not(coral-autocomplete) *"});n.register("foundation.validation.validator",{selector:".coral-Autocomplete:not(coral-autocomplete)",validate:function(k){k=h(k);if("true"===k.attr("aria-required")&&0===k.data("autocomplete").getValue().length)return c()}});h(document).on("change:value",".coral-Autocomplete:not(coral-autocomplete)",
function(k){b(h(this))});n=function(k){k=h(this).closest(".coral-Autocomplete");k.data("autocomplete").options.multiple||b(k)};h(document).on("change",".js-coral-Autocomplete-textfield",n);h(document).on("input",".js-coral-Autocomplete-textfield",r(n,500));h(document).on("foundation-validation-invalid","coral-panel",function(k){var q=h(this),t=q.parent().parent("coral-tabview")[0];t&&requestAnimationFrame(function(){var y=t.tabList.items.getAll()[q.index()];y&&(y.invalid=!0);y=k.target;var u=q.data("coral-tabview.internal.invalids");
void 0===u&&(u=[],q.data("coral-tabview.internal.invalids",u));0>u.indexOf(y)&&u.push(y)})});h(document).on("foundation-validation-valid","coral-panel",function(k){var q=h(this),t=q.parent().parent("coral-tabview")[0];t&&requestAnimationFrame(function(){var y=t.tabList.items.getAll()[q.index()],u=function(){y&&q.adaptTo("foundation-validation-helper").isValid()&&(y.invalid=!1)},w=q.data("coral-tabview.internal.invalids");if(w){var A=w.indexOf(k.target);0<=A&&w.splice(A,1);if(0===w.length)u();else{A=
!1;for(var x=w.length;x--;){if(q.has(w[x]).length){A=!0;break}w.splice(x,1)}A||u()}}else u()})})})(window,Granite.$,Coral,moment);
(function(n,h,a){var f=a(n).adaptTo("foundation-registry");h=a(h);var c="input[is\x3d'coral-textfield'] textarea[is\x3d'coral-textarea'] coral-checkbox coral-radio coral-switch coral-datepicker coral-numberinput coral-slider coral-colorinput coral-calendar coral-autocomplete coral-select coral-taglist coral-fileupload coral-buttongroup".split(" ");f.register("foundation.adapters",{type:"foundation-field",selector:c.join(","),adapter:function(b){var d=a(b);return{getName:function(){return b.name},
setName:function(e){d.nextAll(".foundation-field-related").add(d.children(".foundation-field-related")).each(function(){var g=b.name;this.name.startsWith(g+"@")&&(this.name=e+this.name.substring(g.length))});b.name=e},isDisabled:function(){return b.disabled},setDisabled:function(e){b.disabled=e;d.nextAll(".foundation-field-related").add(d.children(".foundation-field-related")).prop("disabled",e)},isReadOnly:function(){return b.readOnly},setReadOnly:function(e){b.readOnly=e;d.nextAll(".foundation-field-related").add(d.children(".foundation-field-related")).prop("readOnly",
e)},isInvalid:function(){return b.hasAttribute("invalid")},setInvalid:function(e){e?b.setAttribute("invalid",""):b.removeAttribute("invalid")},isRequired:function(){return a(b).is("input, textarea")?"true"===b.getAttribute("aria-required"):b.required},setRequired:function(e){a(b).is("input, textarea")?b.setAttribute("aria-required",e?"true":"false"):b.required=e},getValue:function(){return a(b).is("coral-checkbox, coral-radio, coral-switch")?b.checked?b.value:null:b.value},setValue:function(e){if(a(b).is("coral-checkbox, coral-radio, coral-switch"))b.checked=
b.value===e;else if(a(b).is("coral-fileupload"))try{b.value=e}catch(g){console.error(g)}else b.value=e},getLabelledBy:function(){return b.labelledBy},setLabelledBy:function(e){b.labelledBy=e},getValues:function(){return a(b).is("coral-checkbox, coral-radio, coral-switch")?[this.getValue()]:"values"in b?b.values:[b.value]},setValues:function(e){a(b).is("coral-checkbox, coral-radio, coral-switch")?b.checked=e.some(function(g){return b.value===g}):"values"in b?b.values=e:b.value=e[0]}}}});f.register("foundation.adapters",
{type:"foundation-field",selector:"coral-multifield",adapter:function(b){var d=a(b);return{getName:function(){return b.getAttribute("data-granite-coral-multifield-name")||""},setName:function(e){b.setAttribute("data-granite-coral-multifield-name",e)},isDisabled:function(){return d.children("[coral-multifield-add]").prop("disabled")||!1},setDisabled:function(e){d.find("\x3e coral-multifield-item \x3e coral-multifield-item-content").each(function(){a(this.parentNode).children("[handle\x3d'remove'], [handle\x3d'move']").prop("disabled",
e);var g=a(this.firstElementChild).adaptTo("foundation-field");g&&"setDisabled"in g&&g.setDisabled(e)});d.children("[coral-multifield-add], .foundation-field-related").prop("disabled",e)},isInvalid:function(){return"true"===b.getAttribute("aria-invalid")},setInvalid:function(e){b.setAttribute("aria-invalid",e?"true":"false")},isRequired:function(){return"true"===b.getAttribute("aria-required")},setRequired:function(e){b.setAttribute("aria-required",e?"true":"false")},getValue:function(){var e=d.find("\x3e coral-multifield-item \x3e coral-multifield-item-content \x3e :first-child").first().adaptTo("foundation-field");
return e&&"getValue"in e?e.getValue():null},setValue:function(e){this.setValues([e])},getLabelledBy:function(){return b.getAttribute("aria-labelledby")},setLabelledBy:function(e){e?b.setAttribute("aria-labelledby",e):b.removeAttribute("aria-labelledby")},getValues:function(){return Array.prototype.map.call(d.find("\x3e coral-multifield-item \x3e coral-multifield-item-content"),function(e){return(e=a(e.firstElementChild).adaptTo("foundation-field"))&&"getValue"in e?e.getValue():null})},setValues:function(e){for(var g,
m=b.items.getAll(),p=m.length,l=e.length,r=0;r<l;r++)g=m[r],"undefined"===typeof g&&(g=b.items.add(new Coral.Multifield.Item)),n.CustomElements.upgrade(g),g.content.firstChild||b._renderTemplate(g),(g=a(g.content.firstElementChild).adaptTo("foundation-field"))&&"setValue"in g&&g.setValue(e[r]);for(e=l;e<p;e++)b.items.remove(m[e])}}}});h.on("change",c.concat("coral-multifield").join(","),function(b){a(this).trigger("foundation-field-change")});f.register("foundation.adapters",{type:"foundation-field",
selector:".coral-RadioGroup",adapter:function(b){var d=a(b);return{getName:function(){return d.children("coral-radio").first().prop("name")||""},setName:function(e){var g=d.children("coral-radio"),m=g.first().prop("name");g.prop("name",e);"undefined"!==typeof m&&d.children(".foundation-field-related").each(function(){this.name.startsWith(m+"@")&&(this.name=e+this.name.substring(m.length))})},isDisabled:function(){var e=d.children("coral-radio");return 0===e.length?!1:Array.prototype.every.call(e,
function(g){return g.disabled})},setDisabled:function(e){d.children("coral-radio, .foundation-field-related").prop("disabled",e)},isInvalid:function(){return"true"===b.getAttribute("aria-invalid")},setInvalid:function(e){b.setAttribute("aria-invalid",e?"true":"false")},isRequired:function(){return"true"===b.getAttribute("aria-required")},setRequired:function(e){b.setAttribute("aria-required",e?"true":"false")},getValue:function(){var e=Array.prototype.reduce.call(d.children("coral-radio"),function(g,
m){m.checked&&g.push(m.value);return g},[]);return e.length?e[0]:null},setValue:function(e){d.children("coral-radio").each(function(){return this.value===e?this.checked=!0:!1})},getLabelledBy:function(){var e=d.children("coral-radio");return 0<e.length?e[0].labelledBy:null},setLabelledBy:function(e){d.children("coral-radio").each(function(){this.labelledBy=e})},getValues:function(){return Array.prototype.reduce.call(d.children("coral-radio"),function(e,g){g.checked&&e.push(g.value);return e},[])},
setValues:function(e){var g=d.children("coral-radio");e.forEach(function(m){g.each(function(){if(this.value===m)return g=g.not(this),this.checked=!0,!1})})}}}});h.on("change","coral-radio",function(b){a(this).parent(".coral-RadioGroup").trigger("foundation-field-change")})})(window,document,Granite.$);
(function(n,h,a){function f(){c||(c=a.I18n.get("\x3cMixed entries\x3e"));return c}var c;n=h(window).adaptTo("foundation-registry");n.register("foundation.adapters",{type:"foundation-field-mixed",selector:"coral-datepicker",adapter:function(b){return{setMixed:function(d){d?(b.classList.add("foundation-field-mixed"),b.placeholder=f()):(b.classList.remove("foundation-field-mixed"),b.placeholder="")}}}});n.register("foundation.adapters",{type:"foundation-field-mixed",selector:"[data-init\x3d'pathbrowser']",
adapter:function(b){var d=h(b).data("pathBrowser");return{setMixed:function(e){e?(d.$element.addClass("foundation-field-mixed"),d.$element.attr("placeholder",f())):(d.$element.removeClass("foundation-field-mixed"),d.$element.removeAttr("placeholder"))}}}});n.register("foundation.adapters",{type:"foundation-field-mixed",selector:"coral-checkbox",adapter:function(b){return{setMixed:function(d){d?b.classList.add("foundation-field-mixed"):b.classList.remove("foundation-field-mixed")}}}});n.register("foundation.adapters",
{type:"foundation-field-mixed",selector:".js-cq-TagsPickerField[data-init\x3d'pathbrowser']",adapter:function(b){return{setMixed:function(d){}}}})})(document,Granite.$,Granite);
(function(n,h){function a(b,d){Array.from(b.children).forEach(function(e){h(e).is(":-foundation-submittable")?d(e):a(e,d)})}function f(b,d){var e=h(b),g=b.matches("coral-multifield[data-granite-coral-multifield-composite]"),m=e.adaptTo("foundation-field").getName(),p=d||m;p&&b.items.getAll().forEach(function(l,r){p=d||m;p=g?p+"/item"+r+"/":p;a(l,function(k){var q=h(k),t=q.adaptTo("foundation-field");if(t){if(!t.setName)throw Error("The field doesn't support FoundationField#setName");var y=q.data("cachedName");
y||(y=t.getName(),q.data("cachedName",y));y&&(q=p+y,t.setName(q),k.matches("coral-multifield")&&(k.matches("coral-multifield[data-granite-coral-multifield-composite]")?f(k,q):f(k,p)))}})})}function c(b){var d=h(b).adaptTo("foundation-field"),e=Coral.transform.string(d.getLabelledBy());b.items.getAll().forEach(function(g,m){a(g,function(p){var l=h(p).adaptTo("foundation-field");l&&l.setLabelledBy&&l.getLabelledBy&&!l.getLabelledBy()&&(p.id=p.id||Coral.commons.getUID(),l.setLabelledBy(e+" "+g.id+" "+
p.id),p.matches("coral-multifield")&&c(p))})})}h(document).on("coral-collection:change","coral-multifield",function(b){0<(b.detail.addedItems||[]).length&&this===b.target&&Coral.commons.nextFrame(function(){h(this).trigger("foundation-contentloaded")}.bind(this))});h(document).on("coral-collection:change coral-multifield:itemorder","coral-multifield[data-granite-coral-multifield-composite]",function(b){"coral-multifield:itemorder"===b.type&&(b=Coral.commons.getUID(),f(this,b));f(this,"")});h(document).on("foundation-contentloaded",
function(b){var d=Array.from(b.target.querySelectorAll("coral-multifield"));"function"===typeof b.target.matches&&b.target.matches("coral-multifield")&&d.push(b.target);for(b=0;b<d.length;b++)Coral.commons.ready(d[b],function(e){e.matches("coral-multifield[data-granite-coral-multifield-composite]")&&f(e,"");c(e)})})})(window,Granite.$);
(function(n,h,a){a(n).on("foundation-mode-change",function(f,c,b){"default"!==c&&"edit"!==c||a(".foundation-layout-form").each(function(){var d=a(this);if(b===d.data("foundationModeGroup")){var e="edit"===c;d.toggleClass("foundation-layout-form-mode-edit",e).toggleClass("foundation-layout-form-mode-default",!e)}})})})(document,window,Granite.$);
(function(n,h,a,f,c,b){function d(E){return E.matches(".foundation-collection-item.is-lazyLoaded, .foundation-collection-item.is-pending")}function e(E){return E.classList.contains("foundation-collection-item")}function g(E){return"true"===E.dataset.foundationSelectionsSelectallMode}function m(E){return E===ia.SELECTION?!0:!1}function p(E){return Array.prototype.filter.call(E,function(M){return!(M.removing||M.hasAttribute("_removing")||M.classList.contains("is-removing")||!M.parentNode)})}function l(E){E=
E.querySelectorAll(".foundation-collection \x3e .foundation-collection-item");return p(E)}function r(E){return l(E).filter(function(M){return M.matches(".foundation-selections-item")})}function k(E){return l(E).filter(function(M){return M.matches(":not(.foundation-selections-item)")})}function q(E){return k(E).filter(function(M){return!d(M)})}function t(E){return l(E).filter(function(M){return M.matches(".is-lazyLoaded, .is-pending")})}function y(E,M){E=q(E);w(E,M)}function u(E,M){var N=t(E);if(N.length){var I=
U(h.createElement("div")).addClass("foundation-ui-mask").append('\x3ccoral-wait size\x3d"L" centered\x3e\x3c/coral-wait\x3e').appendTo(h.body);N=x(E,N).then(function(Q){w(Q,M)}).always(function(){I.remove()});y(E,M);return N}y(E,M);return U.Deferred().resolve().promise()}function w(E,M){0!==E.length&&Array.prototype.forEach.call(E,function(N,I,Q){I!==Q.length-1||M?N.set("selected",!0,!0):N.selected=!0;N.classList.add("foundation-selections-item")})}function A(E,M){0!==E.length&&Array.prototype.forEach.call(E,
function(N,I,Q){I!==Q.length-1||M?N.set("selected",!1,!0):N.selected=!1;N.classList.remove("foundation-selections-item")})}function x(E,M){return(E=(E=aa.get(E))&&E.lazyLoader?E.lazyLoader:null)?E.loadItems(M):U.Deferred().resolve().promise()}function L(E,M){var N=(new DOMParser).parseFromString(E,"text/html"),I=N.body.querySelector(".foundation-layout-masonry.foundation-collection");I&&M&&(E=l(I).filter(function(Q){return!d(Q)}).reduce(function(Q,R){return Q+R.outerHTML},""),I.innerHTML=E,E=N.head.innerHTML+
N.body.innerHTML);return E}function H(E,M,N,I,Q){M=N.trackingElement;I&&I.dataset.foundationCollectionItemId&&(M=N.trackingElement||I.dataset.foundationCollectionItemId);E={element:M||"No element defined",type:"change"===E?"masonry-item":"masonry",action:E,widget:{name:N.trackingElement||N.name||"foundation-layout-masonry",type:"masonry"},feature:N.trackingFeature||"No feature defined",attributes:Q||{}};U(n).adaptTo("foundation-tracker").trackEvent(E)}function T(E){var M=function(N,I,Q){N._foundationLayoutMasonry||
(N=I===ia.SELECTION||I===ia.DEFAULT?!0:!1,N&&E.collectionEl.dataset.foundationModeGroup===Q&&O(E,I))};U(h).on("foundation-mode-change",M);return function(){U(h).off("foundation-mode-change",M)}}function D(E){var M=E.collection,N=function(I){var Q=I.originalEvent.detail,R=Q.item,ea=R.dragAction.dropZone;I=Q.before;var da=Q.oldBefore;if(Q=E.config.itemReorderAction){var W=I?I.dataset.foundationCollectionItemId:void 0;I=W?W.substring(W.lastIndexOf("/")+1):void 0;Q=I=b.expand(Q,{item:R.dataset.foundationCollectionItemId,
before:W,beforeName:I});var v=I.indexOf("?");if(0<=v){Q=I.substring(0,v);var z=I.substring(v+1)}var G=U(n).adaptTo("foundation-ui");G.wait();U.ajax({url:Q,method:"POST",data:z}).always(function(){G.clearWait();H("order",M,E.config,R,{before:W})}).fail(function(C,B,K){C=a.I18n.get("Error");B=a.I18n.get("Fail to reorder.");H("order-error",M,E.config,R,{before:W,errorMsg:K});G.alert(C,B,"error");da?U(R).insertBefore(da.nextSibling):U(R).insertBefore(ea.firstChild)})}};M.on("coral-masonry:order",N);return function(){M.off("coral-masonry:order",
N)}}function F(E){var M=E.collectionEl,N=function(I){I.preventDefault();I.stopImmediatePropagation()};M.addEventListener("coral-dragaction:dragend",N,!0);return function(){M.removeEventListener("coral-dragaction:dragend",N,!0)}}function J(E){var M=E.collection,N=E.collectionEl,I=function(W){var v=W[0],z=!W.hasClass("foundation-selections-item");W=M.adaptTo("foundation-selections");z?("single"===N.dataset.foundationSelectionsMode&&(z=r(N),A(z,void 0)),W.select(v)):W.deselect(v)},Q=function(W){var v=
U(W.target).closest(".foundation-collection, .foundation-collection-item, coral-quickactions");v.hasClass("foundation-collection-item")&&m(E.mode)&&(W.preventDefault(),W.stopPropagation(),v.data("foundation-layout-collection-item.internal.avoidSelection")?v.removeData("foundation-layout-collection-item.internal.avoidSelection"):I(v))},R=function(W){var v=c.Keys.keyToCode("space");W.keyCode===v&&(v=U(W.target),v.is("coral-masonry-item")&&(W.preventDefault(),I(v)))},ea=function(){(h.activeElement===
N||N.contains(h.activeElement))&&M.adaptTo("foundation-selections").clear()},da=new (U(n).adaptTo("foundation-util-gesture-longpress"))({el:N,selector:"coral-masonry-item",validate:function(){return!m(E.mode)},perform:function(W){M.adaptTo("foundation-selections").select(W);U(W).data("foundation-layout-collection-item.internal.avoidSelection",!0)}});N.addEventListener("click",Q,!0);M.on("keydown","coral-masonry-item.foundation-collection-item",R);c.keys.on("escape",ea);da.start();return function(){N.removeEventListener("click",
Q,!0);M.off("keydown","coral-masonry-item.foundation-collection-item",R);c.keys.off("escape",ea);da.destroy()}}function O(E,M,N){var I=E.collection,Q=m(M);E.mode!==M&&(N||Q||I.children(".foundation-selections-item").removeClass("foundation-selections-item").prop("selected",!1),E.mode=M,M===ia.SELECTION?I.addClass("is-selectable"):I.removeClass("is-selectable"),c.commons.nextFrame(function(){I.parent("[role\x3d'grid']").attr("aria-multiselectable","multiple"===I.context.selectionMode)}),N&&(E=E.collectionEl.dataset.foundationModeGroup))&&
(N=U.Event("foundation-mode-change"),N._foundationLayoutMasonry=!0,I.trigger(N,[M,E]))}function S(E){var M,N=E.collection,I=E.collectionEl,Q=I.dataset.foundationCollectionSrc;if(Q){var R=l(I).length,ea="false"!==I.dataset.foundationLayoutMasonryHasmore,da=E.config.scrollSrc?N.closest(E.config.scrollSrc):N.parent(),W=U(n).adaptTo("foundation-util-paginator"),v=E.paginator=new W({el:da[0],limit:E.config.limit||20,size:E.config.size,wait:function(){I.dataset.graniteCollectionIsLoading="true";return{clear:function(){v.isLoading||
(I.dataset.graniteCollectionIsLoading="false")}}},resolveURL:function(z){var G=N.adaptTo("foundation-collection-sort").getSortValues(),C=g(I)?z.limit:z.size;return b.expand(Q,{offset:z.offset,limit:z.limit,size:C,id:I.dataset.foundationCollectionId,sortName:G.sortBy,sortDir:G.sortOrder})},processResponse:function(z,G){var C=U.Deferred();U(n).adaptTo("foundation-util-htmlparser").parse(G).then(function(B){var K=B.querySelector(".foundation-collection");K&&(B=l(K),M=U.Deferred(),V(E,B,M.promise()),
K=K.dataset.foundationLayoutMasonryHasmore,K="true"===K?!0:"false"===K?!1:B.length>=z.limit,I.dataset.graniteCollectionIsLoading="false",C.resolve({length:B.length,hasNext:K}))});return C.promise()},onNewPage:function(){N.trigger("foundation-collection-newpage");H("newpage",N,E.config);M.resolve()}});I.scrollContainer=da[0];v.start(R,ea,!1,500);return function(){v.destroy()}}}function P(E){var M=E.collection,N=E.collectionEl,I=N.dataset.foundationCollectionSrc;if(I){var Q=U(n).adaptTo("foundation-collection-lazyloader"),
R=E.config.scrollSrc?M.closest(E.config.scrollSrc):M.parent(),ea=E.lazyLoader=new Q({scrollSrc:R[0],getItems:function(){return l(N)},load:function(da,W){da=M.adaptTo("foundation-collection-sort").getSortValues();W=b.expand(I,{offset:W.offset,limit:W.limit,size:W.size,id:N.dataset.foundationCollectionId,sortName:da.sortBy,sortDir:da.sortOrder});return U.ajax(W).then(function(v){return U(n).adaptTo("foundation-util-htmlparser").parse(L(v,!0)).then(function(z){if(z=z.querySelector(".foundation-collection"))return l(z)})})},
onReplace:function(){Z(M);M.trigger("foundation-contentloaded")},isItemAbove:function(da,W,v){return W._layoutData?W._layoutData.top+W._layoutData.height<v:!1},isItemBelow:function(da,W,v){return W._layoutData?W._layoutData.top>v:!0},setupListeners:function(da,W){var v=function(z){U(z.target).is(".foundation-collection-item.is-lazyLoaded")&&W()};N.addEventListener("transitionend",v);M.on("foundation-collection-navigate",W);return function(){N.removeEventListener("transitionend",v);M.off("foundation-collection-navigate",
W)}}});N.scrollContainer=N.scrollContainer||R[0];ea.start();return function(){ea.destroy()}}}function V(E,M,N){var I=E.collection,Q=E.collectionEl;I.append(M);g(Q)&&(M=u(Q).then(function(){Z(I)}),U.when(M,N).then(function(){I.trigger("foundation-selections-change");H("change",I,E.config,null,{method:"append"})}));Z(I);I.trigger("foundation-contentloaded")}function Y(E){var M=E.collection,N=function(R){M.adaptTo("foundation-collection-item-action").execute(R)},I=function(R){var ea=U(R.target).closest("button, a, coral-quickactions-item, .foundation-collection-item");
ea.hasClass("foundation-layout-masonry-cardwrapper")?1!==R.which||R.metaKey||R.shiftKey||R.altKey||(R.preventDefault(),N(ea.closest(".foundation-collection-item")[0])):ea.hasClass("foundation-collection-item")&&(R.preventDefault(),N(ea[0]))},Q=function(R){var ea=c.Keys.keyToCode("enter");R.keyCode===ea&&U(R.target).is("coral-masonry-item")&&(m(E.mode)||N(R.target))};M.on("click",".foundation-collection-item",I);M.on("keydown","coral-masonry-item",Q);return function(){M.off("click",".foundation-collection-item",
I);M.off("keydown","coral-masonry-item",Q)}}function fa(E,M){var N=E.collection,I=E.collectionEl,Q=E.config,R=M.sortBy;M=M.sortOrder;I=b.expand(I.dataset.foundationCollectionSrc,{offset:0,limit:Q.limit,size:g(I)?Q.limit:Q.size,id:I.dataset.foundationCollectionId,sortName:R,sortDir:M});var ea=U(n).adaptTo("foundation-ui");ea.wait();H("sort",N,E.config,null,{sortBy:R,sortOrder:M});return U.ajax({url:I,cache:!1}).then(function(da){U(n).adaptTo("foundation-util-htmlparser").parse(da).then(function(W){var v=
W.querySelector(".foundation-collection");if(v){W=E.paginator;var z=l(v),G=N.adaptTo("foundation-collection");v=v.dataset.foundationLayoutMasonryHasmore;G.clear();G.append(z);v="true"===v?!0:"false"===v?!1:z.length>=W.limit;W.restart(z.length,v)}})},function(){var da=a.I18n.get("Error"),W=a.I18n.get("Fail to load data.");ea.alert(da,W,"error")}).always(function(){ea.clearWait()})}function ha(E){var M=E.collectionEl,N=E.collection,I=function(C){m(E.mode)&&C.preventDefault();for(var B=C.target.getElementsByTagName("a"),
K=0;K<B.length;K++){var X=B.item(K);X.matches("a[is\x3d'coral-anchorbutton']")&&X.setAttribute("role","menuitem")}C.target.setAttribute("role","menubar");C.target.returnFocusTo(C.target.closest(".foundation-collection-item"))},Q=function(C){var B=C.explicitOriginalTarget;"CORAL-QUICKACTIONS"===B.parentNode.nodeName&&(B.matches("button[is\x3d'coral-button']")||B.matches("a[is\x3d'coral-anchorbutton']"))&&(C.preventDefault(),C.stopImmediatePropagation());C=U(C.target).closest(".foundation-collection-item").find("coral-quickactions");
C.length&&(C[0].open=!C[0].open)},R=function(C){(C.shiftKey&&121===C.keyCode||C.ctrlKey&&32===C.keyCode)&&C.preventDefault()},ea=function(C){C=C.currentTarget;var B=C.querySelector("coral-quickactions");C.removeEventListener("coral-overlay:close",ea,!0);c.commons.nextFrame(function(){B.dataset.previousTrapFocus&&(B.trapFocus=B.dataset.previousTrapFocus,"on"!==B.trapFocus&&B.removeAttribute("tabindex"),delete B.dataset.previousTrapFocus);B.dataset.previousReturnFocus&&(B.returnFocus=B.dataset.previousReturnFocus,
delete B.dataset.previousReturnFocus);B.dataset.previousFocusOnShow&&(B.focusOnShow=B.dataset.previousFocusOnShow,delete B.dataset.previousFocusOnShow)})},da=function(C){var B=C.currentTarget,K=B.querySelector("coral-quickactions");(C.shiftKey&&121===C.keyCode||C.ctrlKey&&32===C.keyCode)&&!K.open&&("on"===K.interaction&&(K.dataset.previousTrapFocus=K.trapFocus,K.dataset.previousReturnFocus=K.returnFocus,K.dataset.previousFocusOnShow=K.focusOnShow,K.trapFocus="on",K.returnFocus="on",K.focusOnShow=
"on",B.addEventListener("coral-overlay:close",ea,!0)),K.show())},W=function(C){var B=C.currentTarget,K=B.querySelector("coral-quickactions");K.returnFocusTo(B);K.contains(h.activeElement)&&C.target===K&&(B.removeEventListener("coral-overlay:beforeclose",W,!0),B.dataset.justClosed=!0,n.requestAnimationFrame(function(){B.focus()}))},v,z=function(C){var B=C.currentTarget,K=B.querySelector("coral-quickactions");v&&clearTimeout(v);B.removeEventListener("keydown",R);B.removeEventListener("keyup",da);c.commons.nextFrame(function(){!K.open||
B.contains(h.activeElement)||K.overlay.contains(h.activeElement)||(K.open=!1,B.removeEventListener("blur",z,!0),B.removeEventListener("coral-overlay:beforeclose",W,!0),delete B.dataset.justClosed)})},G=function(C){if(C.target.matches(".foundation-collection-item")){C=C.target;var B=C.querySelector("coral-quickactions");B&&(v&&clearTimeout(v),B.open||C.dataset.justClosed?delete C.dataset.justClosed:(v=setTimeout(function(){B.open=!0},300),C.addEventListener("blur",z,!0),C.addEventListener("coral-overlay:beforeclose",
W,!0)),C.addEventListener("keydown",R),C.addEventListener("keyup",da))}};N.on("coral-overlay:beforeopen","coral-quickactions",I);M.addEventListener("focus",G,!0);M.addEventListener("coral-dragaction:dragstart",Q,!0);M.addEventListener("coral-dragaction:dragend",Q,!0);return function(){N.off("coral-overlay:beforeopen","coral-quickactions",I);M.removeEventListener("focus",G,!0);M.removeEventListener("coral-dragaction:dragstart",Q,!0);M.removeEventListener("coral-dragaction:dragend",Q,!0)}}function Z(E){var M=
h.querySelector(".granite-collection-pagetitle");E.find("coral-card.foundation-collection-navigator").wrap(function(){var N=U(this);if(!N.parent("a").length){var I=h.createElement("a");I.className="foundation-layout-masonry-cardwrapper";I.tabIndex=-1;var Q=N[0].dataset.foundationCollectionNavigatorHref;if(Q)I.target=N[0].dataset.foundationCollectionNavigatorTarget;else{if(!M||!E.is(M.dataset.graniteCollectionPagetitleTarget))return;Q=b.expand(M.dataset.graniteCollectionPagetitleSrc,{id:N.closest(".foundation-collection-item")[0].dataset.foundationCollectionItemId})}I.href=
Q;return U(I)}})}function ba(E,M,N,I){var Q=E.config,R=E.collection,ea=E.collectionEl,da=ea.dataset.foundationCollectionSrc,W=M===ea.dataset.foundationCollectionId;if(!da)return U.Deferred().reject().promise();N=N?N:Q.limit||20;var v=R.adaptTo("foundation-collection-sort").getSortValues();M=b.expand(da,{offset:0,limit:N,size:Q.size,id:M,sortName:v.sortBy,sortDir:v.sortOrder});E._lastLoadRequest&&E._lastLoadRequest.abort();E._lastLoadRequest=U.ajax({url:M,cache:!1});return E._lastLoadRequest.then(function(z){var G=
U.Deferred();U(n).adaptTo("foundation-util-htmlparser").parse(z).then(function(C){var B=U(C).children();C.querySelector(".foundation-collection")?(I&&(C=R.children(".foundation-selections-item").map(function(){return this.dataset.foundationCollectionItemId}).toArray(),B.data("foundation-layout-collection-switcher.internal.selectionIds",C)),W&&(R.trigger("foundation-collection-reload"),H("reload",R,Q)),a.UI.Foundation.Layouts.cleanAll(ea),B.replaceAll(R),requestAnimationFrame(function(){B.trigger("foundation-collection-navigate");
H("navigate",R,Q)}),B.trigger("foundation-contentloaded"),I&&B.removeData("foundation-layout-collection-switcher.internal.selectionIds"),G.resolve(B[0])):G.reject(Error("Invalid content"))});return G.promise()},function(z,G){if("abort"!==G){z=U(n).adaptTo("foundation-ui");G=a.I18n.get("Error");var C=a.I18n.get("Fail to load data.");z.alert(G,C,"error")}})}var U=f,ia={SELECTION:"selection",DEFAULT:"default"},aa=new WeakMap;f=U(n).adaptTo("foundation-registry");f.register("foundation.layouts",{name:"foundation-layout-masonry",
doLayout:function(E,M){var N=U(E);if(E.classList.contains("foundation-collection")&&!aa.has(E)){var I={collectionEl:E,collection:N,config:M,stack:[]};aa.set(E,I);H("init",N,M);I.stack.push(T(I));I.stack.push(J(I));I.stack.push(S(I));I.stack.push(P(I));I.stack.push(Y(I));I.stack.push(ha(I));I.stack.push(F(I));I.stack.push(D(I));N.attr("role","row").attr("ariaGrid","on");Z(N);var Q=N.data("foundation-layout-collection-switcher.internal.selectionIds");E=U();Q&&(E=N.children(".foundation-collection-item").filter(function(){return 0<=
Q.indexOf(this.dataset.foundationCollectionItemId)}),E.each(function(){U(this).attr("selected","").addClass("foundation-selections-item")}));var R=M.selectionMode||E.length?ia.SELECTION:ia.DEFAULT;requestAnimationFrame(function(){O(I,R,!0);N.trigger("foundation-collection-newpage");H("newpage",N,M);N.trigger("foundation-selections-change");H("change",N,M,null,{method:"init"});N.trigger("foundation-collection-sort:changed")})}},clearItems:function(E){U(E).adaptTo("foundation-collection").clear();E.layoutInstance.layout()},
clean:function(E,M){U(E).siblings(".granite-collection-loading-title-wrapper").remove();if(M=aa.get(E))aa.delete(E),a.UI.Foundation.Utils.everyReverse(M.stack,function(N){N&&N();return!0});a.UI.Foundation.Layouts.clean(E)}});f.register("foundation.adapters",{type:"foundation-collection",selector:".foundation-layout-masonry.foundation-collection",adapter:function(E){var M=aa.get(E),N=M.collection;return{append:function(I){V(M,I)},clear:function(){l(E).forEach(function(I){I.showRemoveTransition=!1;
I.remove()});E.layoutInstance.layout()},getPagination:function(){var I=M.paginator;if(!I)return null;var Q=parseInt(N.attr("data-foundation-layout-masonry-guesstotal")||"-1",10);var R=-1===Q?I.hasNext:I.offset>=Q||a.Toggles.isEnabled("CT_GRANITE-46012")&&I.offset<Q&&I.hasNext||1E3<=Q?I.hasNext:null;return{offset:I.offset,limit:I.limit,guessTotal:-1===Q?Q:Math.max(I.offset,Q),hasNext:R}},isAllLoaded:function(){var I=this.getPagination();if(!I)return!0;if(0<t(E).length)return!1;if(null===I.hasNext&&
-1!==I.guessTotal){var Q=l(E);return!(I.guessTotal>Q.length)}return!1===I.hasNext},load:function(I){return ba(M,I)},reload:function(){var I=this.getPagination();return ba(M,E.dataset.foundationCollectionId,I?I.offset:null,!0)}}}});f.register("foundation.adapters",{type:"foundation-collection-meta",selector:".foundation-layout-masonry.foundation-collection",adapter:function(E){var M=U(E).children(".foundation-collection-meta"),N=M[0];return N?{getElement:function(){return N},getTitle:function(){return N.dataset.foundationCollectionMetaTitle},
getThumbnail:function(){return M.children(".foundation-collection-meta-thumbnail")[0]},isFolder:function(){return"true"===N.dataset.foundationCollectionMetaFolder},getRelationship:function(){return N.dataset.foundationCollectionMetaRel}}:null}});f.register("foundation.adapters",{type:"foundation-selections",selector:".foundation-layout-masonry.foundation-collection",adapter:function(E){var M=aa.get(E),N=M.collection,I=M.config;return{count:function(){if(g(E)){var Q=N.adaptTo("foundation-collection").getPagination();
if(Q&&-1!==Q.guessTotal){var R=k(E);return Q.guessTotal-R.length}}return r(E).length},selectAll:function(Q){u(E).then(function(){Q||(N.trigger("foundation-selections-change"),H("change",N,I,null,{method:"selectAll"}))});O(M,ia.SELECTION,!0)},clear:function(Q){var R=r(E);A(R,void 0);Q||(N.trigger("foundation-selections-change"),H("change",N,I,null,{method:"clear"}));I.autoDefaultMode&&O(M,ia.DEFAULT,!0)},select:function(Q){e(Q)&&(O(M,ia.SELECTION,!0),Q.selected=!0,Q.classList.toggle("foundation-selections-item",
!0),N.trigger("foundation-selections-change"),H("change",N,I,Q,{method:"select"}))},deselect:function(Q){e(Q)&&(Q.selected=!1,Q.classList.toggle("foundation-selections-item",!1),N.trigger("foundation-selections-change"),I.autoDefaultMode&&!r(E).length&&O(M,ia.DEFAULT,!0),H("change",N,I,Q,{method:"deselect"}))},isAllSelected:function(){var Q=l(E).length,R=r(E).length;return 0<Q&&Q===R?(Q=(Q=N.adaptTo("foundation-collection").getPagination())?Q.hasNext:!1,g(E)?!0:!Q):!1}}}});f.register("foundation.adapters",
{type:"foundation-collection-sort",selector:".foundation-layout-masonry.foundation-collection",adapter:function(E){var M=U(E),N=aa.get(E);return{isSorted:function(I,Q){var R=this.getSortValues();return R.sortBy===I&&R.sortOrder===Q?!0:!1},getSortValues:function(){return{sortBy:E.dataset.foundationCollectionSortby||null,sortOrder:E.dataset.foundationCollectionSortorder||null}},doSort:function(I,Q){I&&Q||(I=Q=null);if(!this.isSorted(I,Q)){null===I&&null===Q?(delete E.dataset.foundationCollectionSortby,
delete E.dataset.foundationCollectionSortorder):(E.dataset.foundationCollectionSortby=I,E.dataset.foundationCollectionSortorder=Q);var R=U.Event("foundation-collection-sort:beforeChange",{sortName:I,sortDir:Q});M.trigger(R);fa(N,{sortBy:I,sortOrder:Q}).then(function(){M.trigger("foundation-collection-sort:changed")});return!0}return!1}}}})})(window,document,Granite,Granite.$,Coral,Granite.URITemplate);
(function(n,h,a,f,c){function b(u){var w={};u.find(":input").each(function(){var A=a(this);A.serializeArray().forEach(function(x){var L=x.name;x=x.value;if(w.hasOwnProperty(L)){var H=w[L];Array.isArray(H)||(H=[H]);H.push(x);x=H}w[L]=x;(x=a(A).attr("data-foundation-uritemplate-parent"))&&((w[x]=w[x]||{})[L]=w[L])})});return w}function d(u){if(!1===u.data("foundationWizardStepValidation"))return!0;var w=u.data("foundation-wizard-step.internal.valid");if(void 0!==w)return w;var A=!0;u.adaptTo("foundation-validation-helper").getSubmittables().forEach(function(x){x=
a(x).adaptTo("foundation-validation");x.checkValidity()||(A=!1);x.updateUI()});return A}function e(u){var w=[];(u=u.data("foundation-wizard-step.internal.children"))&&u.each(function(){var A=a(this),x=A.data("foundation-layout-wizard2.internal.actualStep");x||(x=A);w.push(x);a.merge(w,e(A))});return w}function g(u,w,A){if(d(w)){var x=u.adaptTo("foundation-wizard");if(u=A.data("foundationWizardControlSrc")){var L=a(x.getPrevSteps(w[0])).add(w);L=b(L);u=f.expand(u,L);if(A.data("foundation-wizard-control.internal.lastURL")===
u)x.next();else{A.data("foundation-wizard-control.internal.lastURL",u);var H=a(n).adaptTo("foundation-ui");H.wait();a.ajax({url:u,cache:!1}).done(function(T){a(n).adaptTo("foundation-util-htmlparser").parse(T).then(function(D){D=a(D.querySelectorAll(".foundation-wizard-step"));x.remove(e(w));w.data("foundation-wizard-step.internal.children",D);x.appendAfter(D.toArray(),w[0]);x.next();H.clearWait()})}).fail(function(){H.clearWait();var T=h.I18n.get("Error"),D=h.I18n.get("Something went wrong.");H.alert(T,
D,"error")})}}else x.next()}}function m(u){var w=function(A){var x=a(this),L=x.data("foundationWizardControlAction");if(x.closest("coral-panel").prop("selected")){var H=u.find(".foundation-wizard-step-active");"next"===L?("button"===x.prop("type")&&A.preventDefault(),g(u,H,x)):"prev"===L&&(A.preventDefault(),u.adaptTo("foundation-wizard").prev())}else A.preventDefault()};u.on("click",".foundation-wizard-control",w);return function(){u.off("click",".foundation-wizard-control",w)}}function p(u){var w=
a(u),A=w.data("foundation-layout-wizard2.internal.resizeController");if(!A){var x=w.find(".foundation-layout-wizard2-header \x3e .foundation-layout-wizard2-steplist"),L=w.find(".foundation-layout-wizard2-header \x3e .foundation-layout-wizard2-title"),H=w.find(".foundation-layout-wizard2-header \x3e .foundation-layout-wizard2-controls");A=new q({elements:[new k({element:x[0],states:[new r({fn:function(T){(T||this.element).setAttribute("size","L")}}),new r({fn:function(T){(T||this.element).setAttribute("size",
"S")}})]}),new k({element:L[0]}),new k({element:H[0]})],container:x[0].parentElement});A.measureElements().then(function(){var T=function(D){requestAnimationFrame(function(){A.checkResize()})};c.commons.addResizeListener(u,T);t.set(u,T);A.checkResize()});w.data("foundation-layout-wizard2.internal.resizeController",A)}}function l(u){t.get(u)&&(c.commons.removeResizeListener(u,t.get(u)),t.delete(u));u=a(u);var w=u.data("foundation-layout-wizard2.internal.resizeController");w&&(w.clean(),a.removeData(u,
"foundation-layout-wizard2.internal.resizeController"))}function r(u){this.fn=u.fn}function k(u){this.element=u.element;this.currentState=0;this.measuredWidth=-1;this.states=u.states}function q(u){this.config=u;this.totalWidth=0;this.elementsMap=new WeakMap;for(u=0;u<this.config.elements.length;++u)this.elementsMap.set(this.config.elements[u].element,this.config.elements[u])}var t=new WeakMap,y=a(n).adaptTo("foundation-registry");y.register("foundation.layouts",{name:"foundation-layout-wizard2",doLayout:function(u,
w){p(u);var A=a(u);if(A.hasClass("foundation-wizard")&&!0!==A.data("foundation-layout-wizard2.internal.init")){var x=[];x.push(function(){A.data("foundation-layout-wizard2.internal.stack",x);return function(){A.removeData("foundation-layout-wizard2.internal.stack")}}());x.push(function(){A.data("foundation-layout-wizard2.internal.init",!0);return function(){A.removeData("foundation-layout-wizard2.internal.init")}}());x.push(m(A));var L=A.find(".foundation-wizard-step").first();L.length&&requestAnimationFrame(function(){L.addClass("foundation-wizard-step-active");
A.trigger("foundation-wizard-stepchange",[L[0]])});u=A.find(".foundation-layout-wizard2-steplist");u[0]&&2>u[0].items.getAll().length&&u.attr("hidden",!0)}},clean:function(u,w){l(u);(w=a(u).data("foundation-layout-wizard2.internal.stack"))&&h.UI.Foundation.Utils.everyReverse(w,function(A){A&&A();return!0});h.UI.Foundation.Layouts.clean(u)}});y.register("foundation.adapters",{type:"foundation-wizard",selector:".foundation-layout-wizard2.foundation-wizard",adapter:function(u){var w=a(u);return{toggleNext:function(A){this.toggle("next",
A)},togglePrev:function(A){this.toggle("prev",A)},toggleCancel:function(A){this.toggle("cancel",A)},toggle:function(A,x){w.find(".foundation-layout-wizard2-controls \x3e coral-panel[selected] .foundation-wizard-control[data-foundation-wizard-control-action\x3d"+A+"]").prop("disabled",!x)},next:function(){var A=w.find(".foundation-layout-wizard2-contents \x3e coral-panel[selected]"),x=A.next("coral-panel");if(x.length){var L=x.index();w.find(".foundation-layout-wizard2-steplist \x3e coral-step").eq(L).attr("selected",
"");x.attr("selected","");w.find(".foundation-layout-wizard2-controls \x3e coral-panel").eq(L).attr("selected","");A=A.find(".foundation-wizard-step").removeClass("foundation-wizard-step-active");x=x.find(".foundation-wizard-step").addClass("foundation-wizard-step-active");w.trigger("foundation-wizard-stepchange",[x[0],A[0]])}},prev:function(){var A=w.find(".foundation-layout-wizard2-contents \x3e coral-panel[selected]"),x=A.prev("coral-panel");if(x.length){var L=x.index();w.find(".foundation-layout-wizard2-steplist \x3e coral-step").eq(L).attr("selected",
"");x.attr("selected","");w.find(".foundation-layout-wizard2-controls \x3e coral-panel").eq(L).attr("selected","");A=A.find(".foundation-wizard-step").removeClass("foundation-wizard-step-active");x=x.find(".foundation-wizard-step").addClass("foundation-wizard-step-active");w.trigger("foundation-wizard-stepchange",[x[0],A[0]])}},append:function(A,x){var L=w.find(".foundation-layout-wizard2-contents \x3e coral-panel");this.appendAfter(A,(void 0===x?L[L.length-1]:L[x]).querySelector(".foundation-wizard-step"))},
appendAfter:function(A,x){var L=[],H=[],T=[];A.forEach(function(D){var F=a(D);D=F.attr("data-foundation-wizard-step-title");var J=F.children(".foundation-wizard-control").detach().addClass("foundation-layout-inline2-item"),O=F.children(".foundation-wizard-step-content").removeClass("foundation-wizard-step-content").addClass("foundation-wizard-step");0===O.length?O=F:F.data("foundation-layout-wizard2.internal.actualStep",O);F=new c.Panel;O.appendTo(F.content);var S=document.createElement("div");S.className=
"foundation-layout-inline2 foundation-layout-inline2-gap";O=new c.Panel;O.content.appendChild(S);J.appendTo(S);D=(new c.Step).set({label:{textContent:D}});L.push(D);H.push(F);T.push(O)});A=a(x).closest("coral-panel");x=A.index();w.find(".foundation-layout-wizard2-steplist \x3e coral-step").eq(x).after(L);A.after(H);w.find(".foundation-layout-wizard2-controls \x3e coral-panel").eq(x).after(T);w.trigger("foundation-contentloaded");(A=w.data("foundation-layout-wizard2.internal.resizeController"))&&A.updateElement(w.find(".foundation-layout-wizard2-steplist")[0])},
remove:function(A){var x=w.find(".foundation-layout-wizard2-steplist \x3e coral-step"),L=w.find(".foundation-layout-wizard2-controls \x3e coral-panel"),H=[];a(A).each(function(){var T=a(this).closest("coral-panel"),D=T.index();H.push(T[0],x[D],L[D])});a(H).detach();(A=w.data("foundation-layout-wizard2.internal.resizeController"))&&A.updateElement(w.find(".foundation-layout-wizard2-steplist")[0])},getPrevSteps:function(A){return a(A).closest("coral-panel").prevAll("coral-panel").find(".foundation-wizard-step").toArray()}}}});
r.prototype.clean=function(){this.fn=null};k.prototype.measure=function(u){var w=a.Deferred(),A=a(this.element).clone().css({display:"inline-block",width:"auto",visibility:"hidden"}).appendTo("body");u&&this.states&&this.states.length&&this.states[0].fn.call(this,A[0]);var x=this;c.commons.ready(this.element,function(){x.previousMeasuredWidth=x.measuredWidth;x.measuredWidth=A.outerWidth(!0);w.resolve(x.measuredWidth);A.remove()});return w.promise()};k.prototype.goToNextState=function(){return this.states&&
this.states.length&&this.currentState<this.states.length-1?(this.states[++this.currentState].fn.call(this),!0):!1};k.prototype.goToPreviousState=function(){return this.states&&this.states.length&&0<this.currentState?(this.states[--this.currentState].fn.call(this),!0):!1};k.prototype.overflows=function(){return this.element.offsetWidth<this.measuredWidth};k.prototype.clean=function(){this.config=this.element=null;this.states.forEach(function(u){u.clean()});this.states=null};q.prototype.measureElements=
function(){var u=a.Deferred(),w=this,A=this.config.elements.map(function(x){return x.measure()});a.when.apply(a,A).then(function(){for(var x=0;x<arguments.length;++x)w.totalWidth+=arguments[x]||0;u.resolve(w.totalWidth)});return u.promise()};q.prototype.elementsOverflow=function(){return a(this.config.container).width()<this.totalWidth};q.prototype.checkResize=function(){var u;if(this.elementsOverflow()){if(!this.hasOverflow)for(u=0;u<this.config.elements.length;++u){var w=this.config.elements[u];
if(w.goToNextState()){this.hasOverflow=!0;break}}}else if(this.hasOverflow)for(u=0;u<this.config.elements.length;++u)if(w=this.config.elements[u],w.goToPreviousState()){this.hasOverflow=!1;break}};q.prototype.updateElement=function(u){u=this.elementsMap.get(u);var w=this;if(u){var A=u.measuredWidth;u.measure(!0).then(function(x){w.totalWidth-=A;w.totalWidth+=x;w.checkResize()})}};q.prototype.clean=function(){this.config.elements.forEach(function(u){u.clean()});this.elementsMap=this.config=null}})(window,
Granite,Granite.$,Granite.URITemplate,Coral);
(function(n,h,a){function f(v){return v.matches(".foundation-collection-item.is-lazyLoaded, .foundation-collection-item.is-pending")}function c(v){return v.classList.contains("foundation-collection-item")}function b(v){return"true"===v.dataset.foundationSelectionsSelectallMode}function d(v){v=v.querySelectorAll(".foundation-collection-item");return Array.from(v)}function e(v,z){var G="coral-columnview-column";z&&(G+=", coral-columnview-preview");v=v.querySelectorAll(G);return Array.from(v)}function g(v){return e(v,
!0).filter(function(z){return"true"===z.dataset.foundationLayoutColumnviewLazy})}function m(v){return d(v).filter(function(z){return z.classList.contains("foundation-selections-item")})}function p(v){return d(v).filter(function(z){return!z.classList.contains("foundation-selections-item")})}function l(v){return p(v).filter(function(z){return!f(z)})}function r(v){return d(v).filter(function(z){return z.matches(".is-lazyLoaded, .is-pending")})}function k(v,z){0!==v.length&&Array.prototype.forEach.call(v,
function(G,C,B){C!==B.length-1||z?G.set("selected",!0,!0):G.selected=!0;G.classList.add("foundation-selections-item")})}function q(v,z){0!==v.length&&Array.prototype.forEach.call(v,function(G,C,B){C!==B.length-1||z?G.set("selected",!1,!0):G.selected=!1;G.classList.remove("foundation-selections-item")})}function t(v,z,G){z=l(z);v.bulkSelection=!0;k(z,G);v.bulkSelection=!1}function y(v,z,G){var C=r(z),B=R.Deferred().resolve().promise();if(0<C.length){var K=R(document.createElement("div")).addClass("foundation-ui-mask").append('\x3ccoral-wait size\x3d"L" centered\x3e\x3c/coral-wait\x3e').appendTo(document.body);
B=J(z,C).then(function(X){v.bulkSelection=!0;k(X,G);v.bulkSelection=!1}).always(function(){K.remove()})}t(v,z,G);return B}function u(v,z){return d(v).find(function(G){return G.dataset.foundationCollectionItemId===z})}function w(v,z,G){return e(v,G).find(function(C){return C.dataset.foundationLayoutColumnviewColumnid===z})}function A(v,z){return w(v,v.dataset.foundationCollectionId,z)}function x(v){(v=v.querySelector("coral-columnview-preview"))&&v.remove()}function L(v,z){v.dataset.foundationCollectionId=
z;R(v).removeData("foundationCollectionId")}function H(v,z){return R(n).adaptTo("foundation-util-htmlparser").parse(v).then(function(G){var C=Array.from(G.children).find(function(B){return B.matches(z)});if(C)return C;G=Array.from(G.querySelectorAll(z));return 0<G.length?G[G.length-1]:null})}function T(v,z){var G=(new DOMParser).parseFromString(v,"text/html"),C=G.body.querySelector(".foundation-layout-columnview.foundation-collection");if(C){var B=C.querySelectorAll("coral-columnview-column");if(B=
0<B.length?B[B.length-1]:null)z&&(v=d(B).filter(function(K){return!f(K)}).reduce(function(K,X){return K+X.outerHTML},""),B.innerHTML=v),C.outerHTML=B.outerHTML,v=G.head.innerHTML+G.body.innerHTML}return v}function D(v,z){return R(n).adaptTo("foundation-util-htmlparser").parse(T(v,z)).then(function(G){var C=Array.from(G.children).find(function(K){return K.matches("coral-columnview-column")});C||(C=G.querySelectorAll("coral-columnview-column"),C=C[C.length-1]);G=null;var B=C.dataset.foundationLayoutColumnviewHasmore;
"true"===B?G=!0:"false"===B&&(G=!1);return{items:d(C),hasMore:G,meta:C.querySelector(".foundation-collection-meta")}})}function F(v){var z=v.collectionEl,G=v.collection;!1===v.initialLoadEventTriggered&&0===g(z).length&&(G.trigger("granite-columnview:initial-load-completed"),v.initialLoadEventTriggered=!0)}function J(v,z){return(v=O(v))?v.loadItems(z):R.Deferred().resolve([]).promise()}function O(v){return(v=W.get(v))&&v.lazyLoader?v.lazyLoader:null}function S(v,z){var G=O(z);if(!G){var C=v.collection,
B=v.collectionEl.dataset.foundationCollectionSrc;G=new (R(n).adaptTo("foundation-collection-lazyloader"))({scrollSrc:z.querySelector("coral-columnview-column-content"),getItems:function(){return d(z)},load:function(K,X){K=C.adaptTo("foundation-collection-sort").getSortValues();X=a.expand(B,{offset:X.offset,limit:X.limit,size:X.size,id:z.dataset.foundationLayoutColumnviewColumnid,sortName:K.sortBy,sortDir:K.sortOrder});return R.ajax(X).then(function(ca){return D(ca,!0)}).then(function(ca){return ca.items})},
onReplace:function(){R(z).trigger("foundation-contentloaded")}})}return G}function P(v,z,G){var C=v.config;v.collectionEl.dataset.foundationCollectionSrc&&("boolean"!==typeof G&&(G="false"!==z.dataset.foundationLayoutColumnviewHasmore),v=S(v,z),G={offset:d(z).length,limit:C.limit,size:C.size,hasNext:G,lazyLoader:v},W.set(z,G))}function V(v,z,G,C){var B=R(v);if(v=v.dataset.foundationModeGroup){G=G?G.length:B.adaptTo("foundation-selections").count();C=C?C.length:0;var K=R.Event("foundation-mode-change");
K._foundationLayoutColumnview=!0;(0===C||z)&&0<G?B.trigger(K,[ea.SELECTION,v]):(0<C||z)&&0===G&&B.trigger(K,[ea.DEFAULT,v])}}function Y(v,z,G){var C=v.config,B=v.collection,K=v.collectionEl,X=K.dataset.foundationCollectionSrc;if(X&&"false"!==z.dataset.foundationLayoutColumnviewHasmore&&!z.hasAttribute("is-loading")){G=G||0;var ca=C.size,na=C.limit||20,ka=B.adaptTo("foundation-collection-sort").getSortValues();G=a.expand(X,{offset:G,limit:na,size:ca,id:z.dataset.foundationLayoutColumnviewColumnid,
sortName:ka.sortBy,sortDir:ka.sortOrder});z.setAttribute("is-loading","");z.classList.add("foundation-layout-columnview-isloading");return R.ajax({url:G,cache:!1}).then(function(la){return D(la).then(function(ja){var ma=null,oa=ja.items;if(z.dataset.foundationLayoutColumnviewLazy){for(;z.content.firstChild;)z.content.removeChild(z.content.firstChild);delete z.dataset.foundationLayoutColumnviewLazy;ja.meta&&z.content.appendChild(ja.meta);z.dataset.foundationLayoutColumnviewLoadActiveItemEl="true"}"true"===
z.dataset.foundationLayoutColumnviewLoadActiveItemEl&&(ma=oa.find(function(pa){return z.dataset.foundationLayoutColumnviewActiveitem===pa.dataset.foundationCollectionItemId}));oa.forEach(function(pa){z.items.add(pa)});ja=null===ja.hasMore?oa.length>=na:ja.hasMore;z.dataset.foundationLayoutColumnviewHasmore=""+ja;oa=O(z);P(v,z,ja);oa||(oa=O(z),oa.start());if(ma){delete z.dataset.foundationLayoutColumnviewActiveitem;delete z.dataset.foundationLayoutColumnviewLoadActiveItemEl;var qa=function(pa){CustomElements.upgrade(pa);
"drilldown"===pa.variant?(pa.set("active",!0,!0),z._oldActiveItem=pa):pa.active=!0;pa.scrollIntoView();F(v)};f(ma)?J(z,[ma]).then(function(pa){qa(pa[0])}):qa(ma)}b(K)&&A(K)===z&&y(v,z).then(function(){B.trigger("foundation-selections-change");aa("change",B,C,null,{method:"handlePagination"})});!0===v.reloaded&&0===g(K).length&&requestAnimationFrame(function(){B.trigger("foundation-collection-navigate");aa("navigate",B,C)});"true"===z.dataset.foundationLayoutColumnviewLoadActiveItemEl&&("false"===
z.dataset.foundationLayoutColumnviewHasmore?(delete z.dataset.foundationLayoutColumnviewActiveitem,delete z.dataset.foundationLayoutColumnviewLoadActiveItemEl,F(v)):requestAnimationFrame(function(){z.querySelector(".foundation-collection-item:last-of-type").scrollIntoView()}))})},function(){var la=Granite.I18n.get("Error"),ja=Granite.I18n.get("Fail to load data.");R(n).adaptTo("foundation-ui").alert(la,ja,"error")}).always(function(){z.classList.remove("foundation-layout-columnview-isloading");z.removeAttribute("is-loading")})}}
function fa(v,z,G){var C=v.config,B=C.previewSrc,K=v.collection,X=v.collectionEl;v=X.dataset.foundationCollectionSrc;var ca=z.closest("coral-columnview-column");if(v){if(B){var na=z.dataset.foundationCollectionItemId;z=a.expand(B,{id:na});X.classList.add("foundation-layout-columnview-isloading");return R.ajax({url:z,cache:!1}).then(function(ka){return H(ka,"coral-columnview-preview").then(function(la){la.dataset.foundationLayoutColumnviewColumnid=na;C.previewMaximized&&la.classList.add("foundation-layout-columnview-preview-maximized");
G?K.children("coral-columnview-preview").replaceWith(la):X.setNextColumn(la,ca);return la})},function(){var ka=Granite.I18n.get("Error"),la=Granite.I18n.get("Fail to load data.");R(n).adaptTo("foundation-ui").alert(ka,la,"error")}).always(function(){X.classList.remove("foundation-layout-columnview-isloading")})}z=e(X);B=z.indexOf(ca);for(v=z.length-1;0<=B&&v>B;v--)X.columns.remove(z[v]);return R.Deferred().resolve().promise()}}function ha(v,z){var G=v.config,C=v.collection,B=v.collectionEl;return fa(v,
z).then(function(K){K&&!0===v.reloaded&&0===g(B).length&&requestAnimationFrame(function(){C.trigger("foundation-collection-navigate");aa("navigate",C,G,null)});return K})}function Z(v,z){return v.config.previewSrc?fa(v,z):R.Deferred().reject(Error("previewSrc not available")).promise()}function ba(v,z){var G=v.config,C=v.collection,B=v.collectionEl,K=B.dataset.foundationCollectionSrc,X=z.closest("coral-columnview-column");if(K){var ca=G.size,na=G.limit||20;z=z.dataset.foundationCollectionItemId;var ka=
C.adaptTo("foundation-collection-sort").getSortValues();K=a.expand(K,{offset:0,limit:na,size:ca,id:z,sortName:ka.sortBy,sortDir:ka.sortOrder});B.classList.add("foundation-layout-columnview-isloading");return R.ajax({url:K,cache:!1}).then(function(la){return H(T(la),"coral-columnview-column").then(function(ja){var ma=d(ja),oa=ja.dataset.foundationLayoutColumnviewHasmore;P(v,ja,"true"===oa?!0:"false"===oa?!1:ma.length>=na);ma=O(ja);B.setNextColumn(ja,X);ma.start();!0===v.reloaded&&0===g(B).length&&
requestAnimationFrame(function(){C.trigger("foundation-collection-navigate");aa("navigate",C,G)})})},function(){var la=Granite.I18n.get("Error"),ja=Granite.I18n.get("Fail to load data.");R(n).adaptTo("foundation-ui").alert(la,ja,"error")}).always(function(){B.classList.remove("foundation-layout-columnview-isloading");B.removeAttribute("is-loading")})}}function U(v,z){var G=v.config,C=v.collection,B=v.collectionEl,K=C.adaptTo("foundation-collection-sort").getSortValues(),X=w(B,z,!0),ca=null,na=null;
if(X&&X.previousElementSibling){var ka=X.previousElementSibling;ca=ka.dataset.foundationLayoutColumnviewColumnid;ka.activeItem&&(na=ka.activeItem.dataset.foundationCollectionItemId)}var la;(ka=W.get(X))?ka=la=ka.offset:(la=G.limit||20,ka=G.size);z=a.expand(B.dataset.foundationCollectionSrc,{offset:0,limit:la,size:ka,id:z,sortName:K.sortBy,sortDir:K.sortOrder});K=[];ka=m(B);1===ka.length&&"single"!==B.dataset.foundationSelectionsMode&&K.push(v.config.previewSrc?fa(v,ka[0],!0):R.Deferred().reject(Error("previewSrc not available")).promise());
K.push(R.ajax({url:z,cache:!1}).then(function(ja){return H(T(ja),"coral-columnview-column").then(function(ma){var oa=d(ma),qa=m(B),pa=qa.map(function(ra){return ra.dataset.foundationCollectionItemId});oa=oa.filter(function(ra){return 0<=pa.indexOf(ra.dataset.foundationCollectionItemId)});k(oa);var sa=C.adaptTo("foundation-collection");if(null===ca||null===na||X.nodeName===ma.nodeName&&ma.querySelector("coral-columnview-item"))X.replaceWith(ma);else return U(v,ca).then(function(){C.data("foundation-layout-collection.internal.columnviewLoaded",
!1);sa.load(na);C.trigger("foundation-collection-reload");aa("reload",C,G);C.trigger("foundation-selections-change");aa("change",C,G,null,{method:"reloadParentColumn",parentColumnId:ca})});P(v,ma);O(ma).start();C.trigger("foundation-collection-reload");aa("reload",C,G);C.trigger("foundation-selections-change");aa("change",C,G,null,{method:"reloadColumn",parentColumnId:na});V(B,!1,oa,qa)})},function(){var ja=R(n).adaptTo("foundation-ui"),ma=Granite.I18n.get("Error"),oa=Granite.I18n.get("Fail to load data.");
ja.alert(ma,oa,"error")}));return R.when.apply(null,K).then(function(){return B})}function ia(v,z){var G=v.collection,C=v.collectionEl,B=C.dataset.foundationCollectionSrc,K=G.adaptTo("foundation-collection-sort").getSortValues();v=a.expand(B,{offset:0,limit:v.config.limit||20,size:v.config.size,id:z,sortName:K.sortBy,sortDir:K.sortOrder});return R.ajax({url:v,cache:!1}).then(function(X){Granite.UI.Foundation.Layouts.cleanAll(C);return R(n).adaptTo("foundation-util-htmlparser").parse(X).then(function(ca){ca=
R(ca).children();var na=ca[0];ca.data("foundation-layout-collection.internal.columnviewLoaded",G.data("foundation-layout-collection.internal.columnviewLoaded"));ca.data("foundation-layout-collection.internal.reloaded",!0);ca.replaceAll(G);ca.trigger("foundation-contentloaded");return na})},function(){var X=R(n).adaptTo("foundation-ui"),ca=Granite.I18n.get("Error"),na=Granite.I18n.get("Fail to load data.");X.alert(ca,na,"error")})}function aa(v,z,G,C,B){z=G.trackingElement;"navigate"===v&&B&&B.columnId?
z=B.columnId:"change"===v&&B&&B.parentColumnId&&(z=B.parentColumnId);v={element:z||"No element defined",type:"columnview",action:v,widget:{name:G.trackingElement||G.name||"foundation-layout-columnview",type:"columnview"},feature:G.trackingFeature||"No feature defined",attributes:B||{}};R(n).adaptTo("foundation-tracker").trackEvent(v)}function E(v){var z=v.collection,G=v.collectionEl,C=function(B,K,X){B._foundationLayoutColumnview||K!==ea.DEFAULT||G.dataset.foundationModeGroup!==X||(B=m(G),v.bulkSelection=
!0,q(B,void 0),v.bulkSelection=!1,x(G),z.trigger("foundation-selections-change"),aa("change",z,v.config,null,{method:"modeChange"}))};R(document).on("foundation-mode-change",C);return function(){R(document).off("foundation-mode-change",C)}}function M(v){var z=v.collection,G=v.collectionEl,C=function(K){var X=K.originalEvent.detail.selection?K.originalEvent.detail.selection:[];K=K.originalEvent.detail.oldSelection?K.originalEvent.detail.oldSelection:[];q(K,!0);k(X,!0);if(!v.bulkSelection){if(0<X.length){var ca=
G.dataset.foundationCollectionId;(G.activeItem?G.activeItem.dataset.foundationCollectionItemId:e(G)[0].dataset.foundationLayoutColumnviewColumnid)!==ca?v.delaySelectionEvent={newSelectedItems:X,oldSelectedItems:K}:(V(G,!1,X,K),z.trigger("foundation-selections-change"),aa("change",z,v.config,null,{method:"handleSelection"}))}else V(G,!1,X,K),z.trigger("foundation-selections-change"),aa("change",z,v.config,null,{method:"handleSelection"});1===X.length&&"single"!==G.dataset.foundationSelectionsMode?
Z(v,X[0]):x(G)}},B=function(){(document.activeElement===G||G.contains(document.activeElement))&&z.adaptTo("foundation-selections").clear()};z.on("coral-columnview:change",C);Coral.keys.on("escape",B);return function(){z.off("coral-columnview:change",C);Coral.keys.off("escape",B)}}function N(v){var z=v.collection,G=v.collectionEl,C=function(B){L(G,B.originalEvent.detail.column.dataset.foundationLayoutColumnviewColumnid);z.trigger("foundation-collection-navigate");aa("navigate",z,v.config);z.trigger("foundation-selections-change");
aa("change",z,v.config,null,{method:"handleNavigation"});if(B=v.delaySelectionEvent)v.delaySelectionEvent=null,V(G,!1,B.newSelectedItems,B.oldSelectedItems)};z.on("coral-columnview:navigate",C);return function(){z.off("coral-columnview:navigate",C)}}function I(v){var z=v.collection,G=v.collectionEl,C=G.dataset.foundationCollectionSrc;F(v);var B=function(K){K=K.originalEvent.detail;var X=K.column,ca=K.item;ca?"drilldown"!==ca.variant?ha(v,ca):ba(v,ca):Y(v,X,K.start)};C&&(G=A(G),P(v,G),O(G).start());
z.on("coral-columnview:loaditems",B);return function(){z.off("coral-columnview:loaditems",B)}}function Q(v,z){var G=v.collection,C=z.sortBy,B=z.sortOrder;z=v.collectionEl.dataset.foundationCollectionId;var K=R(n).adaptTo("foundation-ui");K.wait();return ia(v,z).always(function(){K.clearWait();aa("sort",G,v.config,null,{sortBy:C,sortOrder:B})})}var R=h,ea={SELECTION:"selection",DEFAULT:"default"},da=new WeakMap,W=new WeakMap;h=R(n).adaptTo("foundation-registry");h.register("foundation.layouts",{name:"foundation-layout-columnview",
doLayout:function(v,z){var G=R(v);if(v.classList.contains("foundation-collection")&&!da.has(v)){var C=!1;G.data("foundation-layout-collection.internal.reloaded")&&(C=G.data("foundation-layout-collection.internal.reloaded"));C={collectionEl:v,collection:G,config:z,bulkSelection:!1,reloaded:C,initialLoadEventTriggered:!1,stack:[]};da.set(v,C);aa("init",G,z);var B=G.data("foundation-layout-collection-switcher.internal.selectionIds");if(B){var K=d(v).filter(function(X){return 0<=B.indexOf(X.dataset.foundationCollectionItemId)});
k(K)}C.stack.push(E(C));C.stack.push(N(C));C.stack.push(M(C));C.stack.push(I(C));requestAnimationFrame(function(){V(v,!0);G.trigger("foundation-selections-change");aa("change",G,z,null,{method:"init"});G.trigger("foundation-collection-sort:changed")})}},clean:function(v,z){R(v).siblings(".granite-collection-loading-title-wrapper").remove();if(z=da.get(v))da.delete(v),Granite.UI.Foundation.Utils.everyReverse(z.stack,function(G){G&&G();return!0});Granite.UI.Foundation.Layouts.clean(v)}});h.register("foundation.adapters",
{type:"foundation-collection",selector:".foundation-layout-columnview.foundation-collection",adapter:function(v){var z=da.get(v),G=z.config,C=z.collection;C.data("foundation-layout-collection.internal.columnviewLoaded",!0);return{append:function(B){var K=A(v),X=R(K);K&&(Array.prototype.forEach.call(B,function(ca){K.items.add(ca)}),X.trigger("foundation-contentloaded"),0<B.length&&b(v)&&y(z,K).then(function(){C.trigger("foundation-selections-change");aa("change",C,G,null,{method:"append"})}))},clear:function(){var B=
A(v);B&&B.items.clear()},getPagination:function(){var B=A(v);return(B=W.get(B))?{offset:B.offset,limit:B.limit,hasNext:B.hasNext,guessTotal:-1}:null},load:function(B){var K=u(v,B);if(K)C.data("foundation-layout-collection.internal.columnviewLoaded")?(C.trigger("foundation-collection-reload"),aa("reload",C,G)):C.data("foundation-layout-collection.internal.columnviewLoaded",!0),K.click();else{K=w(v,B);if(!K)return ia(z,B);z.bulkSelection=!0;K=d(K);var X=m(v);K.forEach(function(ca){ca.selected=!1;ca.active=
!1});z.bulkSelection=!1;C.data("foundation-layout-collection.internal.columnviewLoaded")?(C.trigger("foundation-collection-reload"),aa("reload",C,G)):C.data("foundation-layout-collection.internal.columnviewLoaded",!0);L(v,B);C.trigger("foundation-collection-navigate");aa("navigate",C,G,null,{columnId:B});C.trigger("foundation-selections-change");aa("change",C,G,null,{method:"load"});V(v,!1,[],X)}return R.when(v)},isAllLoaded:function(){var B=this.getPagination();return B?0<r(v).length?!1:!1===B.hasNext:
!0},reload:function(){C.data("foundation-layout-collection.internal.columnviewLoaded",!0);return U(z,v.dataset.foundationCollectionId)}}}});h.register("foundation.adapters",{type:"foundation-collection-meta",selector:".foundation-layout-columnview.foundation-collection",adapter:function(v){return{getElement:function(){var z=A(v,!0);return z?z.querySelector(".foundation-collection-meta"):null},getTitle:function(){var z=this.getElement();return z?z.dataset.foundationCollectionMetaTitle:null},getThumbnail:function(){var z=
this.getElement();return z?z.querySelector(".foundation-collection-meta \x3e .foundation-collection-meta-thumbnail"):null},isFolder:function(){var z=this.getElement();return z?"true"===z.dataset.foundationCollectionMetaFolder:!1},getRelationship:function(){var z=this.getElement();return z?z.dataset.foundationCollectionMetaRel:null}}}});h.register("foundation.adapters",{type:"foundation-selections",selector:".foundation-layout-columnview.foundation-collection",adapter:function(v){var z=da.get(v),G=
z.config,C=z.collection;return{count:function(){if(b(v)){var B=C.adaptTo("foundation-collection").getPagination();if(B&&-1!==B.guessTotal){var K=A(v);K=K?p(K):0;return B.guessTotal-K}}return m(v).length},selectAll:function(B){var K=A(v);if(K){var X=d(K);t(z,K);1===X.length&&"single"!==v.dataset.foundationSelectionsMode?Z(z,X[0]):x(v);y(z,K).then(function(){V(v,!1,m(K),[]);B||(C.trigger("foundation-selections-change"),aa("change",C,G,null,{method:"selectAll"}))})}},isAllSelected:function(){var B=A(v);
if(B){var K=d(B).length,X=m(v).length;if(0<K&&K===X)return B="false"!==B.dataset.foundationLayoutColumnviewHasmore,b(v)?!0:!B}return!1},clear:function(B){var K=m(v),X=m(v);z.bulkSelection=!0;q(X,void 0);z.bulkSelection=!1;x(v);V(v,!1,[],K);B||(C.trigger("foundation-selections-change"),aa("change",C,G,null,{method:"clear"}))},select:function(B){c(B)&&(B.selected=!0)},deselect:function(B){c(B)&&(B.selected=!1)}}}});h.register("foundation.adapters",{type:"foundation-collection-sort",selector:".foundation-layout-columnview.foundation-collection",
adapter:function(v){var z=da.get(v),G=z.collection;return{isSorted:function(C,B){var K=this.getSortValues();return K.sortBy===C&&K.sortOrder===B?!0:!1},getSortValues:function(){return{sortBy:v.dataset.foundationCollectionSortby||null,sortOrder:v.dataset.foundationCollectionSortorder||null}},doSort:function(C,B){C&&B||(C=B=null);if(!this.isSorted(C,B)){null===C&&null===B?(delete v.dataset.foundationCollectionSortby,delete v.dataset.foundationCollectionSortorder):(v.dataset.foundationCollectionSortby=
C,v.dataset.foundationCollectionSortorder=B);var K=R.Event("foundation-collection-sort:beforeChange",{sortName:C,sortDir:B});G.trigger(K);Q(z,{sortBy:C,sortOrder:B}).then(function(){G.trigger("foundation-collection-sort:changed")});return!0}return!1}}}})})(window,Granite.$,Granite.URITemplate);
(function(n,h,a,f,c){function b(D){var F=D.collection,J=function(O,S,P){O._foundationLayoutTable||"default"!==S||D.collectionEl.dataset.foundationModeGroup!==P||(D.bulkSelection=!0,F.find(".foundation-selections-item").each(function(V,Y){Y.selected=!1}),D.bulkSelection=!1,F.trigger("foundation-selections-change"),u("change",F,D.config,null,{method:"modeChange"}))};H(h).on("foundation-mode-change",J);return function(){H(h).off("foundation-mode-change",J)}}function d(D){var F=D.collection,J=D.collectionEl,
O=H(h.createElement("div")).addClass("foundation-ui-mask"),S=function(Y){if(!D.bulkLoading){Y=Y.originalEvent.detail;var fa=J.dataset.foundationSelectionsMode,ha=H(),Z=H();"single"===fa?(Y.oldSelection&&(Z=H(Y.oldSelection)),Y.selection&&(ha=H(Y.selection))):(Z=H(Y.oldSelection),ha=H(Y.selection));Z.removeClass("foundation-selections-item");ha.addClass("foundation-selections-item");Y="true"===J.dataset.foundationSelectionsSelectallMode;var ba=function(){e(F,!1,ha,Z);F.trigger("foundation-selections-change");
u("change",F,D.config,null,{method:"handleSelection"})};D.bulkSelection||Y?Y&&ba():D.lazyLoader&&0<F.has(".foundation-collection-item.is-lazyLoaded,.foundation-collection-item.is-pending").length?(D.bulkLoading=!0,O.appendTo(h.body),D.lazyLoader.loadItems(ha.toArray()).then(function(U){var ia=U.length-1;U.forEach(function(aa,E){aa.set("selected",!0,E!==ia);aa.classList.add("foundation-selections-item")});q(F);D.bulkLoading=!1;ba();O.detach()})):ba()}},P=function(){(h.activeElement===J||J.contains(h.activeElement))&&
F.adaptTo("foundation-selections").clear()};F.on("coral-table:change",S);Coral.keys.on("escape",P);var V=F.find("[coral-table-select]").on("change.foundation-layout-table",function(Y){Y.stopPropagation();Y=F.adaptTo("foundation-selections");this.checked?(J.dataset.foundationSelectionsSelectallMode="true",Y.selectAll()):Y.clear()});return function(){F.off("coral-table:change",S);Coral.keys.off("escape",P);V.off("change.foundation-layout-table")}}function e(D,F,J,O){var S=D[0].dataset.foundationModeGroup;
if(S){J=J?J.length:D.adaptTo("foundation-selections").count();O=O?O.length:0;var P=function(V){var Y=H.Event("foundation-mode-change");Y._foundationLayoutTable=!0;D.trigger(Y,[V,S])};(0===O||F)&&0<J?P("selection"):(0<O||F)&&0===J&&P("default")}}function g(D){var F=D.collection,J=D.collectionEl,O=function(S){if(J===S.target){var P=S.originalEvent.detail,V=P.column.dataset.foundationLayoutTableColumnName;a:{switch(P.direction||P.sortableDirection){case Coral.Table.Column.sortableDirection.DESCENDING:P=
"desc";break a;case Coral.Table.Column.sortableDirection.ASCENDING:P="asc";break a;case Coral.Table.Column.sortableDirection.DEFAULT:P=null;break a}P=void 0}F.adaptTo("foundation-collection-sort").doSort(V,P)&&S.preventDefault()}};J.dataset.foundationCollectionSortby&&J.dataset.foundationCollectionSortorder&&requestAnimationFrame(function(){x(J,J.dataset.foundationCollectionSortby,J.dataset.foundationCollectionSortorder)});F.on("coral-table:beforecolumnsort",O);return function(){F.off("coral-table:beforecolumnsort",
O)}}function m(D){var F=D.collection,J=D.collectionEl,O=J.dataset.foundationCollectionSrc;if(O){var S=function(V){var Y=H(n).adaptTo("foundation-util-paginator"),fa;D.paginator=new Y({el:V[0],limit:D.config.limit||20,size:D.config.size,wait:function(){J.dataset.graniteCollectionIsLoading="true";return{clear:function(){J.dataset.graniteCollectionIsLoading="false"}}},resolveURL:function(Z){var ba=F.adaptTo("foundation-collection-sort").getSortValues();return c.expand(O,{offset:Z.offset,limit:Z.limit,
size:Z.size,id:J.dataset.foundationCollectionId,sortName:ba.sortBy,sortDir:ba.sortOrder})},processResponse:function(Z,ba){var U=H.Deferred();J.dataset.graniteCollectionIsLoading="true";p(ba).then(function(ia){var aa=ia.items;fa=H.Deferred();l(D,F,D.config,aa,fa.promise());ia=ia.hasMore;void 0===ia&&(ia=aa.length>=Z.limit);J.dataset.graniteCollectionIsLoading="false";U.resolve({length:aa.length,hasNext:ia})});return U.promise()},onNewPage:function(){F.trigger("foundation-collection-newpage");u("newpage",
F,D.config);fa.resolve()}});Y=F.find(".foundation-collection-item").length;var ha="false"!==J.dataset.foundationLayoutTableHasmore;J.resetLayout(!0);D.paginator.start(Y,ha,!1,500);Y=H(n).adaptTo("foundation-collection-lazyloader");D.lazyLoader=new Y({scrollSrc:V[0],getItems:function(){return J.items.getAll()},load:function(Z,ba){Z=F.adaptTo("foundation-collection-sort").getSortValues();ba=c.expand(O,{offset:ba.offset,limit:ba.limit,size:ba.size,id:J.dataset.foundationCollectionId,sortName:Z.sortBy,
sortDir:Z.sortOrder});return H.ajax(ba).then(function(U){return p(U)}).then(function(U){return U.items})},onReplace:function(){y(F);F.trigger("foundation-contentloaded")},setupListeners:function(Z,ba){F.on("foundation-collection-navigate",ba);F.on("coral-table:columnsort",ba);return function(){F.off("foundation-collection-navigate",ba);F.off("coral-table:columnsort",ba)}}});D.lazyLoader.start()},P=F.children("[coral-table-scroll]");J.scrollContainer=P[0];P.length?S(P):requestAnimationFrame(function(){S(F.children("[coral-table-scroll]"))});
return function(){D.paginator&&D.paginator.destroy();D.lazyLoader&&D.lazyLoader.destroy()}}}function p(D){return H(n).adaptTo("foundation-util-htmlparser").parse(D).then(function(F){var J=H(F).children();if(J.hasClass("foundation-collection"))return F=J.find(".foundation-collection-item").toArray(),J=J[0].dataset.foundationLayoutTableHasmore,"true"===J?J=!0:"false"===J&&(J=!1),{items:F,hasMore:J}})}function l(D,F,J,O,S){F.find("tbody").append(O);Promise.resolve().then(function(){if(O.length&&"true"===
F[0].dataset.foundationSelectionsSelectallMode){O.forEach(function(V){V.classList.contains("is-lazyLoaded")||V.classList.contains("is-pending")||(V.set("selected",!0,!0),V.classList.add("foundation-selections-item"))});var P=H.when();D.lazyLoader&&(P=D.lazyLoader.loadItems(O).then(function(V){var Y=H.Deferred();Promise.resolve().then(function(){y(F);q(F);t(F);V.forEach(function(fa){fa.set("selected",!0,!0);fa.classList.add("foundation-selections-item")});Y.resolve()});return Y.promise()}));H.when(P,
S).then(function(){F.trigger("foundation-selections-change");u("change",F,J,null,{method:"append"})})}y(F);q(F);t(F);F.trigger("foundation-contentloaded")})}function r(D){var F=D.collection,J=function(S){F.adaptTo("foundation-collection-item-action").execute(S)},O=function(S){var P=H(S.target).closest("[coral-table-rowselect], button, a, .foundation-collection-item");P.hasClass("foundation-layout-table-cellwrapper")?1!==S.which||S.metaKey||S.shiftKey||S.altKey||(S.preventDefault(),J(P.closest(".foundation-collection-item")[0])):
P.hasClass("foundation-collection-item")&&(S.preventDefault(),J(P[0]))};F.on("click",".foundation-collection-item",O);return function(){F.off("click",".foundation-collection-item",O)}}function k(D){var F=D.collection,J=function(O){var S=O.originalEvent.detail,P=S.row;O=S.before;var V=S.oldBefore;if(S=D.config.rowReorderAction){var Y=(O=O?O.dataset.foundationCollectionItemId:void 0)?O.substring(O.lastIndexOf("/")+1):void 0;Y=S=c.expand(S,{item:P.dataset.foundationCollectionItemId,before:O,beforeName:Y});
var fa=S.indexOf("?");if(0<=fa){Y=S.substring(0,fa);var ha=S.substring(fa+1)}u("roworder",F,D.config,null,{before:O});var Z=H(n).adaptTo("foundation-ui");Z.wait();H.ajax({url:Y,method:"POST",data:ha}).always(function(){Z.clearWait();F.trigger("foundation-collection-reload");u("reload",F,D.config)}).fail(function(){var ba=a.I18n.get("Error"),U=a.I18n.get("Fail to reorder.");Z.alert(ba,U,"error");V?H(P).insertBefore(V):P.parentElement.appendChild(P)})}};F.on("coral-table:roworder",J);return function(){F.off("coral-table:roworder",
J)}}function q(D){D.find("col[is\x3dcoral-table-column]").each(function(F,J){F+=1;var O=J.getAttribute("alignment");D.find("th[is\x3dcoral-table-headercell]:nth-child("+F+"), td[is\x3dcoral-table-cell]:nth-child("+F+")").each(function(){var S=this.getAttribute("alignment");S&&"column"!==S||this.setAttribute("alignment",O)})})}function t(D){D.find("td[is\x3dcoral-table-cell][coral-table-rowselect]").length&&D.attr("variant","list")}function y(D){var F=h.querySelector(".granite-collection-pagetitle");
D.find("tr.foundation-collection-navigator").each(function(){var J=H(this);J.children("td:not([coral-table-rowselect]):not(:has([coral-table-rowselect]))").first().wrapInner(function(){if(!H(this).find("a").length){var O=h.createElement("a");O.className="foundation-layout-table-cellwrapper";var S=J[0].dataset.foundationCollectionNavigatorHref;if(S)O.target=J[0].dataset.foundationCollectionNavigatorTarget;else{if(!F||!D.is(F.dataset.graniteCollectionPagetitleTarget))return;S=c.expand(F.dataset.graniteCollectionPagetitleSrc,
{id:J.closest(".foundation-collection-item")[0].dataset.foundationCollectionItemId})}O.href=S;return H(O)}})})}function u(D,F,J,O,S){F="table";O=J.trackingElement;"change"===D?F="table-row":"roworder"===D?F="table-row":"sort"===D&&(F="table-column",O=S.sortBy);D={element:O||"No element defined",type:F,action:D,widget:{name:J.trackingElement||J.name||"foundation-layout-table",type:"table"},feature:J.trackingFeature||"No feature defined",attributes:S||{}};H(n).adaptTo("foundation-tracker").trackEvent(D)}
function w(D){switch(D){case "desc":return Coral.Table.Column.sortableDirection.DESCENDING;case "asc":return Coral.Table.Column.sortableDirection.ASCENDING;case "default":case null:return Coral.Table.Column.sortableDirection.DEFAULT}}function A(D,F,J){var O=D.collectionEl,S=D.collection,P=F.sortBy;F=F.sortOrder;if(J){D=w(F);P=O.querySelector("colgroup \x3e col[is\x3d'coral-table-column'][data-foundation-layout-table-column-name\x3d'"+P+"']");if(!P||!h.body.contains(P)||P.sortableDirection===D)return H.Deferred().reject();
P.sortableDirection=D;return H.Deferred().resolve()}var V=D.paginator;J=O.dataset.foundationCollectionSrc;var Y=H(n).adaptTo("foundation-ui");J=c.expand(J,{offset:0,limit:V.limit,size:V.size,id:O.dataset.foundationCollectionId,sortName:P,sortDir:F});fa&&fa.abort();var fa=H.ajax({url:J,cache:!1});Y.wait();u("sort",S,D.config,null,{sortBy:P,sortOrder:F});return fa.then(function(ha){p(ha).then(function(Z){var ba=Z.items,U=S.adaptTo("foundation-collection");Z=Z.hasMore;U.clear();U.append(ba);void 0===
Z&&(Z=ba.length>=V.limit);O.resetLayout(!0);V.restart(ba.length,Z)})},function(ha,Z){"abort"!==Z&&(ha=a.I18n.get("Error"),Z=a.I18n.get("Fail to load data."),Y.alert(ha,Z,"error"))}).always(function(){Y.clearWait()})}function x(D,F,J){J=w(J);(D=D.querySelector("colgroup \x3e col[is\x3d'coral-table-column'][data-foundation-layout-table-column-name\x3d'"+F+"']"))&&h.body.contains(D)&&D.sortableDirection!==J&&(F=D.sortableType,D.sortableType="custom",D.sortableDirection=J,D.sortableType=F)}function L(D,
F,J,O){var S=D.config,P=D.collection,V=D.collectionEl;D=V.dataset.foundationCollectionSrc;var Y=S.size;if(!D)return H.Deferred().reject().promise();J||(J=S&&S.limit||20);var fa=P.adaptTo("foundation-collection-sort").getSortValues();F=c.expand(D,{offset:0,limit:J,size:Y,id:F,sortName:fa.sortBy,sortDir:fa.sortOrder});return H.ajax({url:F,cache:!1}).then(function(ha){var Z=H.Deferred();H(n).adaptTo("foundation-util-htmlparser").parse(ha).then(function(ba){var U=H(ba).children();U.hasClass("foundation-collection")?
(O&&(ba=P.find(".foundation-selections-item").map(function(){return this.dataset.foundationCollectionItemId}).toArray(),U.data("foundation-layout-collection-switcher.internal.selectionIds",ba)),P.trigger("foundation-collection-reload"),u("reload",P,S),U.data("foundation-layout-collection.internal.columnviewLoaded",!0),a.UI.Foundation.Layouts.cleanAll(V),U.replaceAll(P),requestAnimationFrame(function(){U.trigger("foundation-collection-navigate");u("navigate",P,S)}),U.trigger("foundation-contentloaded"),
O&&U.removeData("foundation-layout-collection-switcher.internal.selectionIds"),Z.resolve(U[0])):Z.reject(Error("Invalid content"))});return Z.promise()},function(){var ha=a.I18n.get("Error"),Z=a.I18n.get("Fail to load data.");H(n).adaptTo("foundation-ui").alert(ha,Z,"error")})}var H=f,T=new WeakMap;f=H(n).adaptTo("foundation-registry");f.register("foundation.layouts",{name:"foundation-layout-table",doLayout:function(D,F){var J=H(D);if(J.hasClass("foundation-collection")&&!T.has(D)){var O={collectionEl:D,
collection:J,config:F,stack:[],bulkSelection:!1,bulkLoading:!1};T.set(D,O);if(O.collectionEl.hasAttribute("selectable")){var S=J.data("foundation-layout-collection-switcher.internal.selectionIds");S&&J.find(".foundation-collection-item").filter(function(){return 0<=S.indexOf(this.dataset.foundationCollectionItemId)}).each(function(){H(this).attr("selected","").addClass("foundation-selections-item")})}var P=J.find("[data-foundation-layout-table-column-name]").toArray();D=P.map(function(V){return V.dataset.foundationLayoutTableColumnName}).join(",");
P=P.filter(function(V){return V.hidden}).map(function(V){return V.dataset.foundationLayoutTableColumnName}).join(",");u("init",J,F,null,{columns:D,hiddenColumns:P});O.stack.push(b(O));O.stack.push(d(O));O.stack.push(g(O));O.stack.push(m(O));O.stack.push(r(O));O.stack.push(k(O));y(J);t(J);q(J);requestAnimationFrame(function(){e(J,!0);J.trigger("foundation-collection-newpage");u("newpage",J,F);J.trigger("foundation-selections-change");u("change",J,F,null,{method:"init"});J.trigger("foundation-collection-sort:changed")})}},
clearItems:function(D){D.items.clear()},clean:function(D,F){if(F=T.get(D))T.delete(D),a.UI.Foundation.Utils.everyReverse(F.stack,function(J){J&&J();return!0});a.UI.Foundation.Layouts.clean(D)}});f.register("foundation.adapters",{type:"foundation-collection",selector:".foundation-layout-table.foundation-collection",adapter:function(D){var F=T.get(D),J=F.collection,O=F.collectionEl,S=F.config;return{append:function(P){l(F,J,S,P)},clear:function(){J.find(".foundation-collection-item").remove()},getPagination:function(){var P=
F.paginator;if(!P)return null;var V=parseInt(J.attr("data-foundation-layout-table-guesstotal")||"-1",10);return{offset:P.offset,limit:P.limit,guessTotal:-1===V?V:Math.max(P.offset,V),hasNext:-1===V?P.hasNext:P.offset>=V?P.hasNext:null}},isAllLoaded:function(){var P;var V=H(D);(P=V.adaptTo("foundation-collection").getPagination())?(V=V.find(".foundation-collection-item"),P=V.is(".is-lazyLoaded, .is-pending")?!1:null===P.hasNext&&-1!==P.guessTotal?!(P.guessTotal>V.length):!1===P.hasNext):P=!0;return P},
load:function(P){return L(F,P)},reload:function(){var P=this.getPagination();if(P)var V=P.offset;return L(F,O.dataset.foundationCollectionId,V,!0)}}}});f.register("foundation.adapters",{type:"foundation-collection-meta",selector:".foundation-layout-table.foundation-collection",adapter:function(D){var F=H(D).find("\x3e caption \x3e .foundation-collection-meta"),J=F[0];return J?{getElement:function(){return J},getTitle:function(){return J.dataset.foundationCollectionMetaTitle},getThumbnail:function(){return F.children(".foundation-collection-meta-thumbnail")[0]},
isFolder:function(){return"true"===J.dataset.foundationCollectionMetaFolder},getRelationship:function(){return J.dataset.foundationCollectionMetaRel}}:null}});f.register("foundation.adapters",{type:"foundation-selections",selector:".foundation-layout-table.foundation-collection",adapter:function(D){var F=T.get(D),J=F.collection,O=F.collectionEl,S=F.config;return{count:function(){if("true"===O.dataset.foundationSelectionsSelectallMode){var P=J.adaptTo("foundation-collection").getPagination();if(P&&
-1!==P.guessTotal){var V=J.find(".foundation-collection-item:not(.foundation-selections-item)").length;return P.guessTotal-V}}return J.find(".foundation-selections-item").length},selectAll:function(P){F.bulkSelection=!0;var V=J.find(".foundation-selections-item"),Y=J.find(".foundation-collection-item:not(.foundation-selections-item):not(.is-lazyLoaded):not(.is-pending)").each(function(ba){0<ba&&this.set("selected",!0,!0)}),fa=V.add(Y),ha=J.find(".foundation-collection-item.is-lazyLoaded,.foundation-collection-item.is-pending");
if(ha.length){var Z=H(h.createElement("div")).addClass("foundation-ui-mask").append('\x3ccoral-wait size\x3d"L" centered\x3e\x3c/coral-wait\x3e');Z.appendTo(h.body);F.lazyLoader.loadItems(ha.toArray()).then(function(ba){Promise.resolve().then(function(){ba.forEach(function(U){U.set("selected",!0,!0);U.classList.add("foundation-selections-item")});Y.first().prop("selected",!0);F.bulkSelection=!1;e(J,!1,J.find(".foundation-selections-item"),V);P||(J.trigger("foundation-selections-change"),u("change",
J,S,null,{method:"selectAll"}));Z.detach()})})}else Y.first().prop("selected",!0),F.bulkSelection=!1,e(J,!1,fa,V),P||(J.trigger("foundation-selections-change"),u("change",J,S,null,{method:"selectAll"}))},isAllSelected:function(){var P="true"===O.dataset.foundationSelectionsSelectallMode,V=J.adaptTo("foundation-collection").getPagination();V=V?V.hasNext:!1;var Y=J.find(".foundation-collection-item").length,fa=J.find(".foundation-selections-item").length;return 0<Y&&Y===fa?P?!0:!V:!1},clear:function(P){F.bulkSelection=
!0;var V=J.find(".foundation-selections-item").each(function(Y){0<Y&&this.set("selected",!1,!0)});V.first().prop("selected",!1);F.bulkSelection=!1;e(J,!1,H(),V);P||(J.trigger("foundation-selections-change"),u("change",J,S,null,{method:"selectAll"}))},select:function(P){H(P).hasClass("foundation-collection-item")&&(P.selected=!0)},deselect:function(P){H(P).hasClass("foundation-collection-item")&&(P.selected=!1)}}}});f.register("foundation.adapters",{type:"foundation-collection-sort",selector:".foundation-layout-table.foundation-collection",
adapter:function(D){var F=H(D),J=T.get(D);return{isSorted:function(O,S){var P=this.getSortValues();return P.sortBy===O&&P.sortOrder===S?!0:!1},getSortValues:function(){return{sortBy:D.dataset.foundationCollectionSortby||null,sortOrder:D.dataset.foundationCollectionSortorder||null}},doSort:function(O,S,P){P=P?P:O;O&&S||(O=S=null);if(!this.isSorted(O,S)&&"remote"===J.config.sortMode){null===O&&null===S?(delete D.dataset.foundationCollectionSortby,delete D.dataset.foundationCollectionSortorder):(D.dataset.foundationCollectionSortby=
O,D.dataset.foundationCollectionSortorder=S);var V={sortBy:O,sortOrder:S};O=H.Event("foundation-collection-sort:beforeChange",{sortName:O,sortDir:S});F.trigger(O);A(J,V,!1).fail(function(){}).then(function(){F.trigger("foundation-collection-sort:changed")});x(D,P,S);return!0}return!1}}}})})(window,document,Granite,Granite.$,Granite.URITemplate);
(function(n,h,a){function f(c){if(c&&c.getLabelledBy)return c.getLabelledBy()}h(n).adaptTo("foundation-registry").register("foundation.validation.validator",{selector:".foundation-layout-actionfield-field",show:function(c,b){var d=h(c),e=d.closest(".coral-Form-field");(c=d.adaptTo("foundation-field"))&&c.setInvalid&&c.setInvalid(!0);e.nextAll(".coral-Form-fieldinfo").addClass("u-coral-screenReaderOnly");var g=d.data("foundation-validation.internal.error");if(g){var m=h(g).data("foundation-validation.internal.error.tooltip");
m.content.innerHTML=b;g.parentNode||(d.after(g,m),b=f(c),m=m.id,c&&c.setLabelledBy&&c.setLabelledBy(b?b+" "+m:m))}else g=new a.Icon,g.icon="alert",g.classList.add("coral-Form-fielderror"),m=new a.Tooltip,m.variant="error",m.placement=e.closest("form").hasClass("coral-Form--vertical")?"left":"bottom",m.target=g,m.content.innerHTML=b,m.id=a.commons.getUID(),h(g).data("foundation-validation.internal.error.tooltip",m),g.setAttribute("aria-labelledby",m.id),g.setAttribute("tabindex",0),d.data("foundation-validation.internal.error",
g),d.after(g,m),b=f(c),m=m.id,c&&c.setLabelledBy&&c.setLabelledBy(b?b+" "+m:m)},clear:function(c){var b=h(c);c=b.closest(".coral-Form-field");var d=b.adaptTo("foundation-field");d&&d.setInvalid&&d.setInvalid(!1);if(b=b.data("foundation-validation.internal.error")){var e=h(b).data("foundation-validation.internal.error.tooltip");e.hide();e.remove();b.remove();(b=f(d))&&-1!==b.indexOf(e.id)&&(b=b.split(" ").filter(function(g){return g!==e.id}).join(" "),d&&d.setLabelledBy&&d.setLabelledBy(b))}c.nextAll(".coral-Form-fieldinfo").removeClass("u-coral-screenReaderOnly")}})})(window,
Granite.$,Coral);
(function(n,h,a){var f=a(n).adaptTo("foundation-registry"),c=Granite.UI.Foundation.Utils.debounce;a(h).on("foundation-contentloaded",function(b){a(".foundation-layout-panel-rail-activate-panel").each(function(){a(this).removeClass("foundation-layout-panel-rail-activate-panel").find("coral-panel[selected]").trigger("foundation-toggleable-show")});a(".foundation-container-resizable").each(function(){var d=a(this),e=this.parentElement,g=d.adaptTo("foundation-container-resizable"),m=d.next(".foundation-layout-panel-content"),
p=new Number(m[0].dataset.graniteLayoutContentMinWidth);isNaN(p)||g.initialize();g.registerEvent(this,"foundation-toggleable-show",function(){d.css("margin-left",0)},!0);g.registerEvent(this,"foundation-toggleable-hide",function(){d.css("margin-left",-g.width)},!0);var l=this.dataset.graniteLayoutPanelSaveKey;l&&g.registerEvent(this,"foundation-resize-end",function(){a.cookie(l,g.width,{expires:7,path:"/"})});var r=c(function(){a.cookie(l,g.width,{expires:7,path:"/"})},200),k=function(){n.requestAnimationFrame(function(){var q=
m.width();q<=p&&(g.setWidth(q-p),r());g.maxWidth=Math.max(g.minWidth,e.offsetWidth-p)})};k();Coral.commons.addResizeListener(m[0],k)})});f.register("foundation.adapters",{type:"foundation-toggleable",selector:".foundation-layout-panel-rail.foundation-toggleable",adapter:function(b){var d=a(b);return{isOpen:function(){return b.classList.contains("foundation-layout-panel-rail-active")},show:function(e){b.classList.add("foundation-layout-panel-rail-active");d.trigger("foundation-toggleable-show")},hide:function(){b.classList.remove("foundation-layout-panel-rail-active");
d.find("\x3e coral-panelstack \x3e coral-panel.foundation-layout-panel-rail-panel[selected]").prop("selected",!1).trigger("foundation-toggleable-hide");d.trigger("foundation-toggleable-hide")}}}});f.register("foundation.adapters",{type:"foundation-toggleable",selector:"coral-panel.foundation-layout-panel-rail-panel.foundation-toggleable",adapter:function(b){var d=a(b);return{isOpen:function(){return b.selected&&d.closest(".foundation-layout-panel-rail").adaptTo("foundation-toggleable").isOpen()},
show:function(e){e=d.parent("coral-panelstack")[0].selectedItem;b.selected=!0;var g=d.closest(".foundation-layout-panel-rail");g.addClass("foundation-layout-panel-rail-active");e&&a(e).trigger("foundation-toggleable-hide");d.trigger("foundation-toggleable-show");g.trigger("foundation-toggleable-show")},hide:function(){b.selected=!1;var e=d.closest(".foundation-layout-panel-rail");e.removeClass("foundation-layout-panel-rail-active");d.trigger("foundation-toggleable-hide");e.trigger("foundation-toggleable-hide")}}}});
a(h).on("foundation-toggleable-show","coral-panel.foundation-layout-panel-rail-panel",function(b){if(b=this.dataset.foundationLayoutPanelRailPanelSrc){var d=a(this);d.data("foundation-layout-panel-rail-panel.internal.loaded")||(d.data("foundation-layout-panel-rail-panel.internal.loaded",!0),a.ajax({url:b,cache:!1}).done(function(e){a(n).adaptTo("foundation-util-htmlparser").parse(e).then(function(g){a(d[0].content).html("").append(g);d.trigger("foundation-contentloaded")})}).fail(function(){var e=
Granite.I18n.get("Error"),g=Granite.I18n.get("Something went wrong.");a(n).adaptTo("foundation-ui").alert(e,g,"error")}))}})})(window,document,Granite.$);
(function(n,h,a){function f(b,d,e,g){this.container=b;this.active=!0;this.width=b.offsetWidth;this.minWidth=e||-1;this.maxWidth=g||Number.MAX_VALUE;this.listeners=[];this.resizeHandle=d;this._dragFn=this.drag.bind(this);this._endDragFn=this.endDrag.bind(this)}var c=a(n).adaptTo("foundation-registry");f.prototype.setWidth=function(b){this.width=Math.min(Math.max(this.minWidth,this.width+b),this.maxWidth);this.container.style.width=this.width+"px"};f.prototype.getEventPageX=function(b){if(b.pageX)return b.pageX;
if(b.touches&&b.touches.length)return b.touches[0].pageX};f.prototype.startDrag=function(b){this.active&&(b.stopPropagation(),this.addMoveListeners(),this.lastX=this.getEventPageX(b),h.body.classList.add("u-coral-closedHand"),this.container.classList.add("is-dragging"))};f.prototype.endDrag=function(b){this.drag(b);this.container.dispatchEvent(new CustomEvent("foundation-resize-end",{bubbles:!0}));this.removeMoveListeners();h.body.classList.remove("u-coral-closedHand");this.container.classList.remove("is-dragging")};
f.prototype.drag=function(b){this.active&&(b.stopPropagation(),requestAnimationFrame(function(){var d=Math.min(this.getEventPageX(b),n.outerWidth);this.setWidth(d-this.lastX);this.lastX=d}.bind(this)))};f.prototype.initialize=function(){this._initialized||(this.resizeHandle&&(this.registerEvent(this.resizeHandle,"mousedown",this.startDrag.bind(this)),this.registerEvent(this.resizeHandle,"touchstart",this.startDrag.bind(this))),this._initialized=!0)};f.prototype.addMoveListeners=function(){n.addEventListener("mouseup",
this._endDragFn);n.addEventListener("mousemove",this._dragFn);n.addEventListener("touchup",this._endDragFn);n.addEventListener("touchmove",this._dragFn)};f.prototype.removeMoveListeners=function(){n.removeEventListener("mousemove",this._dragFn);n.removeEventListener("mouseup",this._endDragFn);n.removeEventListener("touchup",this._endDragFn);n.removeEventListener("touchmove",this._dragFn)};f.prototype.dispose=function(){this.listeners.each(function(b){b.elem&&(b.useJquery?a(b.elem).off(b.eventName,
b.callback):b.elem.removeEventListener(b.eventName,b.callback))});this.container=this.resizeHandle=this.listeners=null};f.prototype.registerEvent=function(b,d,e,g){this.listeners.push({elem:b,eventName:d,callback:e,useJquery:g});g?a(b).on(d,e):b.addEventListener(d,e)};c.register("foundation.adapters",{type:"foundation-container-resizable",selector:".foundation-container-resizable",adapter:function(b){var d=new Number(b.dataset.graniteLayoutPanelMinWidth),e=b.querySelector(".foundation-container-resizable-handle");
isNaN(d)&&(d=-1);if(e&&("ontouchstart"in n||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints)){var g=h.createElement("div");g.classList.add("foundation-container-resizable-handle-drag");e.appendChild(g)}return new f(b,e,d)}})})(window,document,Granite.$);
(function(n,h){function a(e){var g=e.data("foundationAdvancedselectControlSrc");if(g){var m=e.closest(".foundation-advancedselect");if(m.length){var p=h(window).adaptTo("foundation-ui");p.wait();var l=m.find(".foundation-advancedselect-navigator"),r=m.find(".foundation-advancedselect-collection");h.ajax(g).done(function(k){var q=h(window).adaptTo("foundation-util-htmlparser");k=Granite.UI.Foundation.XSS.sanitizeHtml(k);q.parse(k).then(function(t){t=h(t.querySelectorAll(".foundation-advancedselect"));
var y=t.find(".foundation-advancedselect-navigator");l.replaceWith(y);var u=r.adaptTo("foundation-collection");m.data("foundation-advancedselect.internal.ignoreselectionevent",!0);u.clear();u.append(t.find(".foundation-collection-item").toArray());m.removeData("foundation-advancedselect.internal.ignoreselectionevent");f(m,y,r);m.trigger("foundation-contentloaded");p.clearWait()})}).fail(function(){p.clearWait();var k=Granite.I18n.get("Error"),q=Granite.I18n.get("Something went wrong.");p.alert(k,
q,"error")})}}}function f(e,g,m){g=g.data("foundationAdvancedselectNavigatorPath").toString();(g=(e.data("foundation-advancedselect.internal.values")||{})[g])&&g.each(function(p,l){e.find(".foundation-collection-item[data-foundation-collection-item-id]").each(function(){h(this).data("foundationCollectionItemId")===l.value&&m.adaptTo("foundation-selections").select(this)})})}function c(e,g){var m=e.find(".foundation-advancedselect-navigator");m=m.length?m.data("foundationAdvancedselectNavigatorPath").toString():
"_default";var p=e.data("foundation-advancedselect.internal.values");p||(p={},e.data("foundation-advancedselect.internal.values",p));p[m]&&p[m].remove();var l=e.data("foundationAdvancedselectName");e=e.find(".foundation-advancedselect-collection .foundation-selections-item").map(function(){var r=h(this),k=r.data("foundationCollectionItemId");k?r=h(n.createElement("input")).prop("type","hidden").prop("name",l).prop("value",k):(r=r.find("input.aria-value[type\x3dhidden]").clone(),r.prop("disabled",
!1),l&&!r.prop("name")&&r.prop("name",l));return r.appendTo(g)[0]});p[m]=e}h(n).on("click",".foundation-advancedselect-control",function(e){e.preventDefault();e=h(this);"foundation.navigate"===e.data("foundationAdvancedselectControlAction")&&a(e)});h(n).on("foundation-selections-change",".foundation-advancedselect",function(e){e=h(this);if(!e.data("foundation-advancedselect.internal.ignoreselectionevent")){var g=e.find(".foundation-advancedselect-values");c(e,g);var m=e.find(".foundation-advancedselect-status");
m.length&&(g=m.data("foundationAdvancedselectStatusTemplate").replace("{{count}}",g.children().length),m.html(g));if(e=e.adaptTo("foundation-validation"))e.checkValidity(),e.updateUI()}});var b=h(window).adaptTo("foundation-registry");b.register("foundation.validation.selector",{submittable:".foundation-advancedselect",candidate:".foundation-advancedselect",exclude:".foundation-advancedselect *"});var d;b.register("foundation.validation.validator",{selector:".foundation-advancedselect",validate:function(e){if("true"===
e.getAttribute("aria-required")&&0===h(e).find(".foundation-advancedselect-values \x3e *").length)return d||(d=Granite.I18n.get("Please fill out this field.")),d}})})(document,Granite.$);
(function(n,h){function a(c){c=c.children(":not(.foundation-nestedcheckboxlist)");return c.is("input:checkbox:not([disabled])")?c:c.find("input:checkbox:not([disabled])")}function f(c,b){var d=c.closest(".foundation-nestedcheckboxlist").closest("li.foundation-nestedcheckboxlist-item");if(d.length){c=Array.prototype.every.call(c.siblings("li.foundation-nestedcheckboxlist-item"),function(m){return a(h(m)).is(":checked")===b});var e=a(d),g=e.prop("indeterminate");c?g&&(e.prop({indeterminate:!1,checked:b}),
f(d,b)):g||(e.prop({indeterminate:!0,checked:!1}),f(d,b))}}h(n).on("change",".foundation-nestedcheckboxlist-item",function(c){c.stopPropagation();var b=h(this);if(!0!==b.closest(".foundation-nestedcheckboxlist").data("foundation-nestedcheckboxlist-disconnected")){c=h(c.target).prop("checked");var d=b.find(".foundation-nestedcheckboxlist");d.length&&!0===d.data("foundation-nestedcheckboxlist-disconnected")||(b.find("ul input:checkbox").prop({indeterminate:!1,checked:c}),f(b,c))}})})(document,Granite.$);
(function(n,h,a){h(n).on("foundation-contentloaded",function(f){Array.from(f.target.querySelectorAll(".betty-ActionBar")).forEach(function(c){var b=h(c);b.data("betty-ActionBar.internal.init")||(b.data("betty-ActionBar.internal.init",!0),a.commons.ready(c,function(){a.commons.addResizeListener(c,function(d){360>=c.getBoundingClientRect().width?c.classList.add("betty-ActionBar--collapsed"):c.classList.remove("betty-ActionBar--collapsed");c._debounceOnLayout()})}))})})})(document,Granite.$,Coral);
(function(n,h,a,f){function c(){var g=Reflect.construct(HTMLElement,[],this.constructor);g._construct();return g}function b(){var g=Reflect.construct(HTMLElement,[],this.constructor);g._construct();return g}function d(g,m,p,l,r){g={element:l.trackingElement||"No element defined",feature:g.trackingFeature||"No feature defined",type:"change"===p?"breadcrumbs-item":"breadcrumbs-popover",action:p,widget:{name:g.trackingElement||"No widget defined",type:"breadcrumbs"},attributes:r||{}};h(window).adaptTo("foundation-tracker").trackEvent(g)}
var e=h(window).adaptTo("foundation-util-propertybuilder");c.prototype=Object.create(HTMLElement.prototype);c.prototype.constructor=c;c.prototype._construct=function(){var g=this;this._icon=(new a.Icon).set({icon:this.icon,size:"S",alt:""});this._icon.classList.add("betty-breadcrumbs-button-icon");this._headingElement=n.createElement("span");this._headingElement.setAttribute("role","heading");this._headingElement.setAttribute("aria-level","1");this._buttonText=n.createElement("span");var m=(new a.Icon).set({icon:"chevronDown",
size:"XS",alt:""});m.classList.add("betty-breadcrumbs-button-chevron");m.setAttribute("autoarialabel","off");m.setAttribute("aria-hidden",!0);this._button=new a.Button;this._button.setAttribute("variant","quiet");this._button.classList.add("betty-breadcrumbs-button");this._button.type="button";this._button.autocomplete="off";this._button.tracking="off";this._button.setAttribute("aria-haspopup","listbox");var p=f.I18n.get("Change file or folder");this._buttonHiddenAccessibilityLabel=n.createElement("span");
this._buttonHiddenAccessibilityLabel.setAttribute("role","img");this._buttonHiddenAccessibilityLabel.classList.add("betty-breadcrumbs-button-hidden-accessibility-label");this._buttonHiddenAccessibilityLabel.hidden=!0;this._buttonHiddenAccessibilityLabel.setAttribute("aria-label",", "+p);var l=n.createElement("span");l.className="betty-breadcrumbs-button-innerwrapper";this._button.label.appendChild(l);l.appendChild(this._icon);l.appendChild(this._buttonText);l.appendChild(this._buttonHiddenAccessibilityLabel);
l.appendChild(m);this._selectListEl=new a.SelectList;this._selectListEl.tracking="off";this._selectListEl.setAttribute("aria-label",p);var r=!1;this._selectListEl.on("coral-selectlist:change",function(q){var t=q.detail.selection;if(r)r=!1;else{var y=h(t).data("betty-breadcrumbs.internal.targetItem");r=!0;requestAnimationFrame(function(){t.selected=!1;requestAnimationFrame(function(){h(t).attr("aria-selected","true").siblings("[aria-selected\x3d'true']").attr("aria-selected","false")})});k.open=!1;
if(!y.selected){y.selected=!0;var u=n.createEvent("HTMLEvents");u.initEvent("change",!0,!1);g.dispatchEvent(u);d(g,q,"change",y)}}});var k=(new a.Popover).set({target:this._button,alignMy:"center top",alignAt:"center top",tracking:"off"});k.classList.add("betty-breadcrumbs-popover");k.content.appendChild(this._selectListEl);k.setAttribute("role","presentation");k.removeAttribute("aria-live");k.removeAttribute("aria-hidden");k.removeAttribute("tabindex");k.on("coral-overlay:beforeopen",function(){g._updateSelectList()});
k.on("coral-overlay:open",function(q){d(g,q,"open",g.selectedItem)});k.on("coral-overlay:close",function(q){d(g,q,"close",g.selectedItem)});this.insertBefore(k,this.firstChild);this.insertBefore(this._headingElement,this.firstChild);this._headingElement.appendChild(this._button);this._isItemDirty=!0};c.prototype.attributeChangedCallback=function(g,m,p){"icon"===g&&(this._icon.icon=p)};Object.defineProperties(c.prototype,{icon:e.createAttrBasedProperty("icon",""),selectedItem:{get:function(){var g=
null;h(this).children("betty-breadcrumbs-item").each(function(){if(this.selected)return g=this,!1});return g}},trackingFeature:e.createAttrBasedProperty("trackingfeature",""),trackingElement:e.createAttrBasedProperty("trackingelement","")});c.prototype._onItemAttached=function(g){this._isItemDirty=!0;g.selected?this._onSelect(g):this.selectedItem||(g.selected=!0);this._updateButtonDisability()};c.prototype._onItemDetached=function(g){this._isItemDirty=!0;g.selected&&this._onUnselect(g);this._updateButtonDisability()};
c.prototype._onSelect=function(g){h(this).children("betty-breadcrumbs-item").not(g).each(function(){this._selected=!1});this._updateButtonText(g)};c.prototype._onUnselect=function(g){h(this).children("betty-breadcrumbs-item").not(g).first().prop("selected",!0)};c.prototype._onButtonTextChange=function(g){this._isItemDirty=!0;this.selectedItem===g&&this._updateButtonText(g)};c.prototype._updateButtonDisability=function(){var g=this._isItemDirty&&this.contains(n.activeElement);this._button.disabled=
1>=h(this).children("betty-breadcrumbs-item").length;(this._buttonHiddenAccessibilityLabel.hidden=this._button.disabled)&&g?(this._headingElement.tabIndex=-1,this._headingElement.style.outline="none",this._headingElement.focus()):(this._headingElement.removeAttribute("tabindex"),this._headingElement.style.outline="")};c.prototype._updateButtonText=function(g){this._buttonText.textContent=f.I18n.getVar(g.textContent)};c.prototype._updateSelectList=function(){if(this._isItemDirty){var g=this._selectListEl;
g.items.clear();h(this).children("betty-breadcrumbs-item").each(function(){var m=this,p=new a.SelectList.Item;p.classList.add("betty-breadcrumbs-selectlist-item");p.content.textContent=this.textContent;h(p).data("betty-breadcrumbs.internal.targetItem",m);g.items.add(p);requestAnimationFrame(function(){p.setAttribute("aria-selected",m.selected)})});this._isItemDirty=!1}};c.observedAttributes=["icon"];window.customElements.define("betty-breadcrumbs",c);b.prototype=Object.create(HTMLElement.prototype);
b.prototype.constructor=b;b.prototype._construct=function(){this._selected=!1;this._watchDescendants()};b.prototype.connectedCallback=function(){h(this.parentElement).is("betty-breadcrumbs")&&(this._parent=this.parentElement,this._parent._onItemAttached(this))};b.prototype.disconnectedCallback=function(){this._parent&&this._parent._onItemDetached(this);this._parent=null};Object.defineProperties(b.prototype,{selected:{get:function(){return this._selected},set:function(g){!!g!==this._selected&&(this._selected=
!!g,this._parent&&(this._selected?this._parent._onSelect(this):this._parent._onUnselect(this)))}},trackingElement:e.createAttrBasedProperty("trackingelement","")});b.prototype._watchDescendants=function(){var g=this;(new MutationObserver(function(m){g._parent&&g._parent._onButtonTextChange(g)})).observe(this,{childList:!0})};window.customElements.define("betty-breadcrumbs-item",b)})(document,Granite.$,Coral,Granite);
(function(n,h){h(n).on("click",".granite-collection-deselect",function(a){a.preventDefault();if(a=this.dataset.graniteCollectionDeselectTarget)if(a=n.querySelector(a)){var f=h(a).adaptTo("foundation-selections"),c=a.selectedItem;delete a.dataset.foundationSelectionsSelectallMode;f.clear();c&&c.focus()}});h(n).on("click",".foundation-collection-selectall",function(a){if(a=this.dataset.foundationCollectionSelectallTarget){var f=n.querySelector(a);f&&(a=Array.from(n.querySelectorAll(".granite-collection-deselect")).find(function(c){return f.matches(c.dataset.graniteCollectionDeselectTarget)}))&&
function d(b){window.requestAnimationFrame(function(){b.closest("[coral-actionbar-offscreen]")?d(b):b.focus()})}(a)}})})(document,Granite.$);
(function(n,h,a,f){function c(g,m,p){var l=n.createElement("betty-breadcrumbs-item");l.textContent=g;l.dataset.graniteCollectionNavigatorCollectionid=m;l.selected=p;return l}function b(g,m){var p=m.dataset.foundationCollectionId;p.startsWith("parentof:")&&(p=p.substring(9));g.id=g.id?g.id:f.commons.getUID();var l=Array.from(g.querySelectorAll("#"+g.id+" \x3e betty-breadcrumbs-item")),r=window.location.pathname,k=l.find(function(A){return A.dataset.graniteCollectionNavigatorCollectionid===p||r===A.dataset.graniteCollectionNavigatorHref});
if(k)k.selected=!0,h(k).prevAll("betty-breadcrumbs-item").remove();else{k=Array.from(m.querySelectorAll(".foundation-collection-item")).find(function(A){return A.dataset.foundationCollectionItemId===p});if(k){var q=k.closest("coral-columnview-column").dataset.foundationLayoutColumnviewColumnid;var t=l.find(function(A){return A.dataset.graniteCollectionNavigatorCollectionid===q})}if(q&&t&&0!==t.length)m=h(t).prev("betty-breadcrumbs-item"),(l=m[0])?(l.textContent=k.querySelector(".foundation-collection-item-title").textContent,
l.dataset.graniteCollectionNavigatorCollectionid=k.dataset.foundationCollectionItemId,l.selected=!0):(l=n.createElement("betty-breadcrumbs-item"),m=h(l),l.textContent=k.querySelector(".foundation-collection-item-title").textContent,l.dataset.graniteCollectionNavigatorCollectionid=k.dataset.foundationCollectionItemId,l.selected=!0,t.parentNode.insertBefore(l,t)),m.prevAll("betty-breadcrumbs-item").remove();else{t=null;k=g.querySelector("#"+g.id+" \x3e betty-breadcrumbs-item:last-of-type");var y=k.textContent,
u=k.dataset.graniteCollectionNavigatorCollectionid;k=null;l.forEach(function(A){A.remove()});m.id=m.id?m.id:f.commons.getUID();var w=Array.from(m.querySelectorAll("#"+m.id+" \x3e coral-columnview-column"));w.forEach(function(A,x){var L=n.createElement("betty-breadcrumbs-item");if(x<w.length-1){if(A=A.querySelector(".foundation-collection-item[data-foundation-collection-item-id\x3d'"+w[x+1].dataset.foundationLayoutColumnviewColumnid+"']"))L.textContent=A.querySelector(".foundation-collection-item-title").textContent,
L.dataset.graniteCollectionNavigatorCollectionid=A.dataset.foundationCollectionItemId;null!==t?t.parentNode.insertBefore(L,t):g.appendChild(L);t=L}else t&&(t.selected=!0),L=c(y,u),g.appendChild(L)})}}}function d(g,m){var p=m.dataset.foundationCollectionId;m=h(m);g.id||(g.id=f.commons.getUID());var l=Array.from(g.querySelectorAll("#"+g.id+" \x3e betty-breadcrumbs-item")),r=window.location.pathname,k=l.find(function(A){return A.dataset.graniteCollectionNavigatorCollectionid===p||r===A.dataset.graniteCollectionNavigatorHref});
if(k)k.selected=!0,h(k).prevAll("betty-breadcrumbs-item").remove();else{if(k=n.querySelector(".shell-collectionpage-tree"))if(k=k.getParentIdTree(p)){var q=!1,t=0;k.length-1<l.length&&(q=!0);if(!q){var y=k.slice(0).reverse();y.shift();var u=k.length-1>l.length?l.length:k.length-1;for(t=0;t<u-1;++t)if(y[t].id!==l[t].dataset.graniteCollectionNavigatorCollectionid){q=!0;break}}if(q){for(t=0;t<l.length-1;++t)l[t].remove();g=l[l.length-1];for(t=1;t<k.length;++t){var w=c(k[t].title,k[t].id);g.parentNode.insertBefore(w,
g);g=w}w.selected=!0;return}}if(w=m.adaptTo("foundation-collection-meta"))w=c(w.getTitle(),p,!0),g=g.querySelector("#"+g.id+" \x3e betty-breadcrumbs-item:first-of-type"),g.parentNode.insertBefore(w,g)}}function e(g,m,p){var l=History.getState().data.shellCollection,r=g.dataset.graniteCollectionPagetitleSrc;m=m.dataset.foundationCollectionId;(!l||l.id!==m)&&r&&(l=g.dataset.graniteCollectionPagetitleBase,p&&(l=p+" | "+l),p=a.expand(r,{id:m}),History.pushState({shellCollection:{id:m,target:g.dataset.graniteCollectionPagetitleTarget}},
l,p),g=n.head.querySelector("meta[name\x3d'foundation.tracking.page']").getAttribute("content"))&&(g=JSON.parse(g),g.assetId=m,h(window).adaptTo("foundation-tracker").trackPage(g))}h(function(){var g=n.head.querySelector(".granite-collection-pagetitle");if(g){var m=History.getState();g=g.dataset.graniteCollectionPagetitleTarget;var p=n.querySelector(g).dataset.foundationCollectionId;m.data.shellCollection={id:p,target:g};History.replaceState(m.data);h(window).on("statechange",function(){var l=History.getState().data.shellCollection;
if(l){var r=n.querySelector(l.target),k=h(r);r&&r.dataset.foundationCollectionId!==l.id&&k.adaptTo("foundation-collection").load(l.id)}})}});h(n).on("foundation-collection-navigate",".foundation-collection",function(g){var m=this,p=Array.from(n.querySelectorAll(".granite-collection-navigator"));g=Array.from(n.querySelectorAll(".granite-collection-pagetitle"));p.forEach(function(l){m.matches(l.dataset.graniteCollectionNavigatorTarget)&&(m.classList.contains("foundation-layout-columnview")?b(l,m):d(l,
m))});g.forEach(function(l){if(m.matches(l.dataset.graniteCollectionPagetitleTarget)){var r=p.find(function(k){return m.matches(k.dataset.graniteCollectionNavigatorTarget)});r=r?r.querySelectorAll("betty-breadcrumbs-item"):[];1<r.length&&r[0].textContent?e(l,m,r[0].textContent.trim()):e(l,m)}})});h(n).on("change","betty-breadcrumbs.granite-collection-navigator",function(g){var m=this.selectedItem,p=n.querySelector(this.dataset.graniteCollectionNavigatorTarget);(g=m.dataset.graniteCollectionNavigatorCollectionid)?
(h(m).prevAll("betty-breadcrumbs-item").remove(),m=h(p).adaptTo("foundation-collection"),"load"in m||console&&console.warn("FoundationCollection#load is not implemented; do nothing."),m.load(g)):window.location=m.dataset.graniteCollectionNavigatorHref})})(document,Granite.$,Granite.URITemplate,window.Coral);
(function(n,h,a,f){function c(d){if("granite-omnisearch-result"===d.id){d=h.I18n.get("Please wait for items to load before you switch views");var e=h.I18n.get("Info");a(window).adaptTo("foundation-ui").notify(e,d,"info")}}function b(d){d=d.querySelectorAll(".foundation-selections-item");return Array.prototype.map.call(d,function(e){return e.dataset.foundationCollectionItemId})}a(n).on("coral-cyclebutton:change",".granite-collection-switcher",function(d){var e=this.dataset.graniteCollectionSwitcherTarget;
if((d=d.originalEvent.detail.selection.dataset.graniteCollectionSwitcherSrc)&&e){e=h.UI.Foundation.XSS.sanitizeHtml(e);var g=a(e);e=g[0];var m=g.adaptTo("foundation-collection"),p=g.adaptTo("shell-collection-sort");m="getPagination"in m?m.getPagination():null;var l=b(e),r="true"===e.dataset.foundationSelectionsSelectallMode;p&&p.clearCookie();c(e);h.UI.Foundation.Layouts.cleanAll(e);d=f.expand(d,{offset:0,limit:m&&l.length?m.offset:null,id:e.dataset.foundationCollectionId});a.ajax({url:d,cache:!1}).then(function(k){a(window).adaptTo("foundation-util-htmlparser").parse(k).then(function(q){q=
a(q).children();var t=q[0];g.replaceWith(q);t.dataset.foundationSelectionsSelectallMode=r;0<l.length&&q.data("foundation-layout-collection-switcher.internal.selectionIds",l);q.trigger("foundation-contentloaded");q.removeData("foundation-layout-collection-switcher.internal.selectionIds");q=a(".foundation-layout-panel-content.foundation-collection-content coral-masonry")[0];t=a(".foundation-layout-panel-content.foundation-collection-content coral-columnview")[0];q&&a(".foundation-layout-panel-content.foundation-collection-content").attr("role",
"grid");t&&a(".foundation-layout-panel-content.foundation-collection-content").removeAttr("role")})},function(){var k=h.I18n.get("Error"),q=h.I18n.get("Fail to load data.");a(window).adaptTo("foundation-ui").alert(k,q,"error")})}})})(document,Granite,Granite.$,Granite.URITemplate);
(function(n,h){h(n).on("foundation-selections-change",".foundation-collection",function(){var a=h(this),f=0<a.adaptTo("foundation-selections").count();h(".granite-collection-create").filter(function(){return a.is(this.dataset.graniteCollectionCreateTarget)}).each(function(){f?this.classList.add("granite-collection-create-hidden"):this.classList.remove("granite-collection-create-hidden")})});h(n).on("foundation-contentloaded",function(a){h(".granite-collection-create",a.target).each(function(){var f=
Granite.UI.Foundation.XSS.sanitizeHtml(this.dataset.foundationToggleableControlTarget),c=h(f+".granite-pulldown-overlay")[0],b=h(c).closest("#granite-shell-content")[0];Coral.commons.ready(c,function(){c&&b&&(c.within=b)})})})})(document,Granite.$);
(function(n,h){h(n).on("foundation-collection-newpage",function(a){var f=h(a.target);a=f.adaptTo("foundation-collection");var c;a.getPagination&&(c=a.getPagination());h("granite-pagingstatus.granite-collection-pagingstatus").each(function(){var b=this.getAttribute("data-granite-collection-pagingstatus-target");b&&f.is(b)&&(c||(b=f.find(".foundation-collection-item").length,c={offset:b,guessTotal:b,hasNext:!1}),this.current=c.offset,this.guessTotal=c.guessTotal,this.hasNext=null===c.hasNext?1E3<c.guessTotal:
c.hasNext)})})})(document,Granite.$);
(function(n,h,a){a(h).on("coral-cyclebutton:change",".granite-toggleable-control",function(f){var c=a(this);f=f.originalEvent.detail.selection;var b=f.dataset.graniteToggleableControlAction;if("navigate"===b&&"null"!==(new URL(f.dataset.graniteToggleableControlHref,h.baseURI)).origin)n.location.href=f.dataset.graniteToggleableControlHref;else{var d=f.dataset.graniteToggleableControlTarget;if(d){var e=a(h.querySelector(d)).adaptTo("foundation-toggleable");(d=this.dataset.graniteToggleableControlSavekey)&&a.cookie(d,
f.dataset.graniteToggleableControlName||"",{expires:7,path:"/"});requestAnimationFrame(function(){void 0===b&&(b=e.isOpen()?"hide":"show");"show"===b?e.show(c[0]):"hide"===b&&e.hide()})}}})})(window,document,Granite.$);
(function(n,h,a,f){function c(){var b=Reflect.construct(HTMLElement,[],this.constructor);b._construct();return b}h=a(n).adaptTo("foundation-util-propertybuilder");c.prototype=Object.create(HTMLElement.prototype);c.prototype.constructor=c;c.prototype._construct=function(){this._render();for(var b=this.attributes,d=0;d<b.length;d++)this.attributeChangedCallback(b[d].name,void 0,b[d].value)};c.prototype.attributeChangedCallback=function(b,d,e){switch(b){case "current":case "guesstotal":case "hasnext":this._render()}};
Object.defineProperties(c.prototype,{current:(new h(h.createAttrBasedProperty("current"))).mix(h.integerType(-1)).build(),guessTotal:(new h(h.createAttrBasedProperty("guesstotal"))).mix(h.integerType(-1)).build(),hasNext:h.createBooleanAttrBasedProperty("hasnext")});c.prototype._render=function(){var b=""+this.guessTotal;this.hasNext&&(b+="+");this.textContent=f.I18n.get("{0} of {1}",[this.current,b])};c.observedAttributes=["current","guesstotal","hasnext"];n.customElements.define("granite-pagingstatus",
c)})(window,document,Granite.$,Granite);
(function(n,h,a,f){function c(m){var p=!0;Array.from(m.querySelectorAll("a[is\x3d'coral-anchorlist-item']")).some(function(l){return"none"!==n.getComputedStyle(l).display?(p=!1,!0):!1});p&&!0===m.open&&(m.open=!1);m.previousElementSibling.hidden=p}function b(m){(new MutationObserver(function(p){p.some(function(l){return l.target instanceof Coral.AnchorList.Item})&&c(m)})).observe(m,{attributes:!0,subtree:!0,attributeFilter:["hidden","class"]});c(m)}var d=a(n),e=d.adaptTo("foundation-registry"),g=
new WeakMap;e.register("foundation.adapters",{type:"foundation-command",selector:".granite-pulldown-overlay [data-foundation-command]",adapter:function(m){var p=m.closest(".granite-pulldown-overlay").previousElementSibling;return{enhanceUI:function(){var l=d.adaptTo("foundation-util-keyboard"),r=m.textContent.trim();m.dataset.foundationCommandLabel||(m.dataset.foundationCommandLabel=r);r=m._elements.shortcutHint;r||(l=l.normalize(this.getShortcut()),r=h.createElement("span"),r.classList.add("granite-command-alignRight"),
r.textContent=l,m._elements.shortcutHint=r,m.content?m.content.insertBefore(r,m.content.firstChild):m.insertBefore(r,m.firstChild))},execute:function(){m.click()},getLabel:function(){var l=m.dataset.foundationCommandLabel||m.textContent.trim();return f.I18n.get("{0} {1}",[p.textContent.trim(),l])},getShortcut:function(){return m.dataset.foundationCommand},isActive:function(){return 0<p.offsetWidth&&0<p.offsetHeight&&!m.hidden&&!m.classList.contains("foundation-collection-action-hidden")}}}});a(h).on("foundation-contentloaded",
function(m){Array.from(m.target.querySelectorAll(".granite-pulldown-overlay")).forEach(function(p){g.has(p)||(b(p),g.set(p,!0))})})})(window,document,Granite.$,Granite);
(function(n,h,a){n=a(n);var f=n.adaptTo("foundation-util-keyboard");n.adaptTo("foundation-registry").register("foundation.adapters",{type:"foundation-command",selector:".granite-ActionGroup-item[data-foundation-command]",adapter:function(c){var b=a(c),d=b.closest(".granite-ActionGroup"),e;return{enhanceUI:function(){if(!c.dataset.foundationCommandLabel){var g=c.textContent.trim();c.dataset.foundationCommandLabel=g}e||(g=f.normalize(this.getShortcut()),e=h.createElement("span"),e.classList.add("granite-command-alignRight"),
e.textContent=g,c.content?c.content.insertBefore(e,c.content.firstChild):c.insertBefore(e,c.firstChild))},execute:function(){b.click()},getLabel:function(){return c.dataset.foundationCommandLabel||c.textContent.trim()},getShortcut:function(){return c.dataset.foundationCommand},isActive:function(){return d.is(":visible")&&!b.prop("hidden")&&!b.prop("disabled")}}}});a(h).on("click",".granite-ActionGroup-item",function(c){a(c.target).closest("coral-popover").hide()})})(window,document,Granite.$);
(function(n,h,a,f){var c=f.UI.Foundation.Utils.everyReverse,b=a(n).adaptTo("foundation-registry");a(h).on("click",".granite-form-saveactivator",function(d){d=this.dataset.graniteFormSaveactivatorHref;var e=a("#"+this.getAttribute("form"));e.addClass("granite-form-saveactivator-form");d?e.attr("data-granite-form-saveactivator-form-redirect",d):e.removeAttr("data-granite-form-saveactivator-form-redirect")});a(h).on("foundation-form-submitted",".granite-form-saveactivator-form",function(d,e,g){if(e){var m=
a(this),p=m.data("foundationFormResponseUiSuccess")||m.children(".foundation-form-response-ui-success").data("foundationFormResponseUiSuccess");p||((d=this.dataset.graniteFormSaveactivatorFormRedirect)?(p={name:"foundation.redirect",href:d},a(n).adaptTo("foundation-util-messenger").put(null,f.I18n.get("Properties updated successfully"),"success")):p={name:"foundation.reload"},c(b.get("foundation.form.response.ui.success"),function(l){return l.name!==p.name?!0:!1===l.handler.call(m[0],m[0],p)}))}})})(window,
document,Granite.$,Granite);
(function(n,h,a){function f(m,p){(m=m[0].dataset.granitePickerdialogCollection)&&(m=a(m).adaptTo("foundation-selections"))&&m.clear();return{clean:function(){},replace:function(l){}}}function c(m,p){var l=p.filter("#granite-pickerdialog-search-result-titlebar-center"),r=p.filter("#granite-pickerdialog-search-result-titlebar-right"),k=m.find(".granite-pickerdialog-titlebar"),q=k.children("betty-titlebar-title"),t=k.children("betty-titlebar-secondary");l.length&&(q.prop("hidden",!0).after(l),t.prop("hidden",
!0).after(r));k.trigger("foundation-contentloaded");return{clean:function(){q.prop("hidden",!1);l.remove();t.prop("hidden",!1);r.remove()},replace:function(y){l=y.filter("#granite-pickerdialog-search-result-titlebar-center").replaceAll(l);r=y.filter("#granite-pickerdialog-search-result-titlebar-right").replaceAll(r);k.trigger("foundation-contentloaded")}}}function b(m,p){var l=p.filter("#granite-pickerdialog-search-result-content"),r=m.find(".granite-pickerdialog-content .foundation-layout-panel-content");
r.prop("hidden",!0);l.insertAfter(r).trigger("foundation-contentloaded");return{clean:function(){l.remove();r.prop("hidden",!1)},replace:function(k){l=k.filter("#granite-pickerdialog-search-result-content").replaceAll(l).trigger("foundation-contentloaded")}}}function d(m,p){var l=m.find(".granite-pickerdialog-searchfield"),r=l.children("[foundation-autocomplete-button]"),k=r.prop("icon");p=Granite.I18n.get("Close Search");r.prop("tabIndex",0);r.prop("icon","closeCircle");r.attr("title",p);r.attr("aria-label",
p);r.removeAttr("role");var q=function(t){t.preventDefault();this.blur();e(m)};r.on("click",q);return{clean:function(){var t=l.adaptTo("foundation-field");t&&t.setValue("");r.prop("tabIndex",-1);r.prop("icon",k);r.removeAttr("title");r.removeAttr("aria-label");r.attr("role","presentation");r.off("click",q);l.focus()},replace:function(t){}}}function e(m){m=m[0];var p=g.get(m);p&&Granite.UI.Foundation.Utils.everyReverse(p,function(l){l.clean();return!0});g.delete(m)}var g=new WeakMap;a(n).adaptTo("foundation-registry").register("foundation.form.response.ui.success",
{name:"granite.pickerdialog.search.result",handler:function(m,p,l,r,k,q){a(n).adaptTo("foundation-util-htmlparser").parse(q).then(function(t){var y=a(t).children();t=a(m).closest(".granite-pickerdialog");var u=t[0],w=g.get(u);w?w.forEach(function(A){A.replace(y)}):(w=[],w.push(f(t,y)),w.push(c(t,y)),w.push(b(t,y)),w.push(d(t,y)),g.set(u,w))})}});a(h).on("click",".granite-pickerdialog-search-close",function(m){m.preventDefault();m=a(this).closest(".granite-pickerdialog");e(m)})})(window,document,Granite.$);
(function(n,h){function a(c){return function(b){return c?c.replace("{{count}}",b.count+(0<b.count&&b.hasNext?"+":"")):""}}function f(c){var b={count:c.adaptTo("foundation-selections").count(),hasNext:!1};if("true"!==c[0].dataset.foundationSelectionsSelectallMode)return b;if(c=c.adaptTo("foundation-collection").getPagination())b.hasNext=null===c.hasNext?1E3<c.guessTotal:c.hasNext;return b}h(n).on("foundation-selections-change",".foundation-collection",function(){var c=h(this);h(".foundation-admin-selectionstatus").filter(function(){return c.is(this.dataset.foundationAdminSelectionstatusTarget)}).each(function(){var b=
h(this),d=a(b[0].dataset.foundationAdminSelectionstatusTemplate);b.html(d(f(c)))});h(".granite-collection-deselect").filter(function(){return c.is(this.dataset.graniteCollectionDeselectTarget)}).each(function(){var b=a(this.dataset.graniteCollectionDeselectTemplate);this.children[1].setAttribute("alt",b(f(c)))})})})(document,Granite.$);
(function(n,h,a){a(h).on("foundation-form-submitted","#granite-user-preferences",function(f,c){c&&(f=a(this).serializeArray(),a(n).adaptTo("foundation-preference").setAll(f.reduce(function(b,d){b.set(d.name,d.value);return b},new Map)),a(h).trigger(a.Event("user-preferences-changed",{userPreferences:f})),setTimeout(function(){n.location.reload()},100))});a(h).on("submit","#impersonation-form",function(f){f.preventDefault();f=a(this);a.ajax({url:f.attr("action"),type:f.attr("method")||"post",data:f.serializeArray(),
async:!1,error:function(){h.getElementById("invalid-user-error").removeAttribute("hidden")},success:function(){h.getElementById("invalid-user-error").setAttribute("hidden","true");n.location.reload()}})})})(window,document,Granite.$);(function(n,h,a){n.chrome&&/Google/.test(a.vendor)&&!/OPR|Edge/.test(a.userAgent)&&n.addEventListener("unload",function(){h.documentElement.innerHTML=""})})(window,document,navigator);
(function(n,h){h(n).on("foundation-contentloaded",function(a){a=n.querySelector(".granite-skipNavigationLinks");if(null!==a&&(0===a.hash.length||null===n.querySelector(a.hash))){var f=a.getAttribute("data-target-selector");f=n.querySelector(f);null!==f&&(f.id=f.id||"skip-navigation-links-target-"+Coral.commons.getUID(),a.setAttribute("href","#"+f.id))}})})(document,Granite.$);